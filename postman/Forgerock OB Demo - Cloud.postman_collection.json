{
	"info": {
		"_postman_id": "5cc7329c-f1aa-4d23-8808-44140ed06702",
		"name": "Forgerock OB Demo - Cloud",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "TPP",
			"item": [
				{
					"name": "Setup environment",
					"item": [
						{
							"name": "AS discovery",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "309ad472-3897-4bed-8d3b-b4a14651bf98",
										"exec": [
											"var data = JSON.parse(responseBody);",
											"",
											"postman.setEnvironmentVariable(\"AS_ISSUER_ID\", data.issuer);",
											"postman.setEnvironmentVariable(\"AS_introspection_endpoint\", data.introspection_endpoint);",
											"postman.setEnvironmentVariable(\"AS_userinfo_endpoint\", data.userinfo_endpoint);",
											"postman.setEnvironmentVariable(\"AS_authorization_endpoint\", data.authorization_endpoint);",
											"postman.setEnvironmentVariable(\"AS_token_endpoint\", data.token_endpoint);",
											"postman.setEnvironmentVariable(\"AS_JWK_URI\", data.jwks_uri);",
											"postman.setEnvironmentVariable(\"ASPSP_REGISTRATION_ENDPOINT\", data.registration_endpoint);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept-encoding": true
								}
							},
							"request": {
								"method": "GET",
								"header": [],
								"url": "https://{{FQDN}}/am/oauth2/realms/root/realms/openbanking/.well-known/openid-configuration",
								"description": "Call the AS discovery endpoints. This will load all the AS endpoints and constants into your postman environment"
							},
							"response": [
								{
									"name": "AS discovery",
									"originalRequest": {
										"method": "GET",
										"header": [
											{
												"key": "Cache-Control",
												"value": "no-cache, no-store, max-age=0, must-revalidate"
											},
											{
												"key": "Pragma",
												"value": "no-cache"
											},
											{
												"key": "Cookie",
												"value": "cookiename=werewrw;cook"
											}
										],
										"url": "{{AS}}/oauth2/.well-known/openid-configuration"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Accept-Ranges",
											"value": "bytes",
											"name": "Accept-Ranges",
											"description": "Content-Types that are acceptable"
										},
										{
											"key": "Content-Length",
											"value": "2986",
											"name": "Content-Length",
											"description": "The length of the response body in octets (8-bit bytes)"
										},
										{
											"key": "Content-Type",
											"value": "application/json;charset=UTF-8",
											"name": "Content-Type",
											"description": "The mime type of this content"
										},
										{
											"key": "Date",
											"value": "Fri, 31 Aug 2018 23:31:36 GMT",
											"name": "Date",
											"description": "The date and time that the message was sent"
										},
										{
											"key": "Server",
											"value": "Restlet-Framework/2.3.4",
											"name": "Server",
											"description": "A name for the server"
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=31536000; includeSubdomains; preload",
											"name": "Strict-Transport-Security",
											"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
										},
										{
											"key": "Vary",
											"value": "Accept-Charset, Accept-Encoding, Accept-Language, Accept",
											"name": "Vary",
											"description": "Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server."
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff",
											"name": "X-Content-Type-Options",
											"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
										},
										{
											"key": "X-Frame-Options",
											"value": "DENY",
											"name": "X-Frame-Options",
											"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
										}
									],
									"cookie": [
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "01",
											"key": "amlbcookie"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
											"key": "iPlanetDirectoryPro"
										}
									],
									"body": "{\"acr_values_supported\":[\"urn:openbanking:psd2:sca\",\"urn:openbanking:psd2:ca\"],\"authorization_endpoint\":\"https://matls.as.aspsp.ob.forgerock.financial/oauth2/realms/root/realms/openbanking/authorize\",\"check_session_iframe\":\"https://as.aspsp.ob.forgerock.financial/oauth2/realms/root/realms/openbanking/connect/checkSession\",\"claims_parameter_supported\":true,\"claims_supported\":[\"acr\",\"zoneinfo\",\"openbanking_intent_id\",\"address\",\"profile\",\"name\",\"phone_number\",\"given_name\",\"locale\",\"family_name\",\"email\"],\"end_session_endpoint\":\"https://as.aspsp.ob.forgerock.financial/oauth2/realms/root/realms/openbanking/connect/endSession\",\"id_token_encryption_alg_values_supported\":[\"RSA-OAEP\",\"RSA-OAEP-256\",\"A128KW\",\"A256KW\",\"RSA1_5\",\"dir\",\"A192KW\"],\"id_token_encryption_enc_values_supported\":[\"A256GCM\",\"A192GCM\",\"A128GCM\",\"A128CBC-HS256\",\"A192CBC-HS384\",\"A256CBC-HS512\"],\"id_token_signing_alg_values_supported\":[\"ES384\",\"HS256\",\"HS512\",\"ES256\",\"RS256\",\"HS384\",\"ES512\"],\"introspection_endpoint\":\"https://matls.as.aspsp.ob.forgerock.financial/oauth2/realms/root/realms/openbanking/introspect\",\"issuer\":\"https://matls.as.aspsp.ob.forgerock.financial/oauth2/openbanking\",\"jwks_uri\":\"https://as.aspsp.ob.forgerock.financial/oauth2/realms/root/realms/openbanking/connect/jwk_uri\",\"rcs_request_encryption_alg_values_supported\":[\"RSA-OAEP\",\"RSA-OAEP-256\",\"A128KW\",\"RSA1_5\",\"A256KW\",\"dir\",\"A192KW\"],\"rcs_request_encryption_enc_values_supported\":[\"A256GCM\",\"A192GCM\",\"A128GCM\",\"A128CBC-HS256\",\"A192CBC-HS384\",\"A256CBC-HS512\"],\"rcs_request_signing_alg_values_supported\":[\"ES384\",\"HS256\",\"HS512\",\"ES256\",\"RS256\",\"HS384\",\"ES512\"],\"rcs_response_encryption_alg_values_supported\":[\"RSA-OAEP\",\"RSA-OAEP-256\",\"A128KW\",\"A256KW\",\"RSA1_5\",\"dir\",\"A192KW\"],\"rcs_response_encryption_enc_values_supported\":[\"A256GCM\",\"A192GCM\",\"A128GCM\",\"A128CBC-HS256\",\"A192CBC-HS384\",\"A256CBC-HS512\"],\"rcs_response_signing_alg_values_supported\":[\"ES384\",\"HS256\",\"HS512\",\"ES256\",\"RS256\",\"HS384\",\"ES512\"],\"registration_endpoint\":\"https://rs.aspsp.ob.forgerock.financial/open-banking/registerTPP\",\"request_object_encryption_alg_values_supported\":[\"RSA-OAEP\",\"RSA-OAEP-256\",\"A128KW\",\"RSA1_5\",\"A256KW\",\"dir\",\"A192KW\"],\"request_object_encryption_enc_values_supported\":[\"A256GCM\",\"A192GCM\",\"A128GCM\",\"A128CBC-HS256\",\"A192CBC-HS384\",\"A256CBC-HS512\"],\"request_object_signing_alg_values_supported\":[\"ES384\",\"HS256\",\"HS512\",\"ES256\",\"RS256\",\"HS384\",\"ES512\"],\"request_parameter_supported\":true,\"request_uri_parameter_supported\":true,\"response_types_supported\":[\"code\",\"code id_token\",\"id_token\"],\"scopes_supported\":[\"openid\",\"payments\",\"accounts\"],\"subject_types_supported\":[\"public\",\"pairwise\"],\"token_endpoint\":\"https://matls.as.aspsp.ob.forgerock.financial/oauth2/realms/root/realms/openbanking/access_token\",\"token_endpoint_auth_methods_supported\":[\"client_secret_post\",\"private_key_jwt\",\"client_secret_basic\"],\"userinfo_endpoint\":\"https://matls.as.aspsp.ob.forgerock.financial/oauth2/realms/root/realms/openbanking/userinfo\",\"version\":\"3.0\"}"
								}
							]
						},
						{
							"name": "RS discovery",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "95f5548d-3762-404d-ae76-b39350eb095a",
										"exec": [
											"var data = JSON.parse(responseBody);",
											"",
											"data.Data.PaymentInitiationAPI.forEach(function(entry) {",
											"    Object.keys(entry.Links).forEach(function(endpointRef) {",
											"        postman.setEnvironmentVariable(\"RS_\" + endpointRef + \"_\" + entry.Version, ",
											"        entry.Links[endpointRef]",
											"            .replace(\"{PaymentId}\", \"{{DomesticPaymentId}}\")",
											"            .replace(\"{DomesticPaymentId}\", \"{{DomesticPaymentId}}\")",
											"            .replace(\"{PaymentSubmissionId}\", \"{{IntentId}}\")",
											"            .replace(\"{ConsentId}\", \"{{IntentId}}\")",
											"        );",
											"    });",
											"});",
											"",
											"data.Data.AccountAndTransactionAPI.forEach(function(entry) {",
											" Object.keys(entry.Links).forEach(function(endpointRef) {",
											"        postman.setEnvironmentVariable(\"RS_\" + endpointRef + \"_\" + entry.Version, ",
											"        entry.Links[endpointRef]",
											"            .replace(\"{AccountRequestId}\", \"{{AccountIntentId}}\")",
											"            .replace(\"{ConsentId}\", \"{{AccountIntentId}}\")",
											"            .replace(\"{AccountId}\", \"{{AccountId}}\")",
											"            .replace(\"{StatementId}\", \"{{StatementId}}\")",
											"        );",
											"    })",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "X-OpenIDM-Username",
										"value": "openidm-admin",
										"type": "text"
									},
									{
										"key": "X-OpenIDM-Password",
										"value": "openidm-admin",
										"type": "text"
									}
								],
								"url": "https://{{FQDN}}/rs/obRSDiscovery/",
								"description": "Call the RS discovery endpoints. This will load all the OB endpoints into your postman environment"
							},
							"response": [
								{
									"name": "RS discovery",
									"originalRequest": {
										"method": "GET",
										"header": [],
										"url": "{{RS}}/discovery"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Cache-Control",
											"value": "no-cache, no-store, max-age=0, must-revalidate",
											"name": "Cache-Control",
											"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
										},
										{
											"key": "Content-Type",
											"value": "application/json;charset=utf-8",
											"name": "Content-Type",
											"description": "The mime type of this content"
										},
										{
											"key": "Date",
											"value": "Fri, 31 Aug 2018 23:31:13 GMT",
											"name": "Date",
											"description": "The date and time that the message was sent"
										},
										{
											"key": "Expires",
											"value": "0",
											"name": "Expires",
											"description": "Gives the date/time after which the response is considered stale"
										},
										{
											"key": "Pragma",
											"value": "no-cache",
											"name": "Pragma",
											"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=31536000 ; includeSubDomains",
											"name": "Strict-Transport-Security",
											"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff",
											"name": "X-Content-Type-Options",
											"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
										},
										{
											"key": "X-Frame-Options",
											"value": "DENY",
											"name": "X-Frame-Options",
											"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
										},
										{
											"key": "X-XSS-Protection",
											"value": "1; mode=block",
											"name": "X-XSS-Protection",
											"description": "Cross-site scripting (XSS) filter"
										},
										{
											"key": "transfer-encoding",
											"value": "chunked",
											"name": "transfer-encoding",
											"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
										},
										{
											"key": "x-fapi-interaction-id",
											"value": "2e96a7be-e3ac-4fdd-9d5c-cfe8b60d6972",
											"name": "x-fapi-interaction-id",
											"description": "Custom header"
										}
									],
									"cookie": [
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "01",
											"key": "amlbcookie"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
											"key": "iPlanetDirectoryPro"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": true,
											"domain": "rs.aspsp.ob.forgerock.financial",
											"path": "/v1.1",
											"secure": true,
											"value": "34F0FF6ADBE51B4332018415EB8726BF",
											"key": "JSESSIONID"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": true,
											"domain": "rs.aspsp.ob.forgerock.financial",
											"path": "/",
											"secure": true,
											"value": "B165242A9E44929BEB0404056A48E34D",
											"key": "JSESSIONID"
										}
									],
									"body": "{\"Data\":{\"PaymentInitiationAPI\":[{\"Version\":\"v1.1\",\"Links\":{\"CreateSingleImmediatePayment\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/payments\",\"GetSingleImmediatePayment\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/payments/{PaymentId}\",\"CreatePaymentSubmission\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/payment-submissions\",\"GetPaymentSubmission\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/payment-submissions/{PaymentSubmissionId}\"}},{\"Version\":\"v2.0\",\"Links\":{\"CreateSingleImmediatePayment\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/payments\",\"GetSingleImmediatePayment\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/payments/{PaymentId}\",\"CreatePaymentSubmission\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/payment-submissions\",\"GetPaymentSubmission\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/payment-submissions/{PaymentSubmissionId}\"}}],\"AccountAndTransactionAPI\":[{\"Version\":\"v1.1\",\"Links\":{\"CreateAccountRequest\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/account-requests\",\"GetAccountRequest\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/account-requests/{AccountRequestId}\",\"DeleteAccountRequest\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/account-requests/{AccountRequestId}\",\"GetAccounts\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/accounts\",\"GetAccount\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/accounts/{AccountId}\",\"GetAccountTransactions\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/accounts/{AccountId}/transactions\",\"GetAccountBeneficiaries\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/accounts/{AccountId}/beneficiaries\",\"GetAccountBalances\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/accounts/{AccountId}/balances\",\"GetAccountDirectDebits\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/accounts/{AccountId}/direct-debits\",\"GetAccountStandingOrders\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/accounts/{AccountId}/standing-orders\",\"GetAccountProduct\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/accounts/{AccountId}/product\",\"GetStandingOrders\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/standing-orders\",\"GetDirectDebits\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/direct-debits\",\"GetBeneficiaries\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/beneficiaries\",\"GetTransactions\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/transactions\",\"GetBalances\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/balances\",\"GetProducts\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v1.1/products\"}},{\"Version\":\"v2.0\",\"Links\":{\"CreateAccountRequest\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/account-requests\",\"GetAccountRequest\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/account-requests/{AccountRequestId}\",\"DeleteAccountRequest\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/account-requests/{AccountRequestId}\",\"GetAccounts\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts\",\"GetAccount\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}\",\"GetAccountTransactions\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/transactions\",\"GetAccountBeneficiaries\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/beneficiaries\",\"GetAccountBalances\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/balances\",\"GetAccountDirectDebits\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/direct-debits\",\"GetAccountStandingOrders\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/standing-orders\",\"GetAccountProduct\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/product\",\"GetStandingOrders\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/standing-orders\",\"GetDirectDebits\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/direct-debits\",\"GetBeneficiaries\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/beneficiaries\",\"GetTransactions\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/transactions\",\"GetBalances\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/balances\",\"GetProducts\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/products\",\"GetAccountOffers\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/offers\",\"GetAccountParty\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/party\",\"GetAccountScheduledPayments\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/scheduled-payments\",\"GetAccountStatements\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/statements\",\"GetAccountStatement\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/statements/{StatementId}\",\"GetAccountStatementFile\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/statements/{StatementId}/file\",\"GetAccountStatementTransactions\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/accounts/{AccountId}/statements/{StatementId}/transactions\",\"GetOffers\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/offers\",\"GetParty\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/party\",\"GetScheduledPayments\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/scheduled-payments\",\"GetStatement\":\"https://rs.aspsp.ob.forgerock.financial:443/open-banking/v2.0/statements\"}}]}}"
								}
							]
						}
					],
					"description": "Before running the examples, you will need to load all the environment variables related to the ASPSP.\nInstead of having them hardcoded, we choose to load them from the discovery endpoints.\n\nWhat you need to do is to simple call the two discovery endpoints. This will load your environment to be ready to use the examples!",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "4f728397-6840-4f65-a649-0518abe030d0",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "6679fd96-9278-4137-8b5b-014ba1a8430e",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Onboarding",
					"item": [
						{
							"name": "Current software statement",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "288878e3-6899-493c-9367-3f7148484183",
										"exec": [
											"var data = JSON.parse(responseBody);",
											"",
											"postman.setEnvironmentVariable(\"software_statement_id\", data.id);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": "{{MATLS_DIRECTORY}}/api/software-statement/current/"
							},
							"response": [
								{
									"name": "Curent software statement",
									"originalRequest": {
										"method": "GET",
										"header": [],
										"url": "{{DIRECTORY}}/api/software-statement/current/"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Cache-Control",
											"value": "no-cache, no-store, max-age=0, must-revalidate",
											"name": "Cache-Control",
											"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
										},
										{
											"key": "Content-Type",
											"value": "application/json;charset=UTF-8",
											"name": "Content-Type",
											"description": "The mime type of this content"
										},
										{
											"key": "Date",
											"value": "Fri, 31 Aug 2018 23:36:03 GMT",
											"name": "Date",
											"description": "The date and time that the message was sent"
										},
										{
											"key": "Expires",
											"value": "0",
											"name": "Expires",
											"description": "Gives the date/time after which the response is considered stale"
										},
										{
											"key": "Pragma",
											"value": "no-cache",
											"name": "Pragma",
											"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=31536000 ; includeSubDomains",
											"name": "Strict-Transport-Security",
											"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff",
											"name": "X-Content-Type-Options",
											"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
										},
										{
											"key": "X-Frame-Options",
											"value": "DENY",
											"name": "X-Frame-Options",
											"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
										},
										{
											"key": "X-XSS-Protection",
											"value": "1; mode=block",
											"name": "X-XSS-Protection",
											"description": "Cross-site scripting (XSS) filter"
										},
										{
											"key": "transfer-encoding",
											"value": "chunked",
											"name": "transfer-encoding",
											"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
										},
										{
											"key": "x-fapi-interaction-id",
											"value": "7305617a-e2aa-4982-b0f1-b9e8785c27e8",
											"name": "x-fapi-interaction-id",
											"description": "Custom header"
										}
									],
									"cookie": [
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "01",
											"key": "amlbcookie"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
											"key": "iPlanetDirectoryPro"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": true,
											"domain": "service.directory.ob.forgerock.financial",
											"path": "/",
											"secure": true,
											"value": "3D38B8B43B83F1717764257969032244",
											"key": "JSESSIONID"
										}
									],
									"body": "{\"id\":\"5b7c5b03b093460b5c268d90\",\"name\":\"Postman\",\"mode\":\"TEST\",\"roles\":[\"PISP\",\"AISP\"],\"status\":\"ACTIVE\",\"redirectUris\":[],\"applicationId\":\"5b7c5b04b09346546afb8fd5\"}"
								}
							]
						},
						{
							"name": "Generate SSA",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "559c0d82-b25f-4b83-9dbd-5209ed97f07f",
										"exec": [
											"postman.setEnvironmentVariable(\"SSA_JWT\", responseBody);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": "{{MATLS_DIRECTORY}}/api/software-statement/current/ssa"
							},
							"response": [
								{
									"name": "Generate SSA",
									"originalRequest": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": "{{DIRECTORY}}/api/software-statement/current/ssa"
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "plain",
									"header": [
										{
											"key": "Cache-Control",
											"value": "no-cache, no-store, max-age=0, must-revalidate",
											"name": "Cache-Control",
											"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
										},
										{
											"key": "Content-Length",
											"value": "1390",
											"name": "Content-Length",
											"description": "The length of the response body in octets (8-bit bytes)"
										},
										{
											"key": "Content-Type",
											"value": "text/plain;charset=UTF-8",
											"name": "Content-Type",
											"description": "The mime type of this content"
										},
										{
											"key": "Date",
											"value": "Fri, 31 Aug 2018 23:36:07 GMT",
											"name": "Date",
											"description": "The date and time that the message was sent"
										},
										{
											"key": "Expires",
											"value": "0",
											"name": "Expires",
											"description": "Gives the date/time after which the response is considered stale"
										},
										{
											"key": "Pragma",
											"value": "no-cache",
											"name": "Pragma",
											"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=31536000 ; includeSubDomains",
											"name": "Strict-Transport-Security",
											"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff",
											"name": "X-Content-Type-Options",
											"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
										},
										{
											"key": "X-Frame-Options",
											"value": "DENY",
											"name": "X-Frame-Options",
											"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
										},
										{
											"key": "X-XSS-Protection",
											"value": "1; mode=block",
											"name": "X-XSS-Protection",
											"description": "Cross-site scripting (XSS) filter"
										},
										{
											"key": "x-fapi-interaction-id",
											"value": "9caf7d52-2a7f-45d8-92aa-22fd033b0e8b",
											"name": "x-fapi-interaction-id",
											"description": "Custom header"
										}
									],
									"cookie": [
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "01",
											"key": "amlbcookie"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
											"key": "iPlanetDirectoryPro"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": true,
											"domain": "service.directory.ob.forgerock.financial",
											"path": "/",
											"secure": true,
											"value": "3D38B8B43B83F1717764257969032244",
											"key": "JSESSIONID"
										}
									],
									"body": "eyJraWQiOiI0ZjgxOTJhMi1hZTc0LTQ2ZWMtYTU5MC0zMjAwODNhNDA3ZmYiLCJhbGciOiJSUzI1NiJ9.eyJvcmdfandrc19lbmRwb2ludCI6IlRPRE8iLCJzb2Z0d2FyZV9tb2RlIjoiVEVTVCIsInNvZnR3YXJlX3JlZGlyZWN0X3VyaXMiOltdLCJvcmdfc3RhdHVzIjoiQWN0aXZlIiwic29mdHdhcmVfY2xpZW50X25hbWUiOiJQb3N0bWFuIiwic29mdHdhcmVfY2xpZW50X2lkIjoiNWI3YzViMDNiMDkzNDYwYjVjMjY4ZDkwIiwiaXNzIjoiRm9yZ2VSb2NrIiwic29mdHdhcmVfandrc19lbmRwb2ludCI6Imh0dHBzOlwvXC9zZXJ2aWNlLmRpcmVjdG9yeS5vYi5mb3JnZXJvY2suZmluYW5jaWFsXC9hcGlcL3NvZnR3YXJlLXN0YXRlbWVudFwvNWI3YzViMDNiMDkzNDYwYjVjMjY4ZDkwXC9hcHBsaWNhdGlvblwvandrX3VyaSIsInNvZnR3YXJlX2lkIjoiNWI3YzViMDNiMDkzNDYwYjVjMjY4ZDkwIiwib3JnX2NvbnRhY3RzIjpbXSwib2JfcmVnaXN0cnlfdG9zIjoiaHR0cHM6XC9cL2RpcmVjdG9yeS5vYi5mb3JnZXJvY2suZmluYW5jaWFsXC90b3NcLyIsIm9yZ19pZCI6IjViMDU5YTgxYjA5MzQ2NWYwZWU4NTcxNCIsInNvZnR3YXJlX2p3a3NfcmV2b2tlZF9lbmRwb2ludCI6IlRPRE8iLCJzb2Z0d2FyZV9yb2xlcyI6WyJQSVNQIiwiQUlTUCJdLCJleHAiOjE1MzYzNjMzNjcsIm9yZ19uYW1lIjoiUXVlbnRpbiIsIm9yZ19qd2tzX3Jldm9rZWRfZW5kcG9pbnQiOiJUT0RPIiwiaWF0IjoxNTM1NzU4NTY3LCJqdGkiOiJmZDMzZjhkYS03MjA2LTQ0MzctYjI5Mi0zNjE2N2RlMGFmOGYifQ.ohoGb9laTDChrCjaj39TVtxI1ziMQomtbZ6_7FFX1P18E5wonZzIO-SgHysu6NXaDAwZJ8YzCEBW4BELYMt8CKgKfHm9opJIzhXOY4xhzudFPvXfRzMqwJb1AfJ4XP_hQlXlFZTswBaAPwBZsu9qG3jo7k-eqSC9OlHJaYyoVHtZnbkiwsC0ZgwYcQUNa97fy2gpbF0NvfDxULx9IUlaYqapNA43rV_Nzo9us_vfIE_qurCYf4SHaVZmV76fS1nFtUxMoYCet9d_AFFwvM_OR1cMNILetx6mhuc17G5hOuSm0PNT4XtZldPIgrcBdZy6FWUOyTmhyDuzLsZTXtkEjA"
								}
							]
						},
						{
							"name": "Generate registration JWT",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "eae19b9b-f068-499a-9783-72b58a8a2ca2",
										"exec": [
											"postman.setEnvironmentVariable('exp',(new Date().getTime() / 1000) + 60*5);",
											"var SSA_JWT_SERIALISED = \"\\\"\" + pm.variables.get('SSA_JWT') + \"\\\"\";",
											"console.log(SSA_JWT_SERIALISED);",
											"postman.setEnvironmentVariable('SSA_JWT_SERIALISED', SSA_JWT_SERIALISED);",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "f9277393-470b-474a-a3ce-00cf6cb1f1ef",
										"exec": [
											"postman.setEnvironmentVariable(\"dynamic_registration_request\", responseBody);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "issuerId",
										"value": "{{software_statement_id}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"exp\": {{exp}},\n  \"scope\": \"openid accounts payments\",\n  \"response_types\": [\n    \"code id_token\"\n  ],\n  \"redirect_uris\": [\n    \"https://www.google.com\"\n  ],\n  \"application_type\": \"web\",\n  \"grant_types\": [\n    \"authorization_code\",\n    \"refresh_token\",\n    \"client_credentials\"\n  ],\n  \"software_statement\": \"{{SSA_JWT}}\",\n  \"token_endpoint_auth_method\": \"private_key_jwt\",\n  \"token_endpoint_auth_signing_alg\": \"PS256\",\n  \"id_token_signed_response_alg\": \"PS256\",\n  \"request_object_signing_alg\": \"PS256\",\n  \"request_object_encryption_alg\": \"RSA-OAEP-256\",\n  \"request_object_encryption_enc\": \"A128CBC-HS256\"\n}"
								},
								"url": "{{JWKMS}}/api/crypto/signClaims"
							},
							"response": [
								{
									"name": "Generate registration JWT",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											},
											{
												"key": "issuerId",
												"value": "{{software_statement_id}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"exp\": {{exp}},\n  \"scope\": \"openid accounts payments\",\n  \"redirect_uris\": [\n    \"https://www.google.co.uk/\"\n  ],\n  \"grant_types\": [\n    \"authorization_code\",\n    \"refresh_token\",\n    \"client_credentials\"\n  ],\n  \"response_types\": [\n    \"code id_token\"\n  ],\n  \"software_statement\": \"{{SSA_JWT}}\",\n  \"token_endpoint_auth_method\": \"private_key_jwt\",\n  \"token_endpoint_auth_signing_alg\": \"RS256\",\n  \"id_token_signed_response_alg\": \"RS256\",\n  \"request_object_signing_alg\": \"RS256\",\n  \"request_object_encryption_alg\": \"RSA-OAEP-256\",\n  \"request_object_encryption_enc\": \"A128CBC-HS256\"\n}"
										},
										"url": "{{JWKMS}}/api/crypto/signClaims"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "plain",
									"header": [
										{
											"key": "Cache-Control",
											"value": "no-cache, no-store, max-age=0, must-revalidate",
											"name": "Cache-Control",
											"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
										},
										{
											"key": "Content-Length",
											"value": "3064",
											"name": "Content-Length",
											"description": "The length of the response body in octets (8-bit bytes)"
										},
										{
											"key": "Content-Type",
											"value": "text/plain;charset=UTF-8",
											"name": "Content-Type",
											"description": "The mime type of this content"
										},
										{
											"key": "Date",
											"value": "Fri, 31 Aug 2018 23:36:09 GMT",
											"name": "Date",
											"description": "The date and time that the message was sent"
										},
										{
											"key": "Expires",
											"value": "0",
											"name": "Expires",
											"description": "Gives the date/time after which the response is considered stale"
										},
										{
											"key": "Pragma",
											"value": "no-cache",
											"name": "Pragma",
											"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=31536000 ; includeSubDomains",
											"name": "Strict-Transport-Security",
											"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff",
											"name": "X-Content-Type-Options",
											"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
										},
										{
											"key": "X-Frame-Options",
											"value": "DENY",
											"name": "X-Frame-Options",
											"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
										},
										{
											"key": "X-XSS-Protection",
											"value": "1; mode=block",
											"name": "X-XSS-Protection",
											"description": "Cross-site scripting (XSS) filter"
										},
										{
											"key": "x-fapi-interaction-id",
											"value": "0480f296-77f6-47fe-8602-397b2b9c59f4",
											"name": "x-fapi-interaction-id",
											"description": "Custom header"
										}
									],
									"cookie": [
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "01",
											"key": "amlbcookie"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
											"key": "iPlanetDirectoryPro"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": true,
											"domain": "jwkms.ob.forgerock.financial",
											"path": "/",
											"secure": true,
											"value": "C1841FA66D4D02E37604752448B582F9",
											"key": "JSESSIONID"
										}
									],
									"body": "eyJraWQiOiIwNzIyMjMwYy0zMjMyLTQ3MjUtODY0Yy01Njg4NDQ5YmM3ZjYiLCJhbGciOiJSUzI1NiJ9.eyJ0b2tlbl9lbmRwb2ludF9hdXRoX3NpZ25pbmdfYWxnIjoiUlMyNTYiLCJyZXF1ZXN0X29iamVjdF9lbmNyeXB0aW9uX2FsZyI6IlJTQS1PQUVQLTI1NiIsImdyYW50X3R5cGVzIjpbImF1dGhvcml6YXRpb25fY29kZSIsInJlZnJlc2hfdG9rZW4iLCJjbGllbnRfY3JlZGVudGlhbHMiXSwiaXNzIjoiNWI3YzViMDNiMDkzNDYwYjVjMjY4ZDkwIiwicmVkaXJlY3RfdXJpcyI6WyJodHRwczpcL1wvd3d3Lmdvb2dsZS5jby51a1wvIl0sInRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kIjoicHJpdmF0ZV9rZXlfand0Iiwic29mdHdhcmVfc3RhdGVtZW50IjoiZXlKcmFXUWlPaUkwWmpneE9USmhNaTFoWlRjMExUUTJaV010WVRVNU1DMHpNakF3T0ROaE5EQTNabVlpTENKaGJHY2lPaUpTVXpJMU5pSjkuZXlKdmNtZGZhbmRyYzE5bGJtUndiMmx1ZENJNklsUlBSRThpTENKemIyWjBkMkZ5WlY5dGIyUmxJam9pVkVWVFZDSXNJbk52Wm5SM1lYSmxYM0psWkdseVpXTjBYM1Z5YVhNaU9sdGRMQ0p2Y21kZmMzUmhkSFZ6SWpvaVFXTjBhWFpsSWl3aWMyOW1kSGRoY21WZlkyeHBaVzUwWDI1aGJXVWlPaUpRYjNOMGJXRnVJaXdpYzI5bWRIZGhjbVZmWTJ4cFpXNTBYMmxrSWpvaU5XSTNZelZpTUROaU1Ea3pORFl3WWpWak1qWTRaRGt3SWl3aWFYTnpJam9pUm05eVoyVlNiMk5ySWl3aWMyOW1kSGRoY21WZmFuZHJjMTlsYm1Sd2IybHVkQ0k2SW1oMGRIQnpPbHd2WEM5elpYSjJhV05sTG1ScGNtVmpkRzl5ZVM1dllpNW1iM0puWlhKdlkyc3VabWx1WVc1amFXRnNYQzloY0dsY0wzTnZablIzWVhKbExYTjBZWFJsYldWdWRGd3ZOV0kzWXpWaU1ETmlNRGt6TkRZd1lqVmpNalk0WkRrd1hDOWhjSEJzYVdOaGRHbHZibHd2YW5kclgzVnlhU0lzSW5OdlpuUjNZWEpsWDJsa0lqb2lOV0kzWXpWaU1ETmlNRGt6TkRZd1lqVmpNalk0WkRrd0lpd2liM0puWDJOdmJuUmhZM1J6SWpwYlhTd2liMkpmY21WbmFYTjBjbmxmZEc5eklqb2lhSFIwY0hNNlhDOWNMMlJwY21WamRHOXllUzV2WWk1bWIzSm5aWEp2WTJzdVptbHVZVzVqYVdGc1hDOTBiM05jTHlJc0ltOXlaMTlwWkNJNklqVmlNRFU1WVRneFlqQTVNelEyTldZd1pXVTROVGN4TkNJc0luTnZablIzWVhKbFgycDNhM05mY21WMmIydGxaRjlsYm1Sd2IybHVkQ0k2SWxSUFJFOGlMQ0p6YjJaMGQyRnlaVjl5YjJ4bGN5STZXeUpRU1ZOUUlpd2lRVWxUVUNKZExDSmxlSEFpT2pFMU16WXpOak16Tmpjc0ltOXlaMTl1WVcxbElqb2lVWFZsYm5ScGJpSXNJbTl5WjE5cWQydHpYM0psZG05clpXUmZaVzVrY0c5cGJuUWlPaUpVVDBSUElpd2lhV0YwSWpveE5UTTFOelU0TlRZM0xDSnFkR2tpT2lKbVpETXpaamhrWVMwM01qQTJMVFEwTXpjdFlqSTVNaTB6TmpFMk4yUmxNR0ZtT0dZaWZRLm9ob0diOWxhVERDaHJDamFqMzlUVnR4STF6aU1Rb210Ylo2XzdGRlgxUDE4RTV3b25aeklPLVNnSHlzdTZOWGFEQXdaSjhZekNFQlc0QkVMWU10OENLZ0tmSG05b3BKSXpoWE9ZNHhoenVkRlB2WGZSek1xd0piMUFmSjRYUF9oUWxYbEZaVHN3QmFBUHdCWnN1OXFHM2pvN2stZXFTQzlPbEhKYVl5b1ZIdFpuYmtpd3NDMFpnd1ljUVVOYTk3ZnkyZ3BiRjBOdmZEeFVMeDlJVWxhWXFhcE5BNDNyVl9Oem85dXNfdmZJRV9xdXJDWWY0U0hhVlptVjc2ZlMxbkZ0VXhNb1lDZXQ5ZF9BRkZ3dk1fT1IxY01OSUxldHg2bWh1YzE3RzVoT3VTbTBQTlQ0WHRabGRQSWdyY0JkWnk2RldVT3lUbWh5RHV6THNaVFh0a0VqQSIsInNjb3BlIjoib3BlbmlkIGFjY291bnRzIHBheW1lbnRzIiwicmVxdWVzdF9vYmplY3Rfc2lnbmluZ19hbGciOiJSUzI1NiIsImV4cCI6MTUzNTc1ODg2OSwicmVxdWVzdF9vYmplY3RfZW5jcnlwdGlvbl9lbmMiOiJBMTI4Q0JDLUhTMjU2IiwiaWF0IjoxNTM1NzU4NTY5LCJqdGkiOiIwYTE3NzhhNi0xY2UxLTQxYmEtOGQ1Mi1jNTlkMmJhNDQ0ZTUiLCJyZXNwb25zZV90eXBlcyI6WyJjb2RlIGlkX3Rva2VuIl0sImlkX3Rva2VuX3NpZ25lZF9yZXNwb25zZV9hbGciOiJSUzI1NiJ9.Qord0WU6X6fli1lsL4v7ArlMg88IlxX7QhcrLZrF8bQFFwF4BFFwSMJlEsVJni-AjYILh6nPYq6cHLkdpr7bRqA5_mOI_RVLHyG-i3OUcofQQj2zV5SntCtaJOb0WpUIPQXlgklve1R-vkScPEBgLhqEc4hBnO7OQNz1Rv0P143izgMhyitHruCmskeEncTs-wjKAaGtvns_iBFPqJnkqfQLBVs-GrbsVCR1KjiWTJ4Fq3K6CGO_pPwOZmXrdt8AJi6yajPMYy4XfnWZVocyrImBrttUQ29_ngcJD0kYJRWMvOoZ1op3IWRGsfg3sQAXaTv1tuC3HNoIJQqpzF-oqA"
								}
							]
						},
						{
							"name": "TPP Dynamic Registration",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "56610a18-97db-476f-8ab4-8f5d9d0379b8",
										"exec": [
											"postman.setEnvironmentVariable('exp',(new Date().getTime() / 1000) + 60*5);",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "164bbdbb-18fb-4fea-805f-8090c1931646",
										"exec": [
											"if (pm.expect(responseBody).not.eql(undefined)){",
											"    var data = JSON.parse(responseBody);",
											"    if (data.client_id !== null){",
											"        pm.environment.set(\"CLIENT_ID\", data.client_id);",
											"        pm.environment.set(\"CLIENT_SECRET\", data.client_secret);",
											"        pm.environment.set(\"CLIENT_REDIRECT_URI\", data.redirect_uris);",
											"    }",
											"}",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/jwt"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{{dynamic_registration_request}}"
								},
								"url": "{{ASPSP_REGISTRATION_ENDPOINT}}"
							},
							"response": [
								{
									"name": "Dynamic Registration",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/jwt"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{{dynamic_registration_request}}"
										},
										"url": "{{ASPSP_REGISTRATION_ENDPOINT}}"
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Cache-Control",
											"value": "no-cache, no-store, max-age=0, must-revalidate",
											"name": "Cache-Control",
											"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
										},
										{
											"key": "Content-Type",
											"value": "application/json;charset=utf-8",
											"name": "Content-Type",
											"description": "The mime type of this content"
										},
										{
											"key": "Date",
											"value": "Fri, 31 Aug 2018 23:36:15 GMT",
											"name": "Date",
											"description": "The date and time that the message was sent"
										},
										{
											"key": "Expires",
											"value": "0",
											"name": "Expires",
											"description": "Gives the date/time after which the response is considered stale"
										},
										{
											"key": "Pragma",
											"value": "no-cache",
											"name": "Pragma",
											"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=31536000 ; includeSubDomains",
											"name": "Strict-Transport-Security",
											"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff",
											"name": "X-Content-Type-Options",
											"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
										},
										{
											"key": "X-Frame-Options",
											"value": "DENY",
											"name": "X-Frame-Options",
											"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
										},
										{
											"key": "X-XSS-Protection",
											"value": "1; mode=block",
											"name": "X-XSS-Protection",
											"description": "Cross-site scripting (XSS) filter"
										},
										{
											"key": "transfer-encoding",
											"value": "chunked",
											"name": "transfer-encoding",
											"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
										},
										{
											"key": "x-fapi-interaction-id",
											"value": "92d8d979-726c-4f62-8070-fc6b5b44db39",
											"name": "x-fapi-interaction-id",
											"description": "Custom header"
										}
									],
									"cookie": [
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "01",
											"key": "amlbcookie"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": false,
											"domain": "ob.forgerock.financial",
											"path": "/",
											"secure": false,
											"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
											"key": "iPlanetDirectoryPro"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": true,
											"domain": "rs.aspsp.ob.forgerock.financial",
											"path": "/v1.1",
											"secure": true,
											"value": "34F0FF6ADBE51B4332018415EB8726BF",
											"key": "JSESSIONID"
										},
										{
											"expires": "Invalid Date",
											"httpOnly": true,
											"domain": "rs.aspsp.ob.forgerock.financial",
											"path": "/",
											"secure": true,
											"value": "B165242A9E44929BEB0404056A48E34D",
											"key": "JSESSIONID"
										}
									],
									"body": "{\"scopes\":[\"openid\",\"payments\",\"accounts\"],\"scope\":\"openid payments accounts\",\"redirect_uris\":[\"https://www.google.co.uk/\"],\"response_types\":[\"code id_token\"],\"application_type\":\"web\",\"client_name\":\"Postman\",\"jwks_uri\":\"https://service.directory.ob.forgerock.financial/api/software-statement/5b7c5b03b093460b5c268d90/application/jwk_uri\",\"subject_type\":\"public\",\"id_token_signed_response_alg\":\"RS256\",\"id_token_encrypted_response_alg\":\"RSA1_5\",\"id_token_encrypted_response_enc\":\"A128CBC_HS256\",\"userinfo_signed_response_alg\":\"\",\"userinfo_encrypted_response_alg\":\"\",\"request_object_signing_alg\":\"RS256\",\"request_object_encryption_alg\":\"RSA-OAEP-256\",\"request_object_encryption_enc\":\"A128CBC-HS256\",\"token_endpoint_auth_method\":\"private_key_jwt\",\"token_endpoint_auth_signing_alg\":\"RS256\",\"default_max_age\":\"1\",\"software_statement\":\"eyJraWQiOiI0ZjgxOTJhMi1hZTc0LTQ2ZWMtYTU5MC0zMjAwODNhNDA3ZmYiLCJhbGciOiJSUzI1NiJ9.eyJvcmdfandrc19lbmRwb2ludCI6IlRPRE8iLCJzb2Z0d2FyZV9tb2RlIjoiVEVTVCIsInNvZnR3YXJlX3JlZGlyZWN0X3VyaXMiOltdLCJvcmdfc3RhdHVzIjoiQWN0aXZlIiwic29mdHdhcmVfY2xpZW50X25hbWUiOiJQb3N0bWFuIiwic29mdHdhcmVfY2xpZW50X2lkIjoiNWI3YzViMDNiMDkzNDYwYjVjMjY4ZDkwIiwiaXNzIjoiRm9yZ2VSb2NrIiwic29mdHdhcmVfandrc19lbmRwb2ludCI6Imh0dHBzOlwvXC9zZXJ2aWNlLmRpcmVjdG9yeS5vYi5mb3JnZXJvY2suZmluYW5jaWFsXC9hcGlcL3NvZnR3YXJlLXN0YXRlbWVudFwvNWI3YzViMDNiMDkzNDYwYjVjMjY4ZDkwXC9hcHBsaWNhdGlvblwvandrX3VyaSIsInNvZnR3YXJlX2lkIjoiNWI3YzViMDNiMDkzNDYwYjVjMjY4ZDkwIiwib3JnX2NvbnRhY3RzIjpbXSwib2JfcmVnaXN0cnlfdG9zIjoiaHR0cHM6XC9cL2RpcmVjdG9yeS5vYi5mb3JnZXJvY2suZmluYW5jaWFsXC90b3NcLyIsIm9yZ19pZCI6IjViMDU5YTgxYjA5MzQ2NWYwZWU4NTcxNCIsInNvZnR3YXJlX2p3a3NfcmV2b2tlZF9lbmRwb2ludCI6IlRPRE8iLCJzb2Z0d2FyZV9yb2xlcyI6WyJQSVNQIiwiQUlTUCJdLCJleHAiOjE1MzYzNjMzNjcsIm9yZ19uYW1lIjoiUXVlbnRpbiIsIm9yZ19qd2tzX3Jldm9rZWRfZW5kcG9pbnQiOiJUT0RPIiwiaWF0IjoxNTM1NzU4NTY3LCJqdGkiOiJmZDMzZjhkYS03MjA2LTQ0MzctYjI5Mi0zNjE2N2RlMGFmOGYifQ.ohoGb9laTDChrCjaj39TVtxI1ziMQomtbZ6_7FFX1P18E5wonZzIO-SgHysu6NXaDAwZJ8YzCEBW4BELYMt8CKgKfHm9opJIzhXOY4xhzudFPvXfRzMqwJb1AfJ4XP_hQlXlFZTswBaAPwBZsu9qG3jo7k-eqSC9OlHJaYyoVHtZnbkiwsC0ZgwYcQUNa97fy2gpbF0NvfDxULx9IUlaYqapNA43rV_Nzo9us_vfIE_qurCYf4SHaVZmV76fS1nFtUxMoYCet9d_AFFwvM_OR1cMNILetx6mhuc17G5hOuSm0PNT4XtZldPIgrcBdZy6FWUOyTmhyDuzLsZTXtkEjA\",\"client_id\":\"91c3c517-9db6-417e-8b05-8b1188f7a2d6\",\"client_secret\":\"9f9169e8-9df7-4f95-9c5c-8d760afb0d97\",\"registration_access_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiI5MWMzYzUxNy05ZGI2LTQxN2UtOGIwNS04YjExODhmN2EyZDYiLCJhdWRpdFRyYWNraW5nSWQiOiI3YzFjM2NhNi1iMDM5LTRiZDMtOGZiMi01NTU0YzE0M2E2OTIiLCJpc3MiOiJudWxsOi8vbnVsbC9vYXV0aDIvb3BlbmJhbmtpbmciLCJ0b2tlbk5hbWUiOiJhY2Nlc3NfdG9rZW4iLCJ0b2tlbl90eXBlIjoiQmVhcmVyIiwiYXV0aEdyYW50SWQiOiIzMTI5YTBhMi1iOTM5LTRjNjMtOGE4NS03YjRjZjRmYmQxNzciLCJhdWQiOiI5MWMzYzUxNy05ZGI2LTQxN2UtOGIwNS04YjExODhmN2EyZDYiLCJuYmYiOjE1MzU3NTg1NzUsInNjb3BlIjpbXSwiYXV0aF90aW1lIjoxNTM1NzU4NTc1LCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTUzNTg0NDk3NSwiaWF0IjoxNTM1NzU4NTc1LCJleHBpcmVzX2luIjo4NjQwMCwianRpIjoiMGE4YmZjZDYtYzkyYy00MzU4LTk5ODktYTA2ZmY5NTc0OGY1In0.M-64aXen_Fdrq155dzEpfBY5HqFp3064-ZgLue7baCCgiQoQBLPjZeU8SAT0ctKi6KeM-vGPv3Em1Im9l65MOA\",\"registration_client_uri\":\"https://as.aspsp.ob.forgerock.financial/oauth2/register?client_id=91c3c517-9db6-417e-8b05-8b1188f7a2d6\",\"client_secret_expires_at\":\"0\"}"
								}
							]
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Accounts Flow",
					"item": [
						{
							"name": "Access Preparation",
							"item": [
								{
									"name": "Generate client credential JWT",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "c90257aa-5a63-417b-a52b-8fba1f8940b8",
												"exec": [
													"postman.setEnvironmentVariable('exp',(new Date().getTime() / 1000) + 60*5);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "27cc64a4-1ac3-4b9d-9b91-64dcba6c0663",
												"exec": [
													"postman.setEnvironmentVariable(\"client_credential_jwt\", responseBody);",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											},
											{
												"key": "issuerId",
												"value": "{{CLIENT_ID}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"sub\": \"{{CLIENT_ID}}\",\n  \"exp\": {{exp}},\n  \"aud\": \"{{AS_ISSUER_ID}}\"\n}"
										},
										"url": "{{JWKMS}}/api/crypto/signClaims"
									},
									"response": [
										{
											"name": "Generate client credential JWT",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json"
													},
													{
														"key": "issuerId",
														"value": "{{CLIENT_ID}}"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"sub\": \"{{CLIENT_ID}}\",\n  \"exp\": {{exp}},\n  \"aud\": \"{{AS_ISSUER_ID}}\"\n}\n"
												},
												"url": "{{JWKMS}}/api/crypto/signClaims"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "plain",
											"header": [
												{
													"key": "Cache-Control",
													"value": "no-cache, no-store, max-age=0, must-revalidate",
													"name": "Cache-Control",
													"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
												},
												{
													"key": "Content-Length",
													"value": "754",
													"name": "Content-Length",
													"description": "The length of the response body in octets (8-bit bytes)"
												},
												{
													"key": "Content-Type",
													"value": "text/plain;charset=UTF-8",
													"name": "Content-Type",
													"description": "The mime type of this content"
												},
												{
													"key": "Date",
													"value": "Fri, 31 Aug 2018 23:36:18 GMT",
													"name": "Date",
													"description": "The date and time that the message was sent"
												},
												{
													"key": "Expires",
													"value": "0",
													"name": "Expires",
													"description": "Gives the date/time after which the response is considered stale"
												},
												{
													"key": "Pragma",
													"value": "no-cache",
													"name": "Pragma",
													"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
												},
												{
													"key": "Strict-Transport-Security",
													"value": "max-age=31536000 ; includeSubDomains",
													"name": "Strict-Transport-Security",
													"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
												},
												{
													"key": "X-Content-Type-Options",
													"value": "nosniff",
													"name": "X-Content-Type-Options",
													"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
												},
												{
													"key": "X-Frame-Options",
													"value": "DENY",
													"name": "X-Frame-Options",
													"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
												},
												{
													"key": "X-XSS-Protection",
													"value": "1; mode=block",
													"name": "X-XSS-Protection",
													"description": "Cross-site scripting (XSS) filter"
												},
												{
													"key": "x-fapi-interaction-id",
													"value": "363428fd-fc40-46a2-9c94-8a0fa0ce689c",
													"name": "x-fapi-interaction-id",
													"description": "Custom header"
												}
											],
											"cookie": [
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "01",
													"key": "amlbcookie"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
													"key": "iPlanetDirectoryPro"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": true,
													"domain": "jwkms.ob.forgerock.financial",
													"path": "/",
													"secure": true,
													"value": "C1841FA66D4D02E37604752448B582F9",
													"key": "JSESSIONID"
												}
											],
											"body": "eyJraWQiOiIwNzIyMjMwYy0zMjMyLTQ3MjUtODY0Yy01Njg4NDQ5YmM3ZjYiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI5MWMzYzUxNy05ZGI2LTQxN2UtOGIwNS04YjExODhmN2EyZDYiLCJhdWQiOiJodHRwczpcL1wvbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbFwvb2F1dGgyXC9vcGVuYmFua2luZyIsImlzcyI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImV4cCI6MTUzNTc1ODg3OCwiaWF0IjoxNTM1NzU4NTc4LCJqdGkiOiJkMTFlMDg3Ni01ZjQxLTQwNjUtYWQwMi1mMzYxNGU5ZjllY2IifQ.f8OT4Q-pRcTAzqkfQJ7QWCPznTCqUUpWwTzAtevD53Bc8kdfAEQi4pQtJmHDd8_eH4vX_ebWzvT7rVcW3H0dcJ3Ju_ugKYtskYaDdy-E5RU4425N5JMj9pTwT0RcPPKfpHL9SUTgVLYeeHwTvKi812RVhHzawrhE6TpHzO6lYpPIueqRjY0B_INbYt3rSb_EHoFsm_RelaMEwzuRqqhZfwbtZJxYiPRFNm5NlK9E7SXtc1669oAt7E8UbV5XOWELGVfhgUWXuUuT882mFz7th5gkhKGo5q-QWNOE1Swy9Hiq-HLqDmNfXle97nWX1r7fyKJ_E_GoLqxVMWzpmVky7Q"
										}
									]
								},
								{
									"name": "OpenAM-OAuth2-ClientCredentials",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e594f64b-04b0-4fcb-aa0b-c84d6b034808",
												"exec": [
													"var data = JSON.parse(responseBody);",
													"",
													"postman.setEnvironmentVariable(\"access_token\", data.access_token);",
													"postman.setEnvironmentVariable(\"id_token\", data.id_token);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/x-www-form-urlencoded"
											},
											{
												"key": "cnf_key",
												"value": "eyJ4NXQjUzI1NiI6Im04VWNXQlNQTnRhS04xOVRkUjh6VUh2V1dPU0NTWDluc2E1dlU2ZnNjZDAifQ==",
												"type": "text",
												"disabled": true
											}
										],
										"body": {
											"mode": "urlencoded",
											"urlencoded": [
												{
													"key": "grant_type",
													"value": "client_credentials",
													"type": "text"
												},
												{
													"key": "scope",
													"value": "accounts",
													"type": "text"
												},
												{
													"key": "client_assertion_type",
													"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
													"type": "text"
												},
												{
													"key": "client_assertion",
													"value": "{{client_credential_jwt}}",
													"type": "text"
												},
												{
													"key": "cnf_key",
													"value": "eyJ4NXQjUzI1NiI6Im04VWNXQlNQTnRhS04xOVRkUjh6VUh2V1dPU0NTWDluc2E1dlU2ZnNjZDAifQ==",
													"type": "text",
													"disabled": true
												}
											]
										},
										"url": "{{AS_token_endpoint}}"
									},
									"response": [
										{
											"name": "Client credential",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "grant_type",
															"value": "client_credentials",
															"type": "text"
														},
														{
															"key": "scope",
															"value": "openid accounts payments",
															"type": "text"
														},
														{
															"key": "client_assertion_type",
															"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
															"type": "text"
														},
														{
															"key": "client_assertion",
															"value": "{{client_credential_jwt}}",
															"type": "text"
														}
													]
												},
												"url": "{{AS_token_endpoint}}"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Accept-Ranges",
													"value": "bytes",
													"name": "Accept-Ranges",
													"description": "Content-Types that are acceptable"
												},
												{
													"key": "Cache-Control",
													"value": "no-store",
													"name": "Cache-Control",
													"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
												},
												{
													"key": "Content-Type",
													"value": "application/json",
													"name": "Content-Type",
													"description": "The mime type of this content"
												},
												{
													"key": "Date",
													"value": "Fri, 31 Aug 2018 23:36:21 GMT",
													"name": "Date",
													"description": "The date and time that the message was sent"
												},
												{
													"key": "Pragma",
													"value": "no-cache",
													"name": "Pragma",
													"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
												},
												{
													"key": "Server",
													"value": "Restlet-Framework/2.3.4",
													"name": "Server",
													"description": "A name for the server"
												},
												{
													"key": "Strict-Transport-Security",
													"value": "max-age=31536000; includeSubdomains; preload",
													"name": "Strict-Transport-Security",
													"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
												},
												{
													"key": "Vary",
													"value": "Accept-Charset, Accept-Encoding, Accept-Language, Accept",
													"name": "Vary",
													"description": "Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server."
												},
												{
													"key": "X-Content-Type-Options",
													"value": "nosniff",
													"name": "X-Content-Type-Options",
													"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
												},
												{
													"key": "X-Frame-Options",
													"value": "DENY",
													"name": "X-Frame-Options",
													"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
												},
												{
													"key": "transfer-encoding",
													"value": "chunked",
													"name": "transfer-encoding",
													"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
												},
												{
													"key": "x-fapi-interaction-id",
													"value": "34e999b0-8754-4952-9e7b-ddc137facc63",
													"name": "x-fapi-interaction-id",
													"description": "Custom header"
												}
											],
											"cookie": [
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "01",
													"key": "amlbcookie"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
													"key": "iPlanetDirectoryPro"
												}
											],
											"body": "{\"access_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiI5MWMzYzUxNy05ZGI2LTQxN2UtOGIwNS04YjExODhmN2EyZDYiLCJhdWRpdFRyYWNraW5nSWQiOiIyMjMxYmMyOS00MjBkLTRlM2QtYjEwNC00ZDBjMDNlNGIyM2MiLCJpc3MiOiJodHRwczovL21hdGxzLmFzLmFzcHNwLm9iLmZvcmdlcm9jay5maW5hbmNpYWwvb2F1dGgyL29wZW5iYW5raW5nIiwidG9rZW5OYW1lIjoiYWNjZXNzX3Rva2VuIiwidG9rZW5fdHlwZSI6IkJlYXJlciIsImF1dGhHcmFudElkIjoiZjIyOTEyM2UtMDM5Yi00M2YxLThjOTctYmM0YWJkNmI0OWE5IiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwibmJmIjoxNTM1NzU4NTgxLCJncmFudF90eXBlIjoiY2xpZW50X2NyZWRlbnRpYWxzIiwic2NvcGUiOlsib3BlbmlkIiwicGF5bWVudHMiLCJhY2NvdW50cyJdLCJhdXRoX3RpbWUiOjE1MzU3NTg1ODEsInJlYWxtIjoiL29wZW5iYW5raW5nIiwiZXhwIjoxNTM1ODQ0OTgxLCJpYXQiOjE1MzU3NTg1ODEsImV4cGlyZXNfaW4iOjg2NDAwLCJqdGkiOiIwMWJiYmI3OS1kNTM2LTQ0ODMtYjkyMi1jMDk0NDdlMDc1MjcifQ.XUCjoPXgzZjfsy8mwFTAvsTPE9UZZ15YxTK3K4aQQDkTTIKJdjG6b1t899qtPE5ACOhHneGhoOLIPdqXf361lQ\",\"scope\":\"openid payments accounts\",\"id_token\":\"eyJ0eXAiOiJKV1QiLCJraWQiOiJiL082T3ZWdjEreStXZ3JINVVpOVdUaW9MdDA9IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoiR3FGWDl0X3N3OXFGQms0U0NMYmljZyIsInN1YiI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImF1ZGl0VHJhY2tpbmdJZCI6IjA5MDFlY2FmLWEwMDgtNDU3Mi04ZDg0LTMwYmRmYzQ1NGMxNi0zMTk1OTQ4IiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6ImlkX3Rva2VuIiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXpwIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXV0aF90aW1lIjoxNTM1NzU4NTgxLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTUzNTg0NDk4MSwidG9rZW5UeXBlIjoiSldUVG9rZW4iLCJpYXQiOjE1MzU3NTg1ODF9.jRmirrBixjkJ_eQa3qxXSdHAaX47b54x63Zjx2039cH4i2P24TYSFtIL8fyPxysESZKPq-vkMsYSQhaCZ8ZLIT8iEbkKBZo8OYa8THoqpMclgsK9y86umj7vY68HT2vmOQdJAfMEKhlTl0Vcye2j7M43rzjgA-3vP41YMnR2_0SYBJEOekpaZJpxcgJH4jAlGak7bmntZc36JHmWi_-uIifKKkeVsGIdGKNqWkFEuYsWcPhBY07Ka94KOFa8CNny_S5UMZYLRXa7OHjaKzu8h_-zL8h9iCrcYEL1nq-ajiNwouQRICSBQ7HE9pMaTBdPHHKRBOUihr1SfMnNM_6bAQ\",\"token_type\":\"Bearer\",\"expires_in\":86399}"
										}
									]
								},
								{
									"name": "Create Account Access Intent",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1f547ac9-c648-454b-95e4-592864ccff9a",
												"exec": [
													"var data = JSON.parse(responseBody);",
													"",
													"postman.setEnvironmentVariable(\"AccountIntentId\", data.Data.ConsentId);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "Accept",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "x-fapi-financial-id",
												"value": "{{x-fapi-financial-id}}",
												"type": "text"
											},
											{
												"key": "x-fapi-customer-last-logged-time",
												"value": "{{x-fapi-customer-last-logged-time}}",
												"type": "text"
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "{{x-fapi-customer-ip-address}}",
												"type": "text"
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{x-fapi-interaction-id}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"Data\": {\n    \"Permissions\": [\n      \"ReadAccountsDetail\",\n      \"ReadBalances\",\n      \"ReadTransactionsDetail\"\n    ],\n    \"ExpirationDateTime\": \"2019-08-01T00:00:00+00:00\",\n    \"TransactionFromDateTime\": \"2019-04-03T00:00:00+00:00\",\n    \"TransactionToDateTime\": \"2019-08-01T00:00:00+00:00\"\n  },\n  \"Risk\": {}\n}"
										},
										"url": "{{RS_CreateAccountAccessConsent_v3.1}}"
									},
									"response": []
								},
								{
									"name": "Get  Account Access Intent",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b2a9aecb-f67a-4394-9568-32134d36394f",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "Accept",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "x-fapi-financial-id",
												"type": "text",
												"value": "{{x-fapi-financial-id}}"
											},
											{
												"key": "x-fapi-customer-last-logged-time",
												"type": "text",
												"value": "{{x-fapi-customer-last-logged-time}}"
											},
											{
												"key": "x-fapi-customer-ip-address",
												"type": "text",
												"value": "{{x-fapi-customer-ip-address}}"
											},
											{
												"key": "x-fapi-interaction-id",
												"type": "text",
												"value": "{{x-fapi-interaction-id}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": "{{RS_GetAccountAccessConsent_v3.1}}"
									},
									"response": []
								},
								{
									"name": "Delete Account Access Intent",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8979b0fe-11b5-41be-ba2f-9c65451cfcbb",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "Accept",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "x-fapi-financial-id",
												"type": "text",
												"value": "{{x-fapi-financial-id}}"
											},
											{
												"key": "x-fapi-customer-last-logged-time",
												"type": "text",
												"value": "{{x-fapi-customer-last-logged-time}}"
											},
											{
												"key": "x-fapi-customer-ip-address",
												"type": "text",
												"value": "{{x-fapi-customer-ip-address}}"
											},
											{
												"key": "x-fapi-interaction-id",
												"type": "text",
												"value": "{{x-fapi-interaction-id}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": "{{RS_GetAccountAccessConsent_v3.1}}"
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Auth & Consent",
							"item": [
								{
									"name": "Generate Redirect URL - Visualize",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "468f00e9-545a-4c30-b576-a2dc70843aad",
												"exec": [
													"postman.setEnvironmentVariable('exp',(new Date().getTime() / 1000) + 60*30);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "db074c83-cbd1-4355-8cc8-5388da1b42a8",
												"exec": [
													"postman.setEnvironmentVariable(\"request_parameter\", responseBody);",
													"pm.visualizer.set(\"<a>\" +",
													"    pm.environment.get(\"AS_authorization_endpoint\") + ",
													"    \"?client_id=\" + pm.environment.get(\"CLIENT_ID\") + ",
													"    \"&response_type=code id_token&redirect_uri=\" + pm.environment.get(\"CLIENT_REDIRECT_URI\") + ",
													"    \"&scope=accounts openid&state=10d260bf-a7d9-444a-92d9-7b7a5f088208&nonce=10d260bf-a7d9-444a-92d9-7b7a5f088208&request=\" + ",
													"    pm.environment.get(\"request_parameter\") +",
													"    \"</a>\"",
													");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											},
											{
												"key": "jwkUri",
												"value": "{{AS_JWK_URI}}"
											},
											{
												"key": "issuerId",
												"value": "{{CLIENT_ID}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"aud\": \"{{AS_ISSUER_ID}}\",\n  \"scope\": \"openid accounts\",\n  \"iss\": \"{{CLIENT_ID}}\",\n  \"claims\": {\n    \"id_token\": {\n      \"acr\": {\n        \"value\": \"urn:openbanking:psd2:ca\",\n        \"essential\": true\n      },\n      \"openbanking_intent_id\": {\n        \"value\": \"{{AccountIntentId}}\",\n        \"essential\": true\n      }\n    }\n  },\n  \"response_type\": \"code id_token\",\n  \"redirect_uri\": \"{{CLIENT_REDIRECT_URI}}\",\n  \"state\": \"10d260bf-a7d9-444a-92d9-7b7a5f088208\",\n  \"exp\": {{exp}},\n  \"nonce\": \"10d260bf-a7d9-444a-92d9-7b7a5f088208\",\n  \"client_id\": \"{{CLIENT_ID}}\"\n}"
										},
										"url": "{{JWKMS}}/api/crypto/signClaims"
									},
									"response": [
										{
											"name": "Generate request parameter",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json"
													},
													{
														"key": "jwkUri",
														"value": "{{AS_JWK_URI}}"
													},
													{
														"key": "issuerId",
														"value": "{{CLIENT_ID}}"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"aud\": \"{{AS_ISSUER_ID}}\",\n  \"scope\": \"openid accounts payments\",\n  \"iss\": \"{{CLIENT_ID}}\",\n  \"claims\": {\n    \"id_token\": {\n      \"acr\": {\n        \"value\": \"urn:openbanking:psd2:sca\",\n        \"essential\": true\n      },\n      \"openbanking_intent_id\": {\n        \"value\": \"{{PaymentId}}\",\n        \"essential\": true\n      }\n    },\n    \"userinfo\": {\n      \"openbanking_intent_id\": {\n        \"value\": \"{{PaymentId}}\",\n        \"essential\": true\n      }\n    }\n  },\n  \"response_type\": \"code id_token\",\n  \"redirect_uri\": \"{{CLIENT_REDIRECT_URI}}\",\n  \"state\": \"10d260bf-a7d9-444a-92d9-7b7a5f088208\",\n  \"exp\": {{exp}},\n  \"nonce\": \"10d260bf-a7d9-444a-92d9-7b7a5f088208\",\n  \"client_id\": \"{{CLIENT_ID}}\"\n}"
												},
												"url": "{{JWKMS}}/api/crypto/signClaims"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "plain",
											"header": [
												{
													"key": "Cache-Control",
													"value": "no-cache, no-store, max-age=0, must-revalidate",
													"name": "Cache-Control",
													"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
												},
												{
													"key": "Content-Length",
													"value": "1410",
													"name": "Content-Length",
													"description": "The length of the response body in octets (8-bit bytes)"
												},
												{
													"key": "Content-Type",
													"value": "text/plain;charset=UTF-8",
													"name": "Content-Type",
													"description": "The mime type of this content"
												},
												{
													"key": "Date",
													"value": "Fri, 31 Aug 2018 23:36:28 GMT",
													"name": "Date",
													"description": "The date and time that the message was sent"
												},
												{
													"key": "Expires",
													"value": "0",
													"name": "Expires",
													"description": "Gives the date/time after which the response is considered stale"
												},
												{
													"key": "Pragma",
													"value": "no-cache",
													"name": "Pragma",
													"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
												},
												{
													"key": "Strict-Transport-Security",
													"value": "max-age=31536000 ; includeSubDomains",
													"name": "Strict-Transport-Security",
													"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
												},
												{
													"key": "X-Content-Type-Options",
													"value": "nosniff",
													"name": "X-Content-Type-Options",
													"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
												},
												{
													"key": "X-Frame-Options",
													"value": "DENY",
													"name": "X-Frame-Options",
													"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
												},
												{
													"key": "X-XSS-Protection",
													"value": "1; mode=block",
													"name": "X-XSS-Protection",
													"description": "Cross-site scripting (XSS) filter"
												},
												{
													"key": "x-fapi-interaction-id",
													"value": "2e4e1f3f-6d9d-4c8b-be7c-23b6622a39c1",
													"name": "x-fapi-interaction-id",
													"description": "Custom header"
												}
											],
											"cookie": [
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "01",
													"key": "amlbcookie"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
													"key": "iPlanetDirectoryPro"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": true,
													"domain": "jwkms.ob.forgerock.financial",
													"path": "/",
													"secure": true,
													"value": "C1841FA66D4D02E37604752448B582F9",
													"key": "JSESSIONID"
												}
											],
											"body": "eyJraWQiOiIwNzIyMjMwYy0zMjMyLTQ3MjUtODY0Yy01Njg4NDQ5YmM3ZjYiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiJodHRwczpcL1wvbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbFwvb2F1dGgyXC9vcGVuYmFua2luZyIsInNjb3BlIjoib3BlbmlkIGFjY291bnRzIHBheW1lbnRzIiwiaXNzIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiY2xhaW1zIjp7ImlkX3Rva2VuIjp7ImFjciI6eyJ2YWx1ZSI6InVybjpvcGVuYmFua2luZzpwc2QyOnNjYSIsImVzc2VudGlhbCI6dHJ1ZX0sIm9wZW5iYW5raW5nX2ludGVudF9pZCI6eyJ2YWx1ZSI6IlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDgiLCJlc3NlbnRpYWwiOnRydWV9fSwidXNlcmluZm8iOnsib3BlbmJhbmtpbmdfaW50ZW50X2lkIjp7InZhbHVlIjoiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOCIsImVzc2VudGlhbCI6dHJ1ZX19fSwicmVzcG9uc2VfdHlwZSI6ImNvZGUgaWRfdG9rZW4iLCJyZWRpcmVjdF91cmkiOiJodHRwczpcL1wvd3d3Lmdvb2dsZS5jby51a1wvIiwic3RhdGUiOiIxMGQyNjBiZi1hN2Q5LTQ0NGEtOTJkOS03YjdhNWYwODgyMDgiLCJleHAiOjE1MzU3NTg4ODgsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiaWF0IjoxNTM1NzU4NTg4LCJjbGllbnRfaWQiOiI5MWMzYzUxNy05ZGI2LTQxN2UtOGIwNS04YjExODhmN2EyZDYiLCJqdGkiOiIzMzI1YWFjOC05Mzc4LTRjNzUtYWFiNC1lMTg3NzA4MDdiNGYifQ.fWpDKRCIq72DlJ_npxXPBQNjIPyBBbowaIMlZOkX6NI682Lcw9PD554hqRwfeoPkMx_YfuPTYDqfhBiagl__I9qeAFTLx4ItA6VZpmJAvGFkReVjJ0TNJlSk8gDtYUMnZGMFtP_OWJYm5jG9AZt1MlFY11sIPos7Pm7DvVUODexz_CObDTNgG2TXy0dCc6-HQYMUUSMIEhGM00mM35NCyLIBBUMFgtstD5HsC4GpTBPL20_cuqIgA4XPSt_hADGYGTtuRlvM6dAoSF0nb4Hn7sYtw9aQUsz4XLWS9_6JxryAb36YrgPhTyyP-5Uq7_FtdLTC2vfXMiCjc9gNvZ50Bw"
										}
									]
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Token Exchange",
							"item": [
								{
									"name": "Exchange code",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1349a57d-7238-4b2a-b4d8-3e2905c30043",
												"exec": [
													"var data = JSON.parse(responseBody);",
													"",
													"postman.setEnvironmentVariable(\"access_token_with_consent\", data.access_token);",
													"postman.setEnvironmentVariable(\"id_token\", data.id_token);",
													"postman.setEnvironmentVariable(\"refresh_token\", data.refresh_token);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/x-www-form-urlencoded"
											}
										],
										"body": {
											"mode": "urlencoded",
											"urlencoded": [
												{
													"key": "grant_type",
													"value": "authorization_code",
													"type": "text"
												},
												{
													"key": "code",
													"value": "0EsLtSw0gZJWRY8L6iHM1zqhCIc",
													"type": "text"
												},
												{
													"key": "redirect_uri",
													"value": "{{CLIENT_REDIRECT_URI}}",
													"type": "text"
												},
												{
													"key": "client_assertion_type",
													"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
													"type": "text"
												},
												{
													"key": "client_assertion",
													"value": "{{client_credential_jwt}}",
													"type": "text"
												}
											]
										},
										"url": "{{AS_token_endpoint}}"
									},
									"response": [
										{
											"name": "Exchange code",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "grant_type",
															"value": "authorization_code",
															"type": "text"
														},
														{
															"key": "code",
															"value": "d32dafd8-071d-41bd-bdda-afe6d45d8307",
															"type": "text"
														},
														{
															"key": "redirect_uri",
															"value": "{{CLIENT_REDIRECT_URI}}",
															"type": "text"
														},
														{
															"key": "client_assertion_type",
															"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
															"type": "text"
														},
														{
															"key": "client_assertion",
															"value": "{{client_credential_jwt}}",
															"type": "text"
														}
													]
												},
												"url": "{{AS_token_endpoint}}"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Accept-Ranges",
													"value": "bytes",
													"name": "Accept-Ranges",
													"description": "Content-Types that are acceptable"
												},
												{
													"key": "Cache-Control",
													"value": "no-store",
													"name": "Cache-Control",
													"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
												},
												{
													"key": "Content-Type",
													"value": "application/json",
													"name": "Content-Type",
													"description": "The mime type of this content"
												},
												{
													"key": "Date",
													"value": "Fri, 31 Aug 2018 23:38:07 GMT",
													"name": "Date",
													"description": "The date and time that the message was sent"
												},
												{
													"key": "Pragma",
													"value": "no-cache",
													"name": "Pragma",
													"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
												},
												{
													"key": "Server",
													"value": "Restlet-Framework/2.3.4",
													"name": "Server",
													"description": "A name for the server"
												},
												{
													"key": "Strict-Transport-Security",
													"value": "max-age=31536000; includeSubdomains; preload",
													"name": "Strict-Transport-Security",
													"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
												},
												{
													"key": "Vary",
													"value": "Accept-Charset, Accept-Encoding, Accept-Language, Accept",
													"name": "Vary",
													"description": "Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server."
												},
												{
													"key": "X-Content-Type-Options",
													"value": "nosniff",
													"name": "X-Content-Type-Options",
													"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
												},
												{
													"key": "X-Frame-Options",
													"value": "DENY",
													"name": "X-Frame-Options",
													"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
												},
												{
													"key": "transfer-encoding",
													"value": "chunked",
													"name": "transfer-encoding",
													"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
												},
												{
													"key": "x-fapi-interaction-id",
													"value": "077cbcb9-51a5-4b51-b960-9c420cb10138",
													"name": "x-fapi-interaction-id",
													"description": "Custom header"
												}
											],
											"cookie": [
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "01",
													"key": "amlbcookie"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
													"key": "iPlanetDirectoryPro"
												}
											],
											"body": "{\"access_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNDYxYzhhYTgtZjY1Ni00NGQyLThjOTEtYThiOTRjNzUwZGZlIiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6ImFjY2Vzc190b2tlbiIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwibmJmIjoxNTM1NzU4Njg3LCJncmFudF90eXBlIjoiYXV0aG9yaXphdGlvbl9jb2RlIiwic2NvcGUiOlsib3BlbmlkIiwicGF5bWVudHMiLCJhY2NvdW50cyJdLCJhdXRoX3RpbWUiOjE1MzU3NTg2NjMwMDAsImNsYWltcyI6IntcImlkX3Rva2VuXCI6e1wiYWNyXCI6e1widmFsdWVcIjpcInVybjpvcGVuYmFua2luZzpwc2QyOnNjYVwiLFwiZXNzZW50aWFsXCI6dHJ1ZX0sXCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19LFwidXNlcmluZm9cIjp7XCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19fSIsInJlYWxtIjoiL29wZW5iYW5raW5nIiwiZXhwIjoxNTM1ODQ1MDg3LCJpYXQiOjE1MzU3NTg2ODcsImV4cGlyZXNfaW4iOjg2NDAwLCJqdGkiOiIyNmQ1OWZmNS0wYmU3LTQxN2MtOGJhOC01MzcxOGU5ZjE1YTkifQ.Oi4HzCmb1dT-xE1ewNAxrcy1PO85_gIFs7BKhuD7Qbn9K0kS6tDXawHa4K3vZzZUk5-CA3LJ7zqQ7Ex2vocNGQ\",\"refresh_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNGY0YzhlOTgtZjMyYS00NzliLWEyYzUtZTRjYzE3NWZiZDU3IiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6InJlZnJlc2hfdG9rZW4iLCJhdXRoTW9kdWxlcyI6IkRhdGFTdG9yZSIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsImF1ZCI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImFjciI6InVybjpvcGVuYmFua2luZzpwc2QyOnNjYSIsIm5iZiI6MTUzNTc1ODY4Nywib3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInNjb3BlIjpbIm9wZW5pZCIsInBheW1lbnRzIiwiYWNjb3VudHMiXSwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJjbGFpbXMiOiJ7XCJpZF90b2tlblwiOntcImFjclwiOntcInZhbHVlXCI6XCJ1cm46b3BlbmJhbmtpbmc6cHNkMjpzY2FcIixcImVzc2VudGlhbFwiOnRydWV9LFwib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fSxcInVzZXJpbmZvXCI6e1wib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fX0iLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTU0MzUzNDY4NywiaWF0IjoxNTM1NzU4Njg3LCJleHBpcmVzX2luIjo3Nzc2MDAwLCJqdGkiOiJiMTk1Y2QzZi0wMjI5LTQ3YzYtOGNkMy03ODZhMDI1OWFhODMifQ.sjRPbbgxR5AXl-gtuSPKuz_9oM9MjocSfEDYJmJBJLyqSAHWimnMon5Pnxk_eEnvF2TNS3mFovtHq1RCXE4E-w\",\"scope\":\"openid payments accounts\",\"id_token\":\"eyJ0eXAiOiJKV1QiLCJraWQiOiJiL082T3ZWdjEreStXZ3JINVVpOVdUaW9MdDA9IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoicm1EYUlJMjFGcmNadElNWnpSeFNGQSIsInN1YiI6ImRlbW8iLCJhdWRpdFRyYWNraW5nSWQiOiIwOTAxZWNhZi1hMDA4LTQ1NzItOGQ4NC0zMGJkZmM0NTRjMTYtMzE5ODU3MCIsImlzcyI6Imh0dHBzOi8vbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbC9vYXV0aDIvb3BlbmJhbmtpbmciLCJ0b2tlbk5hbWUiOiJpZF90b2tlbiIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYWNyIjoidXJuOm9wZW5iYW5raW5nOnBzZDI6c2NhIiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiY19oYXNoIjoiYldBUTJUVk1UVUVMTTJkLTUyRHpPQSIsIm9wZW5iYW5raW5nX2ludGVudF9pZCI6IlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDgiLCJvcmcuZm9yZ2Vyb2NrLm9wZW5pZGNvbm5lY3Qub3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiYXpwIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTUzNTg0NTA4NywidG9rZW5UeXBlIjoiSldUVG9rZW4iLCJpYXQiOjE1MzU3NTg2ODd9.kxRZg6qTIrZGn99SJaOhYvVQOPe5SnIYNfOVa1LDM4NheJ-ClETNtfdpK43aDe1Xf79bH1wX5KO4j807kbDcLZ7g36PepIeUESzB6nKGyCaDZeuNlBRy97WEkFRrXeYoqmi7oMy_m7NEQDw7VR983GBjpjgQACJeyY4P26DU1S6OmrSonateFaViatwP7gqXKYuMfy-lsN8B1QVGg59xigu1lg90QUgDwnMVHqwKrunoBBTUtIYHcIeV3w2RRCWyH5JRnbYDzcnhZ1gQYdHbkZQcoxVvjYwX1FxwQa0vnY1wfLlWp6R-VhSGgsaLPh81yRmp_aaUp5G5P0_03QtOVw\",\"token_type\":\"Bearer\",\"expires_in\":86399,\"nonce\":\"10d260bf-a7d9-444a-92d9-7b7a5f088208\"}"
										}
									]
								},
								{
									"name": "Refresh access token",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d2d60507-ebff-44d6-8663-8646b64464d5",
												"exec": [
													"var data = JSON.parse(responseBody);",
													"",
													"postman.setEnvironmentVariable(\"access_token_with_consent\", data.access_token);",
													"postman.setEnvironmentVariable(\"id_token\", data.id_token);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/x-www-form-urlencoded"
											}
										],
										"body": {
											"mode": "urlencoded",
											"urlencoded": [
												{
													"key": "grant_type",
													"value": "refresh_token",
													"type": "text"
												},
												{
													"key": "refresh_token",
													"value": "{{refresh_token}}",
													"type": "text"
												},
												{
													"key": "redirect_uri",
													"value": "{{CLIENT_REDIRECT_URI}}",
													"type": "text"
												},
												{
													"key": "client_assertion_type",
													"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
													"type": "text"
												},
												{
													"key": "client_assertion",
													"value": "{{client_credential_jwt}}",
													"type": "text"
												}
											]
										},
										"url": "{{AS_token_endpoint}}"
									},
									"response": [
										{
											"name": "Exchange code",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "grant_type",
															"value": "authorization_code",
															"type": "text"
														},
														{
															"key": "code",
															"value": "d32dafd8-071d-41bd-bdda-afe6d45d8307",
															"type": "text"
														},
														{
															"key": "redirect_uri",
															"value": "{{CLIENT_REDIRECT_URI}}",
															"type": "text"
														},
														{
															"key": "client_assertion_type",
															"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
															"type": "text"
														},
														{
															"key": "client_assertion",
															"value": "{{client_credential_jwt}}",
															"type": "text"
														}
													]
												},
												"url": "{{AS_token_endpoint}}"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Accept-Ranges",
													"value": "bytes",
													"name": "Accept-Ranges",
													"description": "Content-Types that are acceptable"
												},
												{
													"key": "Cache-Control",
													"value": "no-store",
													"name": "Cache-Control",
													"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
												},
												{
													"key": "Content-Type",
													"value": "application/json",
													"name": "Content-Type",
													"description": "The mime type of this content"
												},
												{
													"key": "Date",
													"value": "Fri, 31 Aug 2018 23:38:07 GMT",
													"name": "Date",
													"description": "The date and time that the message was sent"
												},
												{
													"key": "Pragma",
													"value": "no-cache",
													"name": "Pragma",
													"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
												},
												{
													"key": "Server",
													"value": "Restlet-Framework/2.3.4",
													"name": "Server",
													"description": "A name for the server"
												},
												{
													"key": "Strict-Transport-Security",
													"value": "max-age=31536000; includeSubdomains; preload",
													"name": "Strict-Transport-Security",
													"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
												},
												{
													"key": "Vary",
													"value": "Accept-Charset, Accept-Encoding, Accept-Language, Accept",
													"name": "Vary",
													"description": "Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server."
												},
												{
													"key": "X-Content-Type-Options",
													"value": "nosniff",
													"name": "X-Content-Type-Options",
													"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
												},
												{
													"key": "X-Frame-Options",
													"value": "DENY",
													"name": "X-Frame-Options",
													"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
												},
												{
													"key": "transfer-encoding",
													"value": "chunked",
													"name": "transfer-encoding",
													"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
												},
												{
													"key": "x-fapi-interaction-id",
													"value": "077cbcb9-51a5-4b51-b960-9c420cb10138",
													"name": "x-fapi-interaction-id",
													"description": "Custom header"
												}
											],
											"cookie": [
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "01",
													"key": "amlbcookie"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
													"key": "iPlanetDirectoryPro"
												}
											],
											"body": "{\"access_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNDYxYzhhYTgtZjY1Ni00NGQyLThjOTEtYThiOTRjNzUwZGZlIiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6ImFjY2Vzc190b2tlbiIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwibmJmIjoxNTM1NzU4Njg3LCJncmFudF90eXBlIjoiYXV0aG9yaXphdGlvbl9jb2RlIiwic2NvcGUiOlsib3BlbmlkIiwicGF5bWVudHMiLCJhY2NvdW50cyJdLCJhdXRoX3RpbWUiOjE1MzU3NTg2NjMwMDAsImNsYWltcyI6IntcImlkX3Rva2VuXCI6e1wiYWNyXCI6e1widmFsdWVcIjpcInVybjpvcGVuYmFua2luZzpwc2QyOnNjYVwiLFwiZXNzZW50aWFsXCI6dHJ1ZX0sXCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19LFwidXNlcmluZm9cIjp7XCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19fSIsInJlYWxtIjoiL29wZW5iYW5raW5nIiwiZXhwIjoxNTM1ODQ1MDg3LCJpYXQiOjE1MzU3NTg2ODcsImV4cGlyZXNfaW4iOjg2NDAwLCJqdGkiOiIyNmQ1OWZmNS0wYmU3LTQxN2MtOGJhOC01MzcxOGU5ZjE1YTkifQ.Oi4HzCmb1dT-xE1ewNAxrcy1PO85_gIFs7BKhuD7Qbn9K0kS6tDXawHa4K3vZzZUk5-CA3LJ7zqQ7Ex2vocNGQ\",\"refresh_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNGY0YzhlOTgtZjMyYS00NzliLWEyYzUtZTRjYzE3NWZiZDU3IiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6InJlZnJlc2hfdG9rZW4iLCJhdXRoTW9kdWxlcyI6IkRhdGFTdG9yZSIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsImF1ZCI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImFjciI6InVybjpvcGVuYmFua2luZzpwc2QyOnNjYSIsIm5iZiI6MTUzNTc1ODY4Nywib3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInNjb3BlIjpbIm9wZW5pZCIsInBheW1lbnRzIiwiYWNjb3VudHMiXSwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJjbGFpbXMiOiJ7XCJpZF90b2tlblwiOntcImFjclwiOntcInZhbHVlXCI6XCJ1cm46b3BlbmJhbmtpbmc6cHNkMjpzY2FcIixcImVzc2VudGlhbFwiOnRydWV9LFwib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fSxcInVzZXJpbmZvXCI6e1wib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fX0iLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTU0MzUzNDY4NywiaWF0IjoxNTM1NzU4Njg3LCJleHBpcmVzX2luIjo3Nzc2MDAwLCJqdGkiOiJiMTk1Y2QzZi0wMjI5LTQ3YzYtOGNkMy03ODZhMDI1OWFhODMifQ.sjRPbbgxR5AXl-gtuSPKuz_9oM9MjocSfEDYJmJBJLyqSAHWimnMon5Pnxk_eEnvF2TNS3mFovtHq1RCXE4E-w\",\"scope\":\"openid payments accounts\",\"id_token\":\"eyJ0eXAiOiJKV1QiLCJraWQiOiJiL082T3ZWdjEreStXZ3JINVVpOVdUaW9MdDA9IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoicm1EYUlJMjFGcmNadElNWnpSeFNGQSIsInN1YiI6ImRlbW8iLCJhdWRpdFRyYWNraW5nSWQiOiIwOTAxZWNhZi1hMDA4LTQ1NzItOGQ4NC0zMGJkZmM0NTRjMTYtMzE5ODU3MCIsImlzcyI6Imh0dHBzOi8vbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbC9vYXV0aDIvb3BlbmJhbmtpbmciLCJ0b2tlbk5hbWUiOiJpZF90b2tlbiIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYWNyIjoidXJuOm9wZW5iYW5raW5nOnBzZDI6c2NhIiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiY19oYXNoIjoiYldBUTJUVk1UVUVMTTJkLTUyRHpPQSIsIm9wZW5iYW5raW5nX2ludGVudF9pZCI6IlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDgiLCJvcmcuZm9yZ2Vyb2NrLm9wZW5pZGNvbm5lY3Qub3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiYXpwIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTUzNTg0NTA4NywidG9rZW5UeXBlIjoiSldUVG9rZW4iLCJpYXQiOjE1MzU3NTg2ODd9.kxRZg6qTIrZGn99SJaOhYvVQOPe5SnIYNfOVa1LDM4NheJ-ClETNtfdpK43aDe1Xf79bH1wX5KO4j807kbDcLZ7g36PepIeUESzB6nKGyCaDZeuNlBRy97WEkFRrXeYoqmi7oMy_m7NEQDw7VR983GBjpjgQACJeyY4P26DU1S6OmrSonateFaViatwP7gqXKYuMfy-lsN8B1QVGg59xigu1lg90QUgDwnMVHqwKrunoBBTUtIYHcIeV3w2RRCWyH5JRnbYDzcnhZ1gQYdHbkZQcoxVvjYwX1FxwQa0vnY1wfLlWp6R-VhSGgsaLPh81yRmp_aaUp5G5P0_03QtOVw\",\"token_type\":\"Bearer\",\"expires_in\":86399,\"nonce\":\"10d260bf-a7d9-444a-92d9-7b7a5f088208\"}"
										}
									]
								},
								{
									"name": "Introspect Token",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "845324f1-da6a-4ca8-bf06-f08d2f2c3e88",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/x-www-form-urlencoded"
											}
										],
										"body": {
											"mode": "urlencoded",
											"urlencoded": [
												{
													"key": "token",
													"value": "{{access_token_with_consent}}",
													"type": "text"
												},
												{
													"key": "client_id",
													"value": "{{CLIENT_ID}}",
													"type": "text"
												},
												{
													"key": "client_secret",
													"value": "{{CLIENT_SECRET}}",
													"type": "text"
												}
											]
										},
										"url": "{{AS_introspection_endpoint}}"
									},
									"response": [
										{
											"name": "Exchange code",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "grant_type",
															"value": "authorization_code",
															"type": "text"
														},
														{
															"key": "code",
															"value": "d32dafd8-071d-41bd-bdda-afe6d45d8307",
															"type": "text"
														},
														{
															"key": "redirect_uri",
															"value": "{{CLIENT_REDIRECT_URI}}",
															"type": "text"
														},
														{
															"key": "client_assertion_type",
															"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
															"type": "text"
														},
														{
															"key": "client_assertion",
															"value": "{{client_credential_jwt}}",
															"type": "text"
														}
													]
												},
												"url": "{{AS_token_endpoint}}"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Accept-Ranges",
													"value": "bytes",
													"name": "Accept-Ranges",
													"description": "Content-Types that are acceptable"
												},
												{
													"key": "Cache-Control",
													"value": "no-store",
													"name": "Cache-Control",
													"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
												},
												{
													"key": "Content-Type",
													"value": "application/json",
													"name": "Content-Type",
													"description": "The mime type of this content"
												},
												{
													"key": "Date",
													"value": "Fri, 31 Aug 2018 23:38:07 GMT",
													"name": "Date",
													"description": "The date and time that the message was sent"
												},
												{
													"key": "Pragma",
													"value": "no-cache",
													"name": "Pragma",
													"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
												},
												{
													"key": "Server",
													"value": "Restlet-Framework/2.3.4",
													"name": "Server",
													"description": "A name for the server"
												},
												{
													"key": "Strict-Transport-Security",
													"value": "max-age=31536000; includeSubdomains; preload",
													"name": "Strict-Transport-Security",
													"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
												},
												{
													"key": "Vary",
													"value": "Accept-Charset, Accept-Encoding, Accept-Language, Accept",
													"name": "Vary",
													"description": "Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server."
												},
												{
													"key": "X-Content-Type-Options",
													"value": "nosniff",
													"name": "X-Content-Type-Options",
													"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
												},
												{
													"key": "X-Frame-Options",
													"value": "DENY",
													"name": "X-Frame-Options",
													"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
												},
												{
													"key": "transfer-encoding",
													"value": "chunked",
													"name": "transfer-encoding",
													"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
												},
												{
													"key": "x-fapi-interaction-id",
													"value": "077cbcb9-51a5-4b51-b960-9c420cb10138",
													"name": "x-fapi-interaction-id",
													"description": "Custom header"
												}
											],
											"cookie": [
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "01",
													"key": "amlbcookie"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
													"key": "iPlanetDirectoryPro"
												}
											],
											"body": "{\"access_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNDYxYzhhYTgtZjY1Ni00NGQyLThjOTEtYThiOTRjNzUwZGZlIiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6ImFjY2Vzc190b2tlbiIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwibmJmIjoxNTM1NzU4Njg3LCJncmFudF90eXBlIjoiYXV0aG9yaXphdGlvbl9jb2RlIiwic2NvcGUiOlsib3BlbmlkIiwicGF5bWVudHMiLCJhY2NvdW50cyJdLCJhdXRoX3RpbWUiOjE1MzU3NTg2NjMwMDAsImNsYWltcyI6IntcImlkX3Rva2VuXCI6e1wiYWNyXCI6e1widmFsdWVcIjpcInVybjpvcGVuYmFua2luZzpwc2QyOnNjYVwiLFwiZXNzZW50aWFsXCI6dHJ1ZX0sXCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19LFwidXNlcmluZm9cIjp7XCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19fSIsInJlYWxtIjoiL29wZW5iYW5raW5nIiwiZXhwIjoxNTM1ODQ1MDg3LCJpYXQiOjE1MzU3NTg2ODcsImV4cGlyZXNfaW4iOjg2NDAwLCJqdGkiOiIyNmQ1OWZmNS0wYmU3LTQxN2MtOGJhOC01MzcxOGU5ZjE1YTkifQ.Oi4HzCmb1dT-xE1ewNAxrcy1PO85_gIFs7BKhuD7Qbn9K0kS6tDXawHa4K3vZzZUk5-CA3LJ7zqQ7Ex2vocNGQ\",\"refresh_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNGY0YzhlOTgtZjMyYS00NzliLWEyYzUtZTRjYzE3NWZiZDU3IiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6InJlZnJlc2hfdG9rZW4iLCJhdXRoTW9kdWxlcyI6IkRhdGFTdG9yZSIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsImF1ZCI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImFjciI6InVybjpvcGVuYmFua2luZzpwc2QyOnNjYSIsIm5iZiI6MTUzNTc1ODY4Nywib3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInNjb3BlIjpbIm9wZW5pZCIsInBheW1lbnRzIiwiYWNjb3VudHMiXSwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJjbGFpbXMiOiJ7XCJpZF90b2tlblwiOntcImFjclwiOntcInZhbHVlXCI6XCJ1cm46b3BlbmJhbmtpbmc6cHNkMjpzY2FcIixcImVzc2VudGlhbFwiOnRydWV9LFwib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fSxcInVzZXJpbmZvXCI6e1wib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fX0iLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTU0MzUzNDY4NywiaWF0IjoxNTM1NzU4Njg3LCJleHBpcmVzX2luIjo3Nzc2MDAwLCJqdGkiOiJiMTk1Y2QzZi0wMjI5LTQ3YzYtOGNkMy03ODZhMDI1OWFhODMifQ.sjRPbbgxR5AXl-gtuSPKuz_9oM9MjocSfEDYJmJBJLyqSAHWimnMon5Pnxk_eEnvF2TNS3mFovtHq1RCXE4E-w\",\"scope\":\"openid payments accounts\",\"id_token\":\"eyJ0eXAiOiJKV1QiLCJraWQiOiJiL082T3ZWdjEreStXZ3JINVVpOVdUaW9MdDA9IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoicm1EYUlJMjFGcmNadElNWnpSeFNGQSIsInN1YiI6ImRlbW8iLCJhdWRpdFRyYWNraW5nSWQiOiIwOTAxZWNhZi1hMDA4LTQ1NzItOGQ4NC0zMGJkZmM0NTRjMTYtMzE5ODU3MCIsImlzcyI6Imh0dHBzOi8vbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbC9vYXV0aDIvb3BlbmJhbmtpbmciLCJ0b2tlbk5hbWUiOiJpZF90b2tlbiIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYWNyIjoidXJuOm9wZW5iYW5raW5nOnBzZDI6c2NhIiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiY19oYXNoIjoiYldBUTJUVk1UVUVMTTJkLTUyRHpPQSIsIm9wZW5iYW5raW5nX2ludGVudF9pZCI6IlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDgiLCJvcmcuZm9yZ2Vyb2NrLm9wZW5pZGNvbm5lY3Qub3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiYXpwIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTUzNTg0NTA4NywidG9rZW5UeXBlIjoiSldUVG9rZW4iLCJpYXQiOjE1MzU3NTg2ODd9.kxRZg6qTIrZGn99SJaOhYvVQOPe5SnIYNfOVa1LDM4NheJ-ClETNtfdpK43aDe1Xf79bH1wX5KO4j807kbDcLZ7g36PepIeUESzB6nKGyCaDZeuNlBRy97WEkFRrXeYoqmi7oMy_m7NEQDw7VR983GBjpjgQACJeyY4P26DU1S6OmrSonateFaViatwP7gqXKYuMfy-lsN8B1QVGg59xigu1lg90QUgDwnMVHqwKrunoBBTUtIYHcIeV3w2RRCWyH5JRnbYDzcnhZ1gQYdHbkZQcoxVvjYwX1FxwQa0vnY1wfLlWp6R-VhSGgsaLPh81yRmp_aaUp5G5P0_03QtOVw\",\"token_type\":\"Bearer\",\"expires_in\":86399,\"nonce\":\"10d260bf-a7d9-444a-92d9-7b7a5f088208\"}"
										}
									]
								},
								{
									"name": "UserInfo",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "bb0afa70-f1f8-436d-a526-af7146160f09",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/x-www-form-urlencoded"
											},
											{
												"key": "Authorization",
												"value": "Bearer {{access_token_with_consent}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "urlencoded",
											"urlencoded": []
										},
										"url": "{{AS_userinfo_endpoint}}"
									},
									"response": [
										{
											"name": "Exchange code",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "grant_type",
															"value": "authorization_code",
															"type": "text"
														},
														{
															"key": "code",
															"value": "d32dafd8-071d-41bd-bdda-afe6d45d8307",
															"type": "text"
														},
														{
															"key": "redirect_uri",
															"value": "{{CLIENT_REDIRECT_URI}}",
															"type": "text"
														},
														{
															"key": "client_assertion_type",
															"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
															"type": "text"
														},
														{
															"key": "client_assertion",
															"value": "{{client_credential_jwt}}",
															"type": "text"
														}
													]
												},
												"url": "{{AS_token_endpoint}}"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Accept-Ranges",
													"value": "bytes",
													"name": "Accept-Ranges",
													"description": "Content-Types that are acceptable"
												},
												{
													"key": "Cache-Control",
													"value": "no-store",
													"name": "Cache-Control",
													"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
												},
												{
													"key": "Content-Type",
													"value": "application/json",
													"name": "Content-Type",
													"description": "The mime type of this content"
												},
												{
													"key": "Date",
													"value": "Fri, 31 Aug 2018 23:38:07 GMT",
													"name": "Date",
													"description": "The date and time that the message was sent"
												},
												{
													"key": "Pragma",
													"value": "no-cache",
													"name": "Pragma",
													"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
												},
												{
													"key": "Server",
													"value": "Restlet-Framework/2.3.4",
													"name": "Server",
													"description": "A name for the server"
												},
												{
													"key": "Strict-Transport-Security",
													"value": "max-age=31536000; includeSubdomains; preload",
													"name": "Strict-Transport-Security",
													"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
												},
												{
													"key": "Vary",
													"value": "Accept-Charset, Accept-Encoding, Accept-Language, Accept",
													"name": "Vary",
													"description": "Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server."
												},
												{
													"key": "X-Content-Type-Options",
													"value": "nosniff",
													"name": "X-Content-Type-Options",
													"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
												},
												{
													"key": "X-Frame-Options",
													"value": "DENY",
													"name": "X-Frame-Options",
													"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
												},
												{
													"key": "transfer-encoding",
													"value": "chunked",
													"name": "transfer-encoding",
													"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
												},
												{
													"key": "x-fapi-interaction-id",
													"value": "077cbcb9-51a5-4b51-b960-9c420cb10138",
													"name": "x-fapi-interaction-id",
													"description": "Custom header"
												}
											],
											"cookie": [
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "01",
													"key": "amlbcookie"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
													"key": "iPlanetDirectoryPro"
												}
											],
											"body": "{\"access_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNDYxYzhhYTgtZjY1Ni00NGQyLThjOTEtYThiOTRjNzUwZGZlIiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6ImFjY2Vzc190b2tlbiIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwibmJmIjoxNTM1NzU4Njg3LCJncmFudF90eXBlIjoiYXV0aG9yaXphdGlvbl9jb2RlIiwic2NvcGUiOlsib3BlbmlkIiwicGF5bWVudHMiLCJhY2NvdW50cyJdLCJhdXRoX3RpbWUiOjE1MzU3NTg2NjMwMDAsImNsYWltcyI6IntcImlkX3Rva2VuXCI6e1wiYWNyXCI6e1widmFsdWVcIjpcInVybjpvcGVuYmFua2luZzpwc2QyOnNjYVwiLFwiZXNzZW50aWFsXCI6dHJ1ZX0sXCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19LFwidXNlcmluZm9cIjp7XCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19fSIsInJlYWxtIjoiL29wZW5iYW5raW5nIiwiZXhwIjoxNTM1ODQ1MDg3LCJpYXQiOjE1MzU3NTg2ODcsImV4cGlyZXNfaW4iOjg2NDAwLCJqdGkiOiIyNmQ1OWZmNS0wYmU3LTQxN2MtOGJhOC01MzcxOGU5ZjE1YTkifQ.Oi4HzCmb1dT-xE1ewNAxrcy1PO85_gIFs7BKhuD7Qbn9K0kS6tDXawHa4K3vZzZUk5-CA3LJ7zqQ7Ex2vocNGQ\",\"refresh_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNGY0YzhlOTgtZjMyYS00NzliLWEyYzUtZTRjYzE3NWZiZDU3IiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6InJlZnJlc2hfdG9rZW4iLCJhdXRoTW9kdWxlcyI6IkRhdGFTdG9yZSIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsImF1ZCI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImFjciI6InVybjpvcGVuYmFua2luZzpwc2QyOnNjYSIsIm5iZiI6MTUzNTc1ODY4Nywib3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInNjb3BlIjpbIm9wZW5pZCIsInBheW1lbnRzIiwiYWNjb3VudHMiXSwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJjbGFpbXMiOiJ7XCJpZF90b2tlblwiOntcImFjclwiOntcInZhbHVlXCI6XCJ1cm46b3BlbmJhbmtpbmc6cHNkMjpzY2FcIixcImVzc2VudGlhbFwiOnRydWV9LFwib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fSxcInVzZXJpbmZvXCI6e1wib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fX0iLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTU0MzUzNDY4NywiaWF0IjoxNTM1NzU4Njg3LCJleHBpcmVzX2luIjo3Nzc2MDAwLCJqdGkiOiJiMTk1Y2QzZi0wMjI5LTQ3YzYtOGNkMy03ODZhMDI1OWFhODMifQ.sjRPbbgxR5AXl-gtuSPKuz_9oM9MjocSfEDYJmJBJLyqSAHWimnMon5Pnxk_eEnvF2TNS3mFovtHq1RCXE4E-w\",\"scope\":\"openid payments accounts\",\"id_token\":\"eyJ0eXAiOiJKV1QiLCJraWQiOiJiL082T3ZWdjEreStXZ3JINVVpOVdUaW9MdDA9IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoicm1EYUlJMjFGcmNadElNWnpSeFNGQSIsInN1YiI6ImRlbW8iLCJhdWRpdFRyYWNraW5nSWQiOiIwOTAxZWNhZi1hMDA4LTQ1NzItOGQ4NC0zMGJkZmM0NTRjMTYtMzE5ODU3MCIsImlzcyI6Imh0dHBzOi8vbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbC9vYXV0aDIvb3BlbmJhbmtpbmciLCJ0b2tlbk5hbWUiOiJpZF90b2tlbiIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYWNyIjoidXJuOm9wZW5iYW5raW5nOnBzZDI6c2NhIiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiY19oYXNoIjoiYldBUTJUVk1UVUVMTTJkLTUyRHpPQSIsIm9wZW5iYW5raW5nX2ludGVudF9pZCI6IlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDgiLCJvcmcuZm9yZ2Vyb2NrLm9wZW5pZGNvbm5lY3Qub3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiYXpwIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTUzNTg0NTA4NywidG9rZW5UeXBlIjoiSldUVG9rZW4iLCJpYXQiOjE1MzU3NTg2ODd9.kxRZg6qTIrZGn99SJaOhYvVQOPe5SnIYNfOVa1LDM4NheJ-ClETNtfdpK43aDe1Xf79bH1wX5KO4j807kbDcLZ7g36PepIeUESzB6nKGyCaDZeuNlBRy97WEkFRrXeYoqmi7oMy_m7NEQDw7VR983GBjpjgQACJeyY4P26DU1S6OmrSonateFaViatwP7gqXKYuMfy-lsN8B1QVGg59xigu1lg90QUgDwnMVHqwKrunoBBTUtIYHcIeV3w2RRCWyH5JRnbYDzcnhZ1gQYdHbkZQcoxVvjYwX1FxwQa0vnY1wfLlWp6R-VhSGgsaLPh81yRmp_aaUp5G5P0_03QtOVw\",\"token_type\":\"Bearer\",\"expires_in\":86399,\"nonce\":\"10d260bf-a7d9-444a-92d9-7b7a5f088208\"}"
										}
									]
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Data Access",
							"item": [
								{
									"name": "Accounts List Query",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "f5f9371f-2166-4325-9ef6-912aec12a9a8",
												"exec": [
													"var data = JSON.parse(responseBody);",
													"",
													"postman.setEnvironmentVariable(\"AccountId\", data.Data.Account[0].AccountId);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{access_token_with_consent}}"
											},
											{
												"key": "x-fapi-financial-id",
												"value": "{{ASPSP_FINANCIAL_ID}}"
											},
											{
												"key": "x-fapi-customer-last-logged-time",
												"value": "{{x-fapi-customer-last-logged-time}}"
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "{{x-fapi-customer-ip-address}}"
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{x-fapi-interaction-id}}"
											},
											{
												"key": "Accept",
												"value": "application/json"
											}
										],
										"url": "{{RS_GetAccounts_v3.1}}"
									},
									"response": [
										{
											"name": "Payment submission",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Authorization",
														"value": "Bearer {{access_token_with_consent}}"
													},
													{
														"key": "Content-Type",
														"value": "application/json"
													},
													{
														"key": "x-idempotency-key",
														"value": "FRESCO.21302.GFX.20"
													},
													{
														"key": "x-jws-signature",
														"value": "TGlmZSdzIGEgam91cm5leSBub3QgYSBkZXN0aW5hdGlvbiA=..T2ggZ29vZCBldmVuaW5nIG1yIHR5bGVyIGdvaW5nIGRvd24gPw==",
														"disabled": true
													},
													{
														"key": "x-fapi-financial-id",
														"value": "{{ASPSP_FINANCIAL_ID}}"
													},
													{
														"key": "x-fapi-customer-last-logged-time",
														"value": "Sun, 10 Sep 2017 19:43:31 UTC"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "104.25.212.99"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "93bac548-d2de-4546-b106-880a5018460d"
													},
													{
														"key": "Accept",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"Data\": {\n    \"PaymentId\": \"{{PaymentId}}\",\n    \"Initiation\": {\n      \"InstructionIdentification\": \"ACME412\",\n      \"EndToEndIdentification\": \"FRESCO.21302.GFX.20\",\n      \"InstructedAmount\": {\n        \"Amount\": \"165.88\",\n        \"Currency\": \"GBP\"\n      },\n      \"CreditorAccount\": {\n        \"SchemeName\": \"SortCodeAccountNumber\",\n        \"Identification\": \"08080021325698\",\n        \"Name\": \"ACME Inc\",\n        \"SecondaryIdentification\": \"0002\"\n      },\n      \"RemittanceInformation\": {\n        \"Reference\": \"FRESCO-101\",\n        \"Unstructured\": \"Internal ops code 5120101\"\n      }\n    }\n  },\n  \"Risk\": {\n    \"PaymentContextCode\": \"EcommerceGoods\",\n    \"MerchantCategoryCode\": \"5967\",\n    \"MerchantCustomerIdentification\": \"053598653254\",\n    \"DeliveryAddress\": {\n      \"AddressLine\": [\n        \"Flat 7\",\n        \"Acacia Lodge\"\n      ],\n      \"StreetName\": \"Acacia Avenue\",\n      \"BuildingNumber\": \"27\",\n      \"PostCode\": \"GU31 2ZZ\",\n      \"TownName\": \"Sparsholt\",\n      \"CountySubDivision\": [\n        \"Wessex\"\n      ],\n      \"Country\": \"UK\"\n    }\n  }\n}"
												},
												"url": "{{RS_CreatePaymentSubmission_v2.0}}"
											},
											"status": "Created",
											"code": 201,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Cache-Control",
													"value": "no-cache, no-store, max-age=0, must-revalidate",
													"name": "Cache-Control",
													"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
												},
												{
													"key": "Content-Type",
													"value": "application/json;charset=utf-8",
													"name": "Content-Type",
													"description": "The mime type of this content"
												},
												{
													"key": "Date",
													"value": "Fri, 31 Aug 2018 23:38:12 GMT",
													"name": "Date",
													"description": "The date and time that the message was sent"
												},
												{
													"key": "Expires",
													"value": "0",
													"name": "Expires",
													"description": "Gives the date/time after which the response is considered stale"
												},
												{
													"key": "Pragma",
													"value": "no-cache",
													"name": "Pragma",
													"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
												},
												{
													"key": "Strict-Transport-Security",
													"value": "max-age=31536000 ; includeSubDomains",
													"name": "Strict-Transport-Security",
													"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
												},
												{
													"key": "X-Content-Type-Options",
													"value": "nosniff",
													"name": "X-Content-Type-Options",
													"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
												},
												{
													"key": "X-Frame-Options",
													"value": "DENY",
													"name": "X-Frame-Options",
													"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
												},
												{
													"key": "X-XSS-Protection",
													"value": "1; mode=block",
													"name": "X-XSS-Protection",
													"description": "Cross-site scripting (XSS) filter"
												},
												{
													"key": "transfer-encoding",
													"value": "chunked",
													"name": "transfer-encoding",
													"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
												},
												{
													"key": "x-fapi-interaction-id",
													"value": "93bac548-d2de-4546-b106-880a5018460d",
													"name": "x-fapi-interaction-id",
													"description": "Custom header"
												}
											],
											"cookie": [
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "01",
													"key": "amlbcookie"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
													"key": "iPlanetDirectoryPro"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": true,
													"domain": "rs.aspsp.ob.forgerock.financial",
													"path": "/v1.1",
													"secure": true,
													"value": "34F0FF6ADBE51B4332018415EB8726BF",
													"key": "JSESSIONID"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": true,
													"domain": "rs.aspsp.ob.forgerock.financial",
													"path": "/",
													"secure": true,
													"value": "B165242A9E44929BEB0404056A48E34D",
													"key": "JSESSIONID"
												}
											],
											"body": "{\"Data\":{\"PaymentSubmissionId\":\"764b7ff1-3c92-466a-a3d7-34bbf408a141\",\"PaymentId\":\"Pfda39ef6-c81f-49b6-9100-068fb88bb8d8\",\"Status\":\"AcceptedSettlementInProcess\",\"CreationDateTime\":\"2018-08-31T23:38:12+00:00\"}}"
										}
									]
								},
								{
									"name": "Account Details Query",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "6eb50223-87f6-45df-b0bd-f5040149f904",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{access_token_with_consent}}"
											},
											{
												"key": "x-fapi-financial-id",
												"value": "{{ASPSP_FINANCIAL_ID}}"
											},
											{
												"key": "x-fapi-customer-last-logged-time",
												"value": "{{x-fapi-customer-last-logged-time}}"
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "{{x-fapi-customer-ip-address}}"
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{x-fapi-interaction-id}}"
											},
											{
												"key": "Accept",
												"value": "application/json"
											}
										],
										"url": "{{RS_GetAccount_v3.1}}"
									},
									"response": [
										{
											"name": "Payment submission",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Authorization",
														"value": "Bearer {{access_token_with_consent}}"
													},
													{
														"key": "Content-Type",
														"value": "application/json"
													},
													{
														"key": "x-idempotency-key",
														"value": "FRESCO.21302.GFX.20"
													},
													{
														"key": "x-jws-signature",
														"value": "TGlmZSdzIGEgam91cm5leSBub3QgYSBkZXN0aW5hdGlvbiA=..T2ggZ29vZCBldmVuaW5nIG1yIHR5bGVyIGdvaW5nIGRvd24gPw==",
														"disabled": true
													},
													{
														"key": "x-fapi-financial-id",
														"value": "{{ASPSP_FINANCIAL_ID}}"
													},
													{
														"key": "x-fapi-customer-last-logged-time",
														"value": "Sun, 10 Sep 2017 19:43:31 UTC"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "104.25.212.99"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "93bac548-d2de-4546-b106-880a5018460d"
													},
													{
														"key": "Accept",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"Data\": {\n    \"PaymentId\": \"{{PaymentId}}\",\n    \"Initiation\": {\n      \"InstructionIdentification\": \"ACME412\",\n      \"EndToEndIdentification\": \"FRESCO.21302.GFX.20\",\n      \"InstructedAmount\": {\n        \"Amount\": \"165.88\",\n        \"Currency\": \"GBP\"\n      },\n      \"CreditorAccount\": {\n        \"SchemeName\": \"SortCodeAccountNumber\",\n        \"Identification\": \"08080021325698\",\n        \"Name\": \"ACME Inc\",\n        \"SecondaryIdentification\": \"0002\"\n      },\n      \"RemittanceInformation\": {\n        \"Reference\": \"FRESCO-101\",\n        \"Unstructured\": \"Internal ops code 5120101\"\n      }\n    }\n  },\n  \"Risk\": {\n    \"PaymentContextCode\": \"EcommerceGoods\",\n    \"MerchantCategoryCode\": \"5967\",\n    \"MerchantCustomerIdentification\": \"053598653254\",\n    \"DeliveryAddress\": {\n      \"AddressLine\": [\n        \"Flat 7\",\n        \"Acacia Lodge\"\n      ],\n      \"StreetName\": \"Acacia Avenue\",\n      \"BuildingNumber\": \"27\",\n      \"PostCode\": \"GU31 2ZZ\",\n      \"TownName\": \"Sparsholt\",\n      \"CountySubDivision\": [\n        \"Wessex\"\n      ],\n      \"Country\": \"UK\"\n    }\n  }\n}"
												},
												"url": "{{RS_CreatePaymentSubmission_v2.0}}"
											},
											"status": "Created",
											"code": 201,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Cache-Control",
													"value": "no-cache, no-store, max-age=0, must-revalidate",
													"name": "Cache-Control",
													"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
												},
												{
													"key": "Content-Type",
													"value": "application/json;charset=utf-8",
													"name": "Content-Type",
													"description": "The mime type of this content"
												},
												{
													"key": "Date",
													"value": "Fri, 31 Aug 2018 23:38:12 GMT",
													"name": "Date",
													"description": "The date and time that the message was sent"
												},
												{
													"key": "Expires",
													"value": "0",
													"name": "Expires",
													"description": "Gives the date/time after which the response is considered stale"
												},
												{
													"key": "Pragma",
													"value": "no-cache",
													"name": "Pragma",
													"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
												},
												{
													"key": "Strict-Transport-Security",
													"value": "max-age=31536000 ; includeSubDomains",
													"name": "Strict-Transport-Security",
													"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
												},
												{
													"key": "X-Content-Type-Options",
													"value": "nosniff",
													"name": "X-Content-Type-Options",
													"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
												},
												{
													"key": "X-Frame-Options",
													"value": "DENY",
													"name": "X-Frame-Options",
													"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
												},
												{
													"key": "X-XSS-Protection",
													"value": "1; mode=block",
													"name": "X-XSS-Protection",
													"description": "Cross-site scripting (XSS) filter"
												},
												{
													"key": "transfer-encoding",
													"value": "chunked",
													"name": "transfer-encoding",
													"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
												},
												{
													"key": "x-fapi-interaction-id",
													"value": "93bac548-d2de-4546-b106-880a5018460d",
													"name": "x-fapi-interaction-id",
													"description": "Custom header"
												}
											],
											"cookie": [
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "01",
													"key": "amlbcookie"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
													"key": "iPlanetDirectoryPro"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": true,
													"domain": "rs.aspsp.ob.forgerock.financial",
													"path": "/v1.1",
													"secure": true,
													"value": "34F0FF6ADBE51B4332018415EB8726BF",
													"key": "JSESSIONID"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": true,
													"domain": "rs.aspsp.ob.forgerock.financial",
													"path": "/",
													"secure": true,
													"value": "B165242A9E44929BEB0404056A48E34D",
													"key": "JSESSIONID"
												}
											],
											"body": "{\"Data\":{\"PaymentSubmissionId\":\"764b7ff1-3c92-466a-a3d7-34bbf408a141\",\"PaymentId\":\"Pfda39ef6-c81f-49b6-9100-068fb88bb8d8\",\"Status\":\"AcceptedSettlementInProcess\",\"CreationDateTime\":\"2018-08-31T23:38:12+00:00\"}}"
										}
									]
								},
								{
									"name": "Account Balances Query",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "2732d675-3b62-4e04-8955-43c4531db150",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{access_token_with_consent}}"
											},
											{
												"key": "x-fapi-financial-id",
												"value": "{{ASPSP_FINANCIAL_ID}}"
											},
											{
												"key": "x-fapi-customer-last-logged-time",
												"value": "{{x-fapi-customer-last-logged-time}}"
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "{{x-fapi-customer-ip-address}}"
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{x-fapi-interaction-id}}"
											},
											{
												"key": "Accept",
												"value": "application/json"
											}
										],
										"url": "{{RS_GetAccountBalances_v3.1}}"
									},
									"response": [
										{
											"name": "Payment submission",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Authorization",
														"value": "Bearer {{access_token_with_consent}}"
													},
													{
														"key": "Content-Type",
														"value": "application/json"
													},
													{
														"key": "x-idempotency-key",
														"value": "FRESCO.21302.GFX.20"
													},
													{
														"key": "x-jws-signature",
														"value": "TGlmZSdzIGEgam91cm5leSBub3QgYSBkZXN0aW5hdGlvbiA=..T2ggZ29vZCBldmVuaW5nIG1yIHR5bGVyIGdvaW5nIGRvd24gPw==",
														"disabled": true
													},
													{
														"key": "x-fapi-financial-id",
														"value": "{{ASPSP_FINANCIAL_ID}}"
													},
													{
														"key": "x-fapi-customer-last-logged-time",
														"value": "Sun, 10 Sep 2017 19:43:31 UTC"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "104.25.212.99"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "93bac548-d2de-4546-b106-880a5018460d"
													},
													{
														"key": "Accept",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"Data\": {\n    \"PaymentId\": \"{{PaymentId}}\",\n    \"Initiation\": {\n      \"InstructionIdentification\": \"ACME412\",\n      \"EndToEndIdentification\": \"FRESCO.21302.GFX.20\",\n      \"InstructedAmount\": {\n        \"Amount\": \"165.88\",\n        \"Currency\": \"GBP\"\n      },\n      \"CreditorAccount\": {\n        \"SchemeName\": \"SortCodeAccountNumber\",\n        \"Identification\": \"08080021325698\",\n        \"Name\": \"ACME Inc\",\n        \"SecondaryIdentification\": \"0002\"\n      },\n      \"RemittanceInformation\": {\n        \"Reference\": \"FRESCO-101\",\n        \"Unstructured\": \"Internal ops code 5120101\"\n      }\n    }\n  },\n  \"Risk\": {\n    \"PaymentContextCode\": \"EcommerceGoods\",\n    \"MerchantCategoryCode\": \"5967\",\n    \"MerchantCustomerIdentification\": \"053598653254\",\n    \"DeliveryAddress\": {\n      \"AddressLine\": [\n        \"Flat 7\",\n        \"Acacia Lodge\"\n      ],\n      \"StreetName\": \"Acacia Avenue\",\n      \"BuildingNumber\": \"27\",\n      \"PostCode\": \"GU31 2ZZ\",\n      \"TownName\": \"Sparsholt\",\n      \"CountySubDivision\": [\n        \"Wessex\"\n      ],\n      \"Country\": \"UK\"\n    }\n  }\n}"
												},
												"url": "{{RS_CreatePaymentSubmission_v2.0}}"
											},
											"status": "Created",
											"code": 201,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Cache-Control",
													"value": "no-cache, no-store, max-age=0, must-revalidate",
													"name": "Cache-Control",
													"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
												},
												{
													"key": "Content-Type",
													"value": "application/json;charset=utf-8",
													"name": "Content-Type",
													"description": "The mime type of this content"
												},
												{
													"key": "Date",
													"value": "Fri, 31 Aug 2018 23:38:12 GMT",
													"name": "Date",
													"description": "The date and time that the message was sent"
												},
												{
													"key": "Expires",
													"value": "0",
													"name": "Expires",
													"description": "Gives the date/time after which the response is considered stale"
												},
												{
													"key": "Pragma",
													"value": "no-cache",
													"name": "Pragma",
													"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
												},
												{
													"key": "Strict-Transport-Security",
													"value": "max-age=31536000 ; includeSubDomains",
													"name": "Strict-Transport-Security",
													"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
												},
												{
													"key": "X-Content-Type-Options",
													"value": "nosniff",
													"name": "X-Content-Type-Options",
													"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
												},
												{
													"key": "X-Frame-Options",
													"value": "DENY",
													"name": "X-Frame-Options",
													"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
												},
												{
													"key": "X-XSS-Protection",
													"value": "1; mode=block",
													"name": "X-XSS-Protection",
													"description": "Cross-site scripting (XSS) filter"
												},
												{
													"key": "transfer-encoding",
													"value": "chunked",
													"name": "transfer-encoding",
													"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
												},
												{
													"key": "x-fapi-interaction-id",
													"value": "93bac548-d2de-4546-b106-880a5018460d",
													"name": "x-fapi-interaction-id",
													"description": "Custom header"
												}
											],
											"cookie": [
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "01",
													"key": "amlbcookie"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
													"key": "iPlanetDirectoryPro"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": true,
													"domain": "rs.aspsp.ob.forgerock.financial",
													"path": "/v1.1",
													"secure": true,
													"value": "34F0FF6ADBE51B4332018415EB8726BF",
													"key": "JSESSIONID"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": true,
													"domain": "rs.aspsp.ob.forgerock.financial",
													"path": "/",
													"secure": true,
													"value": "B165242A9E44929BEB0404056A48E34D",
													"key": "JSESSIONID"
												}
											],
											"body": "{\"Data\":{\"PaymentSubmissionId\":\"764b7ff1-3c92-466a-a3d7-34bbf408a141\",\"PaymentId\":\"Pfda39ef6-c81f-49b6-9100-068fb88bb8d8\",\"Status\":\"AcceptedSettlementInProcess\",\"CreationDateTime\":\"2018-08-31T23:38:12+00:00\"}}"
										}
									]
								},
								{
									"name": "Account Transactions Query",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "a32a79cf-dc72-46c8-89fa-27cda21b1858",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{access_token_with_consent}}"
											},
											{
												"key": "x-fapi-financial-id",
												"value": "{{ASPSP_FINANCIAL_ID}}"
											},
											{
												"key": "x-fapi-customer-last-logged-time",
												"value": "{{x-fapi-customer-last-logged-time}}"
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "{{x-fapi-customer-ip-address}}"
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{x-fapi-interaction-id}}"
											},
											{
												"key": "Accept",
												"value": "application/json"
											}
										],
										"url": "{{RS_GetAccountTransactions_v3.1}}"
									},
									"response": [
										{
											"name": "Payment submission",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Authorization",
														"value": "Bearer {{access_token_with_consent}}"
													},
													{
														"key": "Content-Type",
														"value": "application/json"
													},
													{
														"key": "x-idempotency-key",
														"value": "FRESCO.21302.GFX.20"
													},
													{
														"key": "x-jws-signature",
														"value": "TGlmZSdzIGEgam91cm5leSBub3QgYSBkZXN0aW5hdGlvbiA=..T2ggZ29vZCBldmVuaW5nIG1yIHR5bGVyIGdvaW5nIGRvd24gPw==",
														"disabled": true
													},
													{
														"key": "x-fapi-financial-id",
														"value": "{{ASPSP_FINANCIAL_ID}}"
													},
													{
														"key": "x-fapi-customer-last-logged-time",
														"value": "Sun, 10 Sep 2017 19:43:31 UTC"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "104.25.212.99"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "93bac548-d2de-4546-b106-880a5018460d"
													},
													{
														"key": "Accept",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"Data\": {\n    \"PaymentId\": \"{{PaymentId}}\",\n    \"Initiation\": {\n      \"InstructionIdentification\": \"ACME412\",\n      \"EndToEndIdentification\": \"FRESCO.21302.GFX.20\",\n      \"InstructedAmount\": {\n        \"Amount\": \"165.88\",\n        \"Currency\": \"GBP\"\n      },\n      \"CreditorAccount\": {\n        \"SchemeName\": \"SortCodeAccountNumber\",\n        \"Identification\": \"08080021325698\",\n        \"Name\": \"ACME Inc\",\n        \"SecondaryIdentification\": \"0002\"\n      },\n      \"RemittanceInformation\": {\n        \"Reference\": \"FRESCO-101\",\n        \"Unstructured\": \"Internal ops code 5120101\"\n      }\n    }\n  },\n  \"Risk\": {\n    \"PaymentContextCode\": \"EcommerceGoods\",\n    \"MerchantCategoryCode\": \"5967\",\n    \"MerchantCustomerIdentification\": \"053598653254\",\n    \"DeliveryAddress\": {\n      \"AddressLine\": [\n        \"Flat 7\",\n        \"Acacia Lodge\"\n      ],\n      \"StreetName\": \"Acacia Avenue\",\n      \"BuildingNumber\": \"27\",\n      \"PostCode\": \"GU31 2ZZ\",\n      \"TownName\": \"Sparsholt\",\n      \"CountySubDivision\": [\n        \"Wessex\"\n      ],\n      \"Country\": \"UK\"\n    }\n  }\n}"
												},
												"url": "{{RS_CreatePaymentSubmission_v2.0}}"
											},
											"status": "Created",
											"code": 201,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Cache-Control",
													"value": "no-cache, no-store, max-age=0, must-revalidate",
													"name": "Cache-Control",
													"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
												},
												{
													"key": "Content-Type",
													"value": "application/json;charset=utf-8",
													"name": "Content-Type",
													"description": "The mime type of this content"
												},
												{
													"key": "Date",
													"value": "Fri, 31 Aug 2018 23:38:12 GMT",
													"name": "Date",
													"description": "The date and time that the message was sent"
												},
												{
													"key": "Expires",
													"value": "0",
													"name": "Expires",
													"description": "Gives the date/time after which the response is considered stale"
												},
												{
													"key": "Pragma",
													"value": "no-cache",
													"name": "Pragma",
													"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
												},
												{
													"key": "Strict-Transport-Security",
													"value": "max-age=31536000 ; includeSubDomains",
													"name": "Strict-Transport-Security",
													"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
												},
												{
													"key": "X-Content-Type-Options",
													"value": "nosniff",
													"name": "X-Content-Type-Options",
													"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
												},
												{
													"key": "X-Frame-Options",
													"value": "DENY",
													"name": "X-Frame-Options",
													"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
												},
												{
													"key": "X-XSS-Protection",
													"value": "1; mode=block",
													"name": "X-XSS-Protection",
													"description": "Cross-site scripting (XSS) filter"
												},
												{
													"key": "transfer-encoding",
													"value": "chunked",
													"name": "transfer-encoding",
													"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
												},
												{
													"key": "x-fapi-interaction-id",
													"value": "93bac548-d2de-4546-b106-880a5018460d",
													"name": "x-fapi-interaction-id",
													"description": "Custom header"
												}
											],
											"cookie": [
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "01",
													"key": "amlbcookie"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": false,
													"domain": "ob.forgerock.financial",
													"path": "/",
													"secure": false,
													"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
													"key": "iPlanetDirectoryPro"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": true,
													"domain": "rs.aspsp.ob.forgerock.financial",
													"path": "/v1.1",
													"secure": true,
													"value": "34F0FF6ADBE51B4332018415EB8726BF",
													"key": "JSESSIONID"
												},
												{
													"expires": "Invalid Date",
													"httpOnly": true,
													"domain": "rs.aspsp.ob.forgerock.financial",
													"path": "/",
													"secure": true,
													"value": "B165242A9E44929BEB0404056A48E34D",
													"key": "JSESSIONID"
												}
											],
											"body": "{\"Data\":{\"PaymentSubmissionId\":\"764b7ff1-3c92-466a-a3d7-34bbf408a141\",\"PaymentId\":\"Pfda39ef6-c81f-49b6-9100-068fb88bb8d8\",\"Status\":\"AcceptedSettlementInProcess\",\"CreationDateTime\":\"2018-08-31T23:38:12+00:00\"}}"
										}
									]
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "0a6a13ca-46c0-4816-a8c7-e2bbfde2fa98",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "b25252c3-3837-4e13-85d8-9269deae865c",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Domestic Payments",
					"item": [
						{
							"name": "Domestic single payment",
							"item": [
								{
									"name": "Payment preparation",
									"item": [
										{
											"name": "Generate client credential JWT",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"id": "b775f00e-e0d9-4026-aaf4-7cb424f42ff3",
														"exec": [
															"postman.setEnvironmentVariable('exp',(new Date().getTime() / 1000) + 60*5);",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"id": "4f215a77-3dc3-4530-a2b1-48bb2a7875ac",
														"exec": [
															"postman.setEnvironmentVariable(\"client_credential_jwt\", responseBody);",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json"
													},
													{
														"key": "issuerId",
														"value": "{{CLIENT_ID}}"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"sub\": \"{{CLIENT_ID}}\",\n  \"exp\": {{exp}},\n  \"aud\": \"{{AS_ISSUER_ID}}\"\n}"
												},
												"url": "{{JWKMS}}/api/crypto/signClaims"
											},
											"response": [
												{
													"name": "Generate client credential JWT",
													"originalRequest": {
														"method": "POST",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/json"
															},
															{
																"key": "issuerId",
																"value": "{{CLIENT_ID}}"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{\n  \"sub\": \"{{CLIENT_ID}}\",\n  \"exp\": {{exp}},\n  \"aud\": \"{{AS_ISSUER_ID}}\"\n}\n"
														},
														"url": "{{JWKMS}}/api/crypto/signClaims"
													},
													"status": "OK",
													"code": 200,
													"_postman_previewlanguage": "plain",
													"header": [
														{
															"key": "Cache-Control",
															"value": "no-cache, no-store, max-age=0, must-revalidate",
															"name": "Cache-Control",
															"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
														},
														{
															"key": "Content-Length",
															"value": "754",
															"name": "Content-Length",
															"description": "The length of the response body in octets (8-bit bytes)"
														},
														{
															"key": "Content-Type",
															"value": "text/plain;charset=UTF-8",
															"name": "Content-Type",
															"description": "The mime type of this content"
														},
														{
															"key": "Date",
															"value": "Fri, 31 Aug 2018 23:36:18 GMT",
															"name": "Date",
															"description": "The date and time that the message was sent"
														},
														{
															"key": "Expires",
															"value": "0",
															"name": "Expires",
															"description": "Gives the date/time after which the response is considered stale"
														},
														{
															"key": "Pragma",
															"value": "no-cache",
															"name": "Pragma",
															"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
														},
														{
															"key": "Strict-Transport-Security",
															"value": "max-age=31536000 ; includeSubDomains",
															"name": "Strict-Transport-Security",
															"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
														},
														{
															"key": "X-Content-Type-Options",
															"value": "nosniff",
															"name": "X-Content-Type-Options",
															"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
														},
														{
															"key": "X-Frame-Options",
															"value": "DENY",
															"name": "X-Frame-Options",
															"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
														},
														{
															"key": "X-XSS-Protection",
															"value": "1; mode=block",
															"name": "X-XSS-Protection",
															"description": "Cross-site scripting (XSS) filter"
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "363428fd-fc40-46a2-9c94-8a0fa0ce689c",
															"name": "x-fapi-interaction-id",
															"description": "Custom header"
														}
													],
													"cookie": [
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "01",
															"key": "amlbcookie"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
															"key": "iPlanetDirectoryPro"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": true,
															"domain": "jwkms.ob.forgerock.financial",
															"path": "/",
															"secure": true,
															"value": "C1841FA66D4D02E37604752448B582F9",
															"key": "JSESSIONID"
														}
													],
													"body": "eyJraWQiOiIwNzIyMjMwYy0zMjMyLTQ3MjUtODY0Yy01Njg4NDQ5YmM3ZjYiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI5MWMzYzUxNy05ZGI2LTQxN2UtOGIwNS04YjExODhmN2EyZDYiLCJhdWQiOiJodHRwczpcL1wvbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbFwvb2F1dGgyXC9vcGVuYmFua2luZyIsImlzcyI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImV4cCI6MTUzNTc1ODg3OCwiaWF0IjoxNTM1NzU4NTc4LCJqdGkiOiJkMTFlMDg3Ni01ZjQxLTQwNjUtYWQwMi1mMzYxNGU5ZjllY2IifQ.f8OT4Q-pRcTAzqkfQJ7QWCPznTCqUUpWwTzAtevD53Bc8kdfAEQi4pQtJmHDd8_eH4vX_ebWzvT7rVcW3H0dcJ3Ju_ugKYtskYaDdy-E5RU4425N5JMj9pTwT0RcPPKfpHL9SUTgVLYeeHwTvKi812RVhHzawrhE6TpHzO6lYpPIueqRjY0B_INbYt3rSb_EHoFsm_RelaMEwzuRqqhZfwbtZJxYiPRFNm5NlK9E7SXtc1669oAt7E8UbV5XOWELGVfhgUWXuUuT882mFz7th5gkhKGo5q-QWNOE1Swy9Hiq-HLqDmNfXle97nWX1r7fyKJ_E_GoLqxVMWzpmVky7Q"
												}
											]
										},
										{
											"name": "OAuth2 Client Credential Grant",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "36e856c7-c8d2-4091-bc9b-0632a796c248",
														"exec": [
															"var data = JSON.parse(responseBody);",
															"",
															"postman.setEnvironmentVariable(\"access_token\", data.access_token);",
															"postman.setEnvironmentVariable(\"id_token\", data.id_token);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "grant_type",
															"value": "client_credentials",
															"type": "text"
														},
														{
															"key": "scope",
															"value": "payments",
															"type": "text"
														},
														{
															"key": "client_assertion_type",
															"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
															"type": "text"
														},
														{
															"key": "client_assertion",
															"value": "{{client_credential_jwt}}",
															"type": "text"
														}
													]
												},
												"url": "{{AS_token_endpoint}}"
											},
											"response": [
												{
													"name": "Client credential",
													"originalRequest": {
														"method": "POST",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/x-www-form-urlencoded"
															}
														],
														"body": {
															"mode": "urlencoded",
															"urlencoded": [
																{
																	"key": "grant_type",
																	"value": "client_credentials",
																	"type": "text"
																},
																{
																	"key": "scope",
																	"value": "openid accounts payments",
																	"type": "text"
																},
																{
																	"key": "client_assertion_type",
																	"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
																	"type": "text"
																},
																{
																	"key": "client_assertion",
																	"value": "{{client_credential_jwt}}",
																	"type": "text"
																}
															]
														},
														"url": "{{AS_token_endpoint}}"
													},
													"status": "OK",
													"code": 200,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "Accept-Ranges",
															"value": "bytes",
															"name": "Accept-Ranges",
															"description": "Content-Types that are acceptable"
														},
														{
															"key": "Cache-Control",
															"value": "no-store",
															"name": "Cache-Control",
															"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
														},
														{
															"key": "Content-Type",
															"value": "application/json",
															"name": "Content-Type",
															"description": "The mime type of this content"
														},
														{
															"key": "Date",
															"value": "Fri, 31 Aug 2018 23:36:21 GMT",
															"name": "Date",
															"description": "The date and time that the message was sent"
														},
														{
															"key": "Pragma",
															"value": "no-cache",
															"name": "Pragma",
															"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
														},
														{
															"key": "Server",
															"value": "Restlet-Framework/2.3.4",
															"name": "Server",
															"description": "A name for the server"
														},
														{
															"key": "Strict-Transport-Security",
															"value": "max-age=31536000; includeSubdomains; preload",
															"name": "Strict-Transport-Security",
															"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
														},
														{
															"key": "Vary",
															"value": "Accept-Charset, Accept-Encoding, Accept-Language, Accept",
															"name": "Vary",
															"description": "Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server."
														},
														{
															"key": "X-Content-Type-Options",
															"value": "nosniff",
															"name": "X-Content-Type-Options",
															"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
														},
														{
															"key": "X-Frame-Options",
															"value": "DENY",
															"name": "X-Frame-Options",
															"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
														},
														{
															"key": "transfer-encoding",
															"value": "chunked",
															"name": "transfer-encoding",
															"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "34e999b0-8754-4952-9e7b-ddc137facc63",
															"name": "x-fapi-interaction-id",
															"description": "Custom header"
														}
													],
													"cookie": [
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "01",
															"key": "amlbcookie"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
															"key": "iPlanetDirectoryPro"
														}
													],
													"body": "{\"access_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiI5MWMzYzUxNy05ZGI2LTQxN2UtOGIwNS04YjExODhmN2EyZDYiLCJhdWRpdFRyYWNraW5nSWQiOiIyMjMxYmMyOS00MjBkLTRlM2QtYjEwNC00ZDBjMDNlNGIyM2MiLCJpc3MiOiJodHRwczovL21hdGxzLmFzLmFzcHNwLm9iLmZvcmdlcm9jay5maW5hbmNpYWwvb2F1dGgyL29wZW5iYW5raW5nIiwidG9rZW5OYW1lIjoiYWNjZXNzX3Rva2VuIiwidG9rZW5fdHlwZSI6IkJlYXJlciIsImF1dGhHcmFudElkIjoiZjIyOTEyM2UtMDM5Yi00M2YxLThjOTctYmM0YWJkNmI0OWE5IiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwibmJmIjoxNTM1NzU4NTgxLCJncmFudF90eXBlIjoiY2xpZW50X2NyZWRlbnRpYWxzIiwic2NvcGUiOlsib3BlbmlkIiwicGF5bWVudHMiLCJhY2NvdW50cyJdLCJhdXRoX3RpbWUiOjE1MzU3NTg1ODEsInJlYWxtIjoiL29wZW5iYW5raW5nIiwiZXhwIjoxNTM1ODQ0OTgxLCJpYXQiOjE1MzU3NTg1ODEsImV4cGlyZXNfaW4iOjg2NDAwLCJqdGkiOiIwMWJiYmI3OS1kNTM2LTQ0ODMtYjkyMi1jMDk0NDdlMDc1MjcifQ.XUCjoPXgzZjfsy8mwFTAvsTPE9UZZ15YxTK3K4aQQDkTTIKJdjG6b1t899qtPE5ACOhHneGhoOLIPdqXf361lQ\",\"scope\":\"openid payments accounts\",\"id_token\":\"eyJ0eXAiOiJKV1QiLCJraWQiOiJiL082T3ZWdjEreStXZ3JINVVpOVdUaW9MdDA9IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoiR3FGWDl0X3N3OXFGQms0U0NMYmljZyIsInN1YiI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImF1ZGl0VHJhY2tpbmdJZCI6IjA5MDFlY2FmLWEwMDgtNDU3Mi04ZDg0LTMwYmRmYzQ1NGMxNi0zMTk1OTQ4IiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6ImlkX3Rva2VuIiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXpwIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXV0aF90aW1lIjoxNTM1NzU4NTgxLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTUzNTg0NDk4MSwidG9rZW5UeXBlIjoiSldUVG9rZW4iLCJpYXQiOjE1MzU3NTg1ODF9.jRmirrBixjkJ_eQa3qxXSdHAaX47b54x63Zjx2039cH4i2P24TYSFtIL8fyPxysESZKPq-vkMsYSQhaCZ8ZLIT8iEbkKBZo8OYa8THoqpMclgsK9y86umj7vY68HT2vmOQdJAfMEKhlTl0Vcye2j7M43rzjgA-3vP41YMnR2_0SYBJEOekpaZJpxcgJH4jAlGak7bmntZc36JHmWi_-uIifKKkeVsGIdGKNqWkFEuYsWcPhBY07Ka94KOFa8CNny_S5UMZYLRXa7OHjaKzu8h_-zL8h9iCrcYEL1nq-ajiNwouQRICSBQ7HE9pMaTBdPHHKRBOUihr1SfMnNM_6bAQ\",\"token_type\":\"Bearer\",\"expires_in\":86399}"
												}
											]
										},
										{
											"name": "Create Domestic Payment Intent - without Debtor",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "3cc4148d-b69c-4aaa-89d8-048ca84c92fa",
														"exec": [
															"var data = JSON.parse(responseBody);",
															"",
															"postman.setEnvironmentVariable(\"IntentId\", data.Data.ConsentId);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													},
													{
														"key": "Authorization",
														"type": "text",
														"value": "Bearer {{access_token}}"
													},
													{
														"key": "Accept",
														"value": "application/json",
														"type": "text"
													},
													{
														"key": "x-idempotency-key",
														"value": "{{x-idempotency-key}}",
														"type": "text"
													},
													{
														"key": "x-jws-signature",
														"value": "{{x-jws-signature}}",
														"type": "text"
													},
													{
														"key": "x-fapi-financial-id",
														"value": "{{x-fapi-financial-id}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-last-logged-time",
														"value": "{{x-fapi-customer-last-logged-time}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "{{x-fapi-customer-ip-address}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{x-fapi-interaction-id}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n  \"Data\": {\r\n    \"Initiation\": {\r\n      \"InstructionIdentification\": \"ACME412\",\r\n      \"EndToEndIdentification\": \"FRESCO.21302.GFX.20\",\r\n      \"InstructedAmount\": {\r\n        \"Amount\": \"165.88\",\r\n        \"Currency\": \"GBP\"\r\n      },\r\n      \"CreditorAccount\": {\r\n        \"SchemeName\": \"UK.OBIE.SortCodeAccountNumber\",\r\n        \"Identification\": \"08080021325698\",\r\n        \"Name\": \"ACME Inc\",\r\n        \"SecondaryIdentification\": \"0002\"\r\n      },\r\n      \"RemittanceInformation\": {\r\n        \"Reference\": \"FRESCO-101\",\r\n        \"Unstructured\": \"Internal ops code 5120101\"\r\n      }\r\n    }\r\n  },\r\n  \"Risk\": {\r\n    \"PaymentContextCode\": \"EcommerceGoods\",\r\n    \"MerchantCategoryCode\": \"5967\",\r\n    \"MerchantCustomerIdentification\": \"053598653254\",\r\n    \"DeliveryAddress\": {\r\n      \"AddressLine\": [\r\n        \"Flat 7\",\r\n        \"Acacia Lodge\"\r\n      ],\r\n      \"StreetName\": \"Acacia Avenue\",\r\n      \"BuildingNumber\": \"27\",\r\n      \"PostCode\": \"GU31 2ZZ\",\r\n      \"TownName\": \"Sparsholt\",\r\n      \"CountySubDivision\": [\r\n        \"Wessex\"\r\n      ],\r\n      \"Country\": \"UK\"\r\n    }\r\n  }\r\n}"
												},
												"url": "{{RS_CreateDomesticPaymentConsent_v3.1}}"
											},
											"response": []
										},
										{
											"name": "Create Domestic Payment Intent - with Debtor",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "1abfff1a-fd03-47e5-bb32-ce4b37135595",
														"exec": [
															"var data = JSON.parse(responseBody);",
															"",
															"postman.setEnvironmentVariable(\"IntentId\", data.Data.ConsentId);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"name": "Content-Type",
														"type": "text",
														"value": "application/json"
													},
													{
														"key": "Authorization",
														"type": "text",
														"value": "Bearer {{access_token}}"
													},
													{
														"key": "Accept",
														"value": "application/json",
														"type": "text"
													},
													{
														"key": "x-idempotency-key",
														"value": "{{x-idempotency-key}}",
														"type": "text"
													},
													{
														"key": "x-jws-signature",
														"value": "{{x-jws-signature}}",
														"type": "text"
													},
													{
														"key": "x-fapi-financial-id",
														"value": "{{x-fapi-financial-id}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-last-logged-time",
														"value": "{{x-fapi-customer-last-logged-time}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "{{x-fapi-customer-ip-address}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n  \"Data\": {\r\n    \"Initiation\": {\r\n      \"InstructionIdentification\": \"ACME412\",\r\n      \"EndToEndIdentification\": \"FRESCO.21302.GFX.20\",\r\n      \"InstructedAmount\": {\r\n        \"Amount\": \"165.88\",\r\n        \"Currency\": \"GBP\"\r\n      },\r\n      \"CreditorAccount\": {\r\n        \"SchemeName\": \"UK.OBIE.SortCodeAccountNumber\",\r\n        \"Identification\": \"08080021325698\",\r\n        \"Name\": \"ACME Inc\",\r\n        \"SecondaryIdentification\": \"0002\"\r\n      },\r\n      \"DebtorAccount\": {\r\n        \"SchemeName\": \"UK.OBIE.SortCodeAccountNumber\",\r\n        \"Identification\": \"08080021312345\",\r\n        \"Name\": \"ACME Inc\",\r\n        \"SecondaryIdentification\": \"0003\"\r\n      },\r\n      \"RemittanceInformation\": {\r\n        \"Reference\": \"FRESCO-101\",\r\n        \"Unstructured\": \"Internal ops code 5120101\"\r\n      }\r\n    }\r\n  },\r\n  \"Risk\": {\r\n    \"PaymentContextCode\": \"EcommerceGoods\",\r\n    \"MerchantCategoryCode\": \"5967\",\r\n    \"MerchantCustomerIdentification\": \"053598653254\",\r\n    \"DeliveryAddress\": {\r\n      \"AddressLine\": [\r\n        \"Flat 7\",\r\n        \"Acacia Lodge\"\r\n      ],\r\n      \"StreetName\": \"Acacia Avenue\",\r\n      \"BuildingNumber\": \"27\",\r\n      \"PostCode\": \"GU31 2ZZ\",\r\n      \"TownName\": \"Sparsholt\",\r\n      \"CountySubDivision\": [\r\n        \"Wessex\"\r\n      ],\r\n      \"Country\": \"UK\"\r\n    }\r\n  }\r\n}"
												},
												"url": "{{RS_CreateDomesticPaymentConsent_v3.1}}"
											},
											"response": []
										},
										{
											"name": "Get Domestic Payment ConsentId",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "91f3d2d3-e41f-47b7-b8ae-0eefde9542f8",
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"protocolProfileBehavior": {
												"disableBodyPruning": true
											},
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "Authorization",
														"value": "Bearer {{access_token}}"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													},
													{
														"key": "Accept",
														"value": "application/json"
													},
													{
														"key": "x-fapi-financial-id",
														"value": "{{x-fapi-financial-id}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-last-logged-time",
														"value": "{{x-fapi-customer-last-logged-time}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "{{x-fapi-customer-ip-address}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{x-fapi-interaction-id}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": ""
												},
												"url": "{{RS_GetDomesticPaymentConsent_v3.1}}"
											},
											"response": [
												{
													"name": "Payment submission",
													"originalRequest": {
														"method": "POST",
														"header": [
															{
																"key": "Authorization",
																"value": "Bearer {{access_token_with_consent}}"
															},
															{
																"key": "Content-Type",
																"value": "application/json"
															},
															{
																"key": "x-idempotency-key",
																"value": "FRESCO.21302.GFX.20"
															},
															{
																"key": "x-jws-signature",
																"value": "TGlmZSdzIGEgam91cm5leSBub3QgYSBkZXN0aW5hdGlvbiA=..T2ggZ29vZCBldmVuaW5nIG1yIHR5bGVyIGdvaW5nIGRvd24gPw==",
																"disabled": true
															},
															{
																"key": "x-fapi-financial-id",
																"value": "{{ASPSP_FINANCIAL_ID}}"
															},
															{
																"key": "x-fapi-customer-last-logged-time",
																"value": "Sun, 10 Sep 2017 19:43:31 UTC"
															},
															{
																"key": "x-fapi-customer-ip-address",
																"value": "104.25.212.99"
															},
															{
																"key": "x-fapi-interaction-id",
																"value": "93bac548-d2de-4546-b106-880a5018460d"
															},
															{
																"key": "Accept",
																"value": "application/json"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{\n  \"Data\": {\n    \"PaymentId\": \"{{PaymentId}}\",\n    \"Initiation\": {\n      \"InstructionIdentification\": \"ACME412\",\n      \"EndToEndIdentification\": \"FRESCO.21302.GFX.20\",\n      \"InstructedAmount\": {\n        \"Amount\": \"165.88\",\n        \"Currency\": \"GBP\"\n      },\n      \"CreditorAccount\": {\n        \"SchemeName\": \"SortCodeAccountNumber\",\n        \"Identification\": \"08080021325698\",\n        \"Name\": \"ACME Inc\",\n        \"SecondaryIdentification\": \"0002\"\n      },\n      \"RemittanceInformation\": {\n        \"Reference\": \"FRESCO-101\",\n        \"Unstructured\": \"Internal ops code 5120101\"\n      }\n    }\n  },\n  \"Risk\": {\n    \"PaymentContextCode\": \"EcommerceGoods\",\n    \"MerchantCategoryCode\": \"5967\",\n    \"MerchantCustomerIdentification\": \"053598653254\",\n    \"DeliveryAddress\": {\n      \"AddressLine\": [\n        \"Flat 7\",\n        \"Acacia Lodge\"\n      ],\n      \"StreetName\": \"Acacia Avenue\",\n      \"BuildingNumber\": \"27\",\n      \"PostCode\": \"GU31 2ZZ\",\n      \"TownName\": \"Sparsholt\",\n      \"CountySubDivision\": [\n        \"Wessex\"\n      ],\n      \"Country\": \"UK\"\n    }\n  }\n}"
														},
														"url": "{{RS_CreatePaymentSubmission_v2.0}}"
													},
													"status": "Created",
													"code": 201,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "Cache-Control",
															"value": "no-cache, no-store, max-age=0, must-revalidate",
															"name": "Cache-Control",
															"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
														},
														{
															"key": "Content-Type",
															"value": "application/json;charset=utf-8",
															"name": "Content-Type",
															"description": "The mime type of this content"
														},
														{
															"key": "Date",
															"value": "Fri, 31 Aug 2018 23:38:12 GMT",
															"name": "Date",
															"description": "The date and time that the message was sent"
														},
														{
															"key": "Expires",
															"value": "0",
															"name": "Expires",
															"description": "Gives the date/time after which the response is considered stale"
														},
														{
															"key": "Pragma",
															"value": "no-cache",
															"name": "Pragma",
															"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
														},
														{
															"key": "Strict-Transport-Security",
															"value": "max-age=31536000 ; includeSubDomains",
															"name": "Strict-Transport-Security",
															"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
														},
														{
															"key": "X-Content-Type-Options",
															"value": "nosniff",
															"name": "X-Content-Type-Options",
															"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
														},
														{
															"key": "X-Frame-Options",
															"value": "DENY",
															"name": "X-Frame-Options",
															"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
														},
														{
															"key": "X-XSS-Protection",
															"value": "1; mode=block",
															"name": "X-XSS-Protection",
															"description": "Cross-site scripting (XSS) filter"
														},
														{
															"key": "transfer-encoding",
															"value": "chunked",
															"name": "transfer-encoding",
															"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "93bac548-d2de-4546-b106-880a5018460d",
															"name": "x-fapi-interaction-id",
															"description": "Custom header"
														}
													],
													"cookie": [
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "01",
															"key": "amlbcookie"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
															"key": "iPlanetDirectoryPro"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": true,
															"domain": "rs.aspsp.ob.forgerock.financial",
															"path": "/v1.1",
															"secure": true,
															"value": "34F0FF6ADBE51B4332018415EB8726BF",
															"key": "JSESSIONID"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": true,
															"domain": "rs.aspsp.ob.forgerock.financial",
															"path": "/",
															"secure": true,
															"value": "B165242A9E44929BEB0404056A48E34D",
															"key": "JSESSIONID"
														}
													],
													"body": "{\"Data\":{\"PaymentSubmissionId\":\"764b7ff1-3c92-466a-a3d7-34bbf408a141\",\"PaymentId\":\"Pfda39ef6-c81f-49b6-9100-068fb88bb8d8\",\"Status\":\"AcceptedSettlementInProcess\",\"CreationDateTime\":\"2018-08-31T23:38:12+00:00\"}}"
												}
											]
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "Auth & Consent",
									"item": [
										{
											"name": "Generate Redirect URL - Visualize",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"id": "291beb62-c39e-46f1-bbdd-6b133214ed05",
														"exec": [
															"postman.setEnvironmentVariable('exp',(new Date().getTime() / 1000) + 60*30);",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"id": "208a8fce-97c6-41d0-97ad-c436731a49c8",
														"exec": [
															"postman.setEnvironmentVariable(\"request_parameter\", responseBody);",
															"pm.visualizer.set(\"<a>\" +",
															"    pm.environment.get(\"AS_authorization_endpoint\") + ",
															"    \"?client_id=\" + pm.environment.get(\"CLIENT_ID\") + ",
															"    \"&response_type=code id_token&redirect_uri=\" + pm.environment.get(\"CLIENT_REDIRECT_URI\") + ",
															"    \"&scope=accounts openid&state=10d260bf-a7d9-444a-92d9-7b7a5f088208&nonce=10d260bf-a7d9-444a-92d9-7b7a5f088208&request=\" + ",
															"    pm.environment.get(\"request_parameter\") +",
															"    \"</a>\"",
															");",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json"
													},
													{
														"key": "jwkUri",
														"value": "{{AS_JWK_URI}}"
													},
													{
														"key": "issuerId",
														"value": "{{CLIENT_ID}}"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"aud\": \"{{AS_ISSUER_ID}}\",\n  \"scope\": \"openid payments\",\n  \"iss\": \"{{CLIENT_ID}}\",\n  \"claims\": {\n    \"id_token\": {\n      \"acr\": {\n        \"value\": \"urn:openbanking:psd2:ca\",\n        \"essential\": true\n      },\n      \"openbanking_intent_id\": {\n        \"value\": \"{{IntentId}}\",\n        \"essential\": true\n      }\n    }\n  },\n  \"response_type\": \"code id_token\",\n  \"redirect_uri\": \"{{CLIENT_REDIRECT_URI}}\",\n  \"state\": \"10d260bf-a7d9-444a-92d9-7b7a5f088208\",\n  \"exp\": {{exp}},\n  \"nonce\": \"10d260bf-a7d9-444a-92d9-7b7a5f088208\",\n  \"client_id\": \"{{CLIENT_ID}}\"\n}"
												},
												"url": "{{JWKMS}}/api/crypto/signClaims"
											},
											"response": [
												{
													"name": "Generate request parameter",
													"originalRequest": {
														"method": "POST",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/json"
															},
															{
																"key": "jwkUri",
																"value": "{{AS_JWK_URI}}"
															},
															{
																"key": "issuerId",
																"value": "{{CLIENT_ID}}"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{\n  \"aud\": \"{{AS_ISSUER_ID}}\",\n  \"scope\": \"openid accounts payments\",\n  \"iss\": \"{{CLIENT_ID}}\",\n  \"claims\": {\n    \"id_token\": {\n      \"acr\": {\n        \"value\": \"urn:openbanking:psd2:sca\",\n        \"essential\": true\n      },\n      \"openbanking_intent_id\": {\n        \"value\": \"{{PaymentId}}\",\n        \"essential\": true\n      }\n    },\n    \"userinfo\": {\n      \"openbanking_intent_id\": {\n        \"value\": \"{{PaymentId}}\",\n        \"essential\": true\n      }\n    }\n  },\n  \"response_type\": \"code id_token\",\n  \"redirect_uri\": \"{{CLIENT_REDIRECT_URI}}\",\n  \"state\": \"10d260bf-a7d9-444a-92d9-7b7a5f088208\",\n  \"exp\": {{exp}},\n  \"nonce\": \"10d260bf-a7d9-444a-92d9-7b7a5f088208\",\n  \"client_id\": \"{{CLIENT_ID}}\"\n}"
														},
														"url": "{{JWKMS}}/api/crypto/signClaims"
													},
													"status": "OK",
													"code": 200,
													"_postman_previewlanguage": "plain",
													"header": [
														{
															"key": "Cache-Control",
															"value": "no-cache, no-store, max-age=0, must-revalidate",
															"name": "Cache-Control",
															"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
														},
														{
															"key": "Content-Length",
															"value": "1410",
															"name": "Content-Length",
															"description": "The length of the response body in octets (8-bit bytes)"
														},
														{
															"key": "Content-Type",
															"value": "text/plain;charset=UTF-8",
															"name": "Content-Type",
															"description": "The mime type of this content"
														},
														{
															"key": "Date",
															"value": "Fri, 31 Aug 2018 23:36:28 GMT",
															"name": "Date",
															"description": "The date and time that the message was sent"
														},
														{
															"key": "Expires",
															"value": "0",
															"name": "Expires",
															"description": "Gives the date/time after which the response is considered stale"
														},
														{
															"key": "Pragma",
															"value": "no-cache",
															"name": "Pragma",
															"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
														},
														{
															"key": "Strict-Transport-Security",
															"value": "max-age=31536000 ; includeSubDomains",
															"name": "Strict-Transport-Security",
															"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
														},
														{
															"key": "X-Content-Type-Options",
															"value": "nosniff",
															"name": "X-Content-Type-Options",
															"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
														},
														{
															"key": "X-Frame-Options",
															"value": "DENY",
															"name": "X-Frame-Options",
															"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
														},
														{
															"key": "X-XSS-Protection",
															"value": "1; mode=block",
															"name": "X-XSS-Protection",
															"description": "Cross-site scripting (XSS) filter"
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "2e4e1f3f-6d9d-4c8b-be7c-23b6622a39c1",
															"name": "x-fapi-interaction-id",
															"description": "Custom header"
														}
													],
													"cookie": [
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "01",
															"key": "amlbcookie"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
															"key": "iPlanetDirectoryPro"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": true,
															"domain": "jwkms.ob.forgerock.financial",
															"path": "/",
															"secure": true,
															"value": "C1841FA66D4D02E37604752448B582F9",
															"key": "JSESSIONID"
														}
													],
													"body": "eyJraWQiOiIwNzIyMjMwYy0zMjMyLTQ3MjUtODY0Yy01Njg4NDQ5YmM3ZjYiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiJodHRwczpcL1wvbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbFwvb2F1dGgyXC9vcGVuYmFua2luZyIsInNjb3BlIjoib3BlbmlkIGFjY291bnRzIHBheW1lbnRzIiwiaXNzIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiY2xhaW1zIjp7ImlkX3Rva2VuIjp7ImFjciI6eyJ2YWx1ZSI6InVybjpvcGVuYmFua2luZzpwc2QyOnNjYSIsImVzc2VudGlhbCI6dHJ1ZX0sIm9wZW5iYW5raW5nX2ludGVudF9pZCI6eyJ2YWx1ZSI6IlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDgiLCJlc3NlbnRpYWwiOnRydWV9fSwidXNlcmluZm8iOnsib3BlbmJhbmtpbmdfaW50ZW50X2lkIjp7InZhbHVlIjoiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOCIsImVzc2VudGlhbCI6dHJ1ZX19fSwicmVzcG9uc2VfdHlwZSI6ImNvZGUgaWRfdG9rZW4iLCJyZWRpcmVjdF91cmkiOiJodHRwczpcL1wvd3d3Lmdvb2dsZS5jby51a1wvIiwic3RhdGUiOiIxMGQyNjBiZi1hN2Q5LTQ0NGEtOTJkOS03YjdhNWYwODgyMDgiLCJleHAiOjE1MzU3NTg4ODgsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiaWF0IjoxNTM1NzU4NTg4LCJjbGllbnRfaWQiOiI5MWMzYzUxNy05ZGI2LTQxN2UtOGIwNS04YjExODhmN2EyZDYiLCJqdGkiOiIzMzI1YWFjOC05Mzc4LTRjNzUtYWFiNC1lMTg3NzA4MDdiNGYifQ.fWpDKRCIq72DlJ_npxXPBQNjIPyBBbowaIMlZOkX6NI682Lcw9PD554hqRwfeoPkMx_YfuPTYDqfhBiagl__I9qeAFTLx4ItA6VZpmJAvGFkReVjJ0TNJlSk8gDtYUMnZGMFtP_OWJYm5jG9AZt1MlFY11sIPos7Pm7DvVUODexz_CObDTNgG2TXy0dCc6-HQYMUUSMIEhGM00mM35NCyLIBBUMFgtstD5HsC4GpTBPL20_cuqIgA4XPSt_hADGYGTtuRlvM6dAoSF0nb4Hn7sYtw9aQUsz4XLWS9_6JxryAb36YrgPhTyyP-5Uq7_FtdLTC2vfXMiCjc9gNvZ50Bw"
												}
											]
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "Token Exchange",
									"item": [
										{
											"name": "Exchange code",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "311a5e4d-1928-4cb1-8976-2d732d449c01",
														"exec": [
															"var data = JSON.parse(responseBody);",
															"",
															"postman.setEnvironmentVariable(\"access_token_with_consent\", data.access_token);",
															"postman.setEnvironmentVariable(\"id_token\", data.id_token);",
															"postman.setEnvironmentVariable(\"refresh_token\", data.refresh_token);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "grant_type",
															"value": "authorization_code",
															"type": "text"
														},
														{
															"key": "code",
															"value": "gDWhy4bBjwwotkbx08-lQbM69qU",
															"type": "text"
														},
														{
															"key": "redirect_uri",
															"value": "{{CLIENT_REDIRECT_URI}}",
															"type": "text"
														},
														{
															"key": "client_assertion_type",
															"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
															"type": "text"
														},
														{
															"key": "client_assertion",
															"value": "{{client_credential_jwt}}",
															"type": "text"
														}
													]
												},
												"url": "{{AS_token_endpoint}}"
											},
											"response": [
												{
													"name": "Exchange code",
													"originalRequest": {
														"method": "POST",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/x-www-form-urlencoded"
															}
														],
														"body": {
															"mode": "urlencoded",
															"urlencoded": [
																{
																	"key": "grant_type",
																	"value": "authorization_code",
																	"type": "text"
																},
																{
																	"key": "code",
																	"value": "d32dafd8-071d-41bd-bdda-afe6d45d8307",
																	"type": "text"
																},
																{
																	"key": "redirect_uri",
																	"value": "{{CLIENT_REDIRECT_URI}}",
																	"type": "text"
																},
																{
																	"key": "client_assertion_type",
																	"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
																	"type": "text"
																},
																{
																	"key": "client_assertion",
																	"value": "{{client_credential_jwt}}",
																	"type": "text"
																}
															]
														},
														"url": "{{AS_token_endpoint}}"
													},
													"status": "OK",
													"code": 200,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "Accept-Ranges",
															"value": "bytes",
															"name": "Accept-Ranges",
															"description": "Content-Types that are acceptable"
														},
														{
															"key": "Cache-Control",
															"value": "no-store",
															"name": "Cache-Control",
															"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
														},
														{
															"key": "Content-Type",
															"value": "application/json",
															"name": "Content-Type",
															"description": "The mime type of this content"
														},
														{
															"key": "Date",
															"value": "Fri, 31 Aug 2018 23:38:07 GMT",
															"name": "Date",
															"description": "The date and time that the message was sent"
														},
														{
															"key": "Pragma",
															"value": "no-cache",
															"name": "Pragma",
															"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
														},
														{
															"key": "Server",
															"value": "Restlet-Framework/2.3.4",
															"name": "Server",
															"description": "A name for the server"
														},
														{
															"key": "Strict-Transport-Security",
															"value": "max-age=31536000; includeSubdomains; preload",
															"name": "Strict-Transport-Security",
															"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
														},
														{
															"key": "Vary",
															"value": "Accept-Charset, Accept-Encoding, Accept-Language, Accept",
															"name": "Vary",
															"description": "Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server."
														},
														{
															"key": "X-Content-Type-Options",
															"value": "nosniff",
															"name": "X-Content-Type-Options",
															"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
														},
														{
															"key": "X-Frame-Options",
															"value": "DENY",
															"name": "X-Frame-Options",
															"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
														},
														{
															"key": "transfer-encoding",
															"value": "chunked",
															"name": "transfer-encoding",
															"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "077cbcb9-51a5-4b51-b960-9c420cb10138",
															"name": "x-fapi-interaction-id",
															"description": "Custom header"
														}
													],
													"cookie": [
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "01",
															"key": "amlbcookie"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
															"key": "iPlanetDirectoryPro"
														}
													],
													"body": "{\"access_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNDYxYzhhYTgtZjY1Ni00NGQyLThjOTEtYThiOTRjNzUwZGZlIiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6ImFjY2Vzc190b2tlbiIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwibmJmIjoxNTM1NzU4Njg3LCJncmFudF90eXBlIjoiYXV0aG9yaXphdGlvbl9jb2RlIiwic2NvcGUiOlsib3BlbmlkIiwicGF5bWVudHMiLCJhY2NvdW50cyJdLCJhdXRoX3RpbWUiOjE1MzU3NTg2NjMwMDAsImNsYWltcyI6IntcImlkX3Rva2VuXCI6e1wiYWNyXCI6e1widmFsdWVcIjpcInVybjpvcGVuYmFua2luZzpwc2QyOnNjYVwiLFwiZXNzZW50aWFsXCI6dHJ1ZX0sXCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19LFwidXNlcmluZm9cIjp7XCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19fSIsInJlYWxtIjoiL29wZW5iYW5raW5nIiwiZXhwIjoxNTM1ODQ1MDg3LCJpYXQiOjE1MzU3NTg2ODcsImV4cGlyZXNfaW4iOjg2NDAwLCJqdGkiOiIyNmQ1OWZmNS0wYmU3LTQxN2MtOGJhOC01MzcxOGU5ZjE1YTkifQ.Oi4HzCmb1dT-xE1ewNAxrcy1PO85_gIFs7BKhuD7Qbn9K0kS6tDXawHa4K3vZzZUk5-CA3LJ7zqQ7Ex2vocNGQ\",\"refresh_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNGY0YzhlOTgtZjMyYS00NzliLWEyYzUtZTRjYzE3NWZiZDU3IiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6InJlZnJlc2hfdG9rZW4iLCJhdXRoTW9kdWxlcyI6IkRhdGFTdG9yZSIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsImF1ZCI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImFjciI6InVybjpvcGVuYmFua2luZzpwc2QyOnNjYSIsIm5iZiI6MTUzNTc1ODY4Nywib3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInNjb3BlIjpbIm9wZW5pZCIsInBheW1lbnRzIiwiYWNjb3VudHMiXSwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJjbGFpbXMiOiJ7XCJpZF90b2tlblwiOntcImFjclwiOntcInZhbHVlXCI6XCJ1cm46b3BlbmJhbmtpbmc6cHNkMjpzY2FcIixcImVzc2VudGlhbFwiOnRydWV9LFwib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fSxcInVzZXJpbmZvXCI6e1wib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fX0iLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTU0MzUzNDY4NywiaWF0IjoxNTM1NzU4Njg3LCJleHBpcmVzX2luIjo3Nzc2MDAwLCJqdGkiOiJiMTk1Y2QzZi0wMjI5LTQ3YzYtOGNkMy03ODZhMDI1OWFhODMifQ.sjRPbbgxR5AXl-gtuSPKuz_9oM9MjocSfEDYJmJBJLyqSAHWimnMon5Pnxk_eEnvF2TNS3mFovtHq1RCXE4E-w\",\"scope\":\"openid payments accounts\",\"id_token\":\"eyJ0eXAiOiJKV1QiLCJraWQiOiJiL082T3ZWdjEreStXZ3JINVVpOVdUaW9MdDA9IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoicm1EYUlJMjFGcmNadElNWnpSeFNGQSIsInN1YiI6ImRlbW8iLCJhdWRpdFRyYWNraW5nSWQiOiIwOTAxZWNhZi1hMDA4LTQ1NzItOGQ4NC0zMGJkZmM0NTRjMTYtMzE5ODU3MCIsImlzcyI6Imh0dHBzOi8vbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbC9vYXV0aDIvb3BlbmJhbmtpbmciLCJ0b2tlbk5hbWUiOiJpZF90b2tlbiIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYWNyIjoidXJuOm9wZW5iYW5raW5nOnBzZDI6c2NhIiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiY19oYXNoIjoiYldBUTJUVk1UVUVMTTJkLTUyRHpPQSIsIm9wZW5iYW5raW5nX2ludGVudF9pZCI6IlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDgiLCJvcmcuZm9yZ2Vyb2NrLm9wZW5pZGNvbm5lY3Qub3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiYXpwIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTUzNTg0NTA4NywidG9rZW5UeXBlIjoiSldUVG9rZW4iLCJpYXQiOjE1MzU3NTg2ODd9.kxRZg6qTIrZGn99SJaOhYvVQOPe5SnIYNfOVa1LDM4NheJ-ClETNtfdpK43aDe1Xf79bH1wX5KO4j807kbDcLZ7g36PepIeUESzB6nKGyCaDZeuNlBRy97WEkFRrXeYoqmi7oMy_m7NEQDw7VR983GBjpjgQACJeyY4P26DU1S6OmrSonateFaViatwP7gqXKYuMfy-lsN8B1QVGg59xigu1lg90QUgDwnMVHqwKrunoBBTUtIYHcIeV3w2RRCWyH5JRnbYDzcnhZ1gQYdHbkZQcoxVvjYwX1FxwQa0vnY1wfLlWp6R-VhSGgsaLPh81yRmp_aaUp5G5P0_03QtOVw\",\"token_type\":\"Bearer\",\"expires_in\":86399,\"nonce\":\"10d260bf-a7d9-444a-92d9-7b7a5f088208\"}"
												}
											]
										},
										{
											"name": "Refresh access token",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "f41dad72-a438-4c20-abfa-54b06cfbbc72",
														"exec": [
															"var data = JSON.parse(responseBody);",
															"",
															"postman.setEnvironmentVariable(\"access_token_with_consent\", data.access_token);",
															"postman.setEnvironmentVariable(\"id_token\", data.id_token);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "grant_type",
															"value": "refresh_token",
															"type": "text"
														},
														{
															"key": "refresh_token",
															"value": "{{refresh_token}}",
															"type": "text"
														},
														{
															"key": "redirect_uri",
															"value": "{{CLIENT_REDIRECT_URI}}",
															"type": "text"
														},
														{
															"key": "client_assertion_type",
															"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
															"type": "text"
														},
														{
															"key": "client_assertion",
															"value": "{{client_credential_jwt}}",
															"type": "text"
														}
													]
												},
												"url": "{{AS_token_endpoint}}"
											},
											"response": [
												{
													"name": "Exchange code",
													"originalRequest": {
														"method": "POST",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/x-www-form-urlencoded"
															}
														],
														"body": {
															"mode": "urlencoded",
															"urlencoded": [
																{
																	"key": "grant_type",
																	"value": "authorization_code",
																	"type": "text"
																},
																{
																	"key": "code",
																	"value": "d32dafd8-071d-41bd-bdda-afe6d45d8307",
																	"type": "text"
																},
																{
																	"key": "redirect_uri",
																	"value": "{{CLIENT_REDIRECT_URI}}",
																	"type": "text"
																},
																{
																	"key": "client_assertion_type",
																	"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
																	"type": "text"
																},
																{
																	"key": "client_assertion",
																	"value": "{{client_credential_jwt}}",
																	"type": "text"
																}
															]
														},
														"url": "{{AS_token_endpoint}}"
													},
													"status": "OK",
													"code": 200,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "Accept-Ranges",
															"value": "bytes",
															"name": "Accept-Ranges",
															"description": "Content-Types that are acceptable"
														},
														{
															"key": "Cache-Control",
															"value": "no-store",
															"name": "Cache-Control",
															"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
														},
														{
															"key": "Content-Type",
															"value": "application/json",
															"name": "Content-Type",
															"description": "The mime type of this content"
														},
														{
															"key": "Date",
															"value": "Fri, 31 Aug 2018 23:38:07 GMT",
															"name": "Date",
															"description": "The date and time that the message was sent"
														},
														{
															"key": "Pragma",
															"value": "no-cache",
															"name": "Pragma",
															"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
														},
														{
															"key": "Server",
															"value": "Restlet-Framework/2.3.4",
															"name": "Server",
															"description": "A name for the server"
														},
														{
															"key": "Strict-Transport-Security",
															"value": "max-age=31536000; includeSubdomains; preload",
															"name": "Strict-Transport-Security",
															"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
														},
														{
															"key": "Vary",
															"value": "Accept-Charset, Accept-Encoding, Accept-Language, Accept",
															"name": "Vary",
															"description": "Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server."
														},
														{
															"key": "X-Content-Type-Options",
															"value": "nosniff",
															"name": "X-Content-Type-Options",
															"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
														},
														{
															"key": "X-Frame-Options",
															"value": "DENY",
															"name": "X-Frame-Options",
															"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
														},
														{
															"key": "transfer-encoding",
															"value": "chunked",
															"name": "transfer-encoding",
															"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "077cbcb9-51a5-4b51-b960-9c420cb10138",
															"name": "x-fapi-interaction-id",
															"description": "Custom header"
														}
													],
													"cookie": [
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "01",
															"key": "amlbcookie"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
															"key": "iPlanetDirectoryPro"
														}
													],
													"body": "{\"access_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNDYxYzhhYTgtZjY1Ni00NGQyLThjOTEtYThiOTRjNzUwZGZlIiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6ImFjY2Vzc190b2tlbiIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwibmJmIjoxNTM1NzU4Njg3LCJncmFudF90eXBlIjoiYXV0aG9yaXphdGlvbl9jb2RlIiwic2NvcGUiOlsib3BlbmlkIiwicGF5bWVudHMiLCJhY2NvdW50cyJdLCJhdXRoX3RpbWUiOjE1MzU3NTg2NjMwMDAsImNsYWltcyI6IntcImlkX3Rva2VuXCI6e1wiYWNyXCI6e1widmFsdWVcIjpcInVybjpvcGVuYmFua2luZzpwc2QyOnNjYVwiLFwiZXNzZW50aWFsXCI6dHJ1ZX0sXCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19LFwidXNlcmluZm9cIjp7XCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19fSIsInJlYWxtIjoiL29wZW5iYW5raW5nIiwiZXhwIjoxNTM1ODQ1MDg3LCJpYXQiOjE1MzU3NTg2ODcsImV4cGlyZXNfaW4iOjg2NDAwLCJqdGkiOiIyNmQ1OWZmNS0wYmU3LTQxN2MtOGJhOC01MzcxOGU5ZjE1YTkifQ.Oi4HzCmb1dT-xE1ewNAxrcy1PO85_gIFs7BKhuD7Qbn9K0kS6tDXawHa4K3vZzZUk5-CA3LJ7zqQ7Ex2vocNGQ\",\"refresh_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNGY0YzhlOTgtZjMyYS00NzliLWEyYzUtZTRjYzE3NWZiZDU3IiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6InJlZnJlc2hfdG9rZW4iLCJhdXRoTW9kdWxlcyI6IkRhdGFTdG9yZSIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsImF1ZCI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImFjciI6InVybjpvcGVuYmFua2luZzpwc2QyOnNjYSIsIm5iZiI6MTUzNTc1ODY4Nywib3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInNjb3BlIjpbIm9wZW5pZCIsInBheW1lbnRzIiwiYWNjb3VudHMiXSwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJjbGFpbXMiOiJ7XCJpZF90b2tlblwiOntcImFjclwiOntcInZhbHVlXCI6XCJ1cm46b3BlbmJhbmtpbmc6cHNkMjpzY2FcIixcImVzc2VudGlhbFwiOnRydWV9LFwib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fSxcInVzZXJpbmZvXCI6e1wib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fX0iLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTU0MzUzNDY4NywiaWF0IjoxNTM1NzU4Njg3LCJleHBpcmVzX2luIjo3Nzc2MDAwLCJqdGkiOiJiMTk1Y2QzZi0wMjI5LTQ3YzYtOGNkMy03ODZhMDI1OWFhODMifQ.sjRPbbgxR5AXl-gtuSPKuz_9oM9MjocSfEDYJmJBJLyqSAHWimnMon5Pnxk_eEnvF2TNS3mFovtHq1RCXE4E-w\",\"scope\":\"openid payments accounts\",\"id_token\":\"eyJ0eXAiOiJKV1QiLCJraWQiOiJiL082T3ZWdjEreStXZ3JINVVpOVdUaW9MdDA9IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoicm1EYUlJMjFGcmNadElNWnpSeFNGQSIsInN1YiI6ImRlbW8iLCJhdWRpdFRyYWNraW5nSWQiOiIwOTAxZWNhZi1hMDA4LTQ1NzItOGQ4NC0zMGJkZmM0NTRjMTYtMzE5ODU3MCIsImlzcyI6Imh0dHBzOi8vbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbC9vYXV0aDIvb3BlbmJhbmtpbmciLCJ0b2tlbk5hbWUiOiJpZF90b2tlbiIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYWNyIjoidXJuOm9wZW5iYW5raW5nOnBzZDI6c2NhIiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiY19oYXNoIjoiYldBUTJUVk1UVUVMTTJkLTUyRHpPQSIsIm9wZW5iYW5raW5nX2ludGVudF9pZCI6IlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDgiLCJvcmcuZm9yZ2Vyb2NrLm9wZW5pZGNvbm5lY3Qub3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiYXpwIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTUzNTg0NTA4NywidG9rZW5UeXBlIjoiSldUVG9rZW4iLCJpYXQiOjE1MzU3NTg2ODd9.kxRZg6qTIrZGn99SJaOhYvVQOPe5SnIYNfOVa1LDM4NheJ-ClETNtfdpK43aDe1Xf79bH1wX5KO4j807kbDcLZ7g36PepIeUESzB6nKGyCaDZeuNlBRy97WEkFRrXeYoqmi7oMy_m7NEQDw7VR983GBjpjgQACJeyY4P26DU1S6OmrSonateFaViatwP7gqXKYuMfy-lsN8B1QVGg59xigu1lg90QUgDwnMVHqwKrunoBBTUtIYHcIeV3w2RRCWyH5JRnbYDzcnhZ1gQYdHbkZQcoxVvjYwX1FxwQa0vnY1wfLlWp6R-VhSGgsaLPh81yRmp_aaUp5G5P0_03QtOVw\",\"token_type\":\"Bearer\",\"expires_in\":86399,\"nonce\":\"10d260bf-a7d9-444a-92d9-7b7a5f088208\"}"
												}
											]
										},
										{
											"name": "Introspect Token",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "c442a951-ab2f-4d1e-96a1-50d465c12335",
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": [
														{
															"key": "token",
															"value": "{{access_token_with_consent}}",
															"type": "text"
														},
														{
															"key": "redirect_uri",
															"value": "{{CLIENT_REDIRECT_URI}}",
															"type": "text"
														},
														{
															"key": "client_id",
															"value": "{{CLIENT_ID}}",
															"type": "text"
														},
														{
															"key": "client_secret",
															"value": "{{CLIENT_SECRET}}",
															"type": "text"
														}
													]
												},
												"url": "{{AS_introspection_endpoint}}"
											},
											"response": [
												{
													"name": "Exchange code",
													"originalRequest": {
														"method": "POST",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/x-www-form-urlencoded"
															}
														],
														"body": {
															"mode": "urlencoded",
															"urlencoded": [
																{
																	"key": "grant_type",
																	"value": "authorization_code",
																	"type": "text"
																},
																{
																	"key": "code",
																	"value": "d32dafd8-071d-41bd-bdda-afe6d45d8307",
																	"type": "text"
																},
																{
																	"key": "redirect_uri",
																	"value": "{{CLIENT_REDIRECT_URI}}",
																	"type": "text"
																},
																{
																	"key": "client_assertion_type",
																	"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
																	"type": "text"
																},
																{
																	"key": "client_assertion",
																	"value": "{{client_credential_jwt}}",
																	"type": "text"
																}
															]
														},
														"url": "{{AS_token_endpoint}}"
													},
													"status": "OK",
													"code": 200,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "Accept-Ranges",
															"value": "bytes",
															"name": "Accept-Ranges",
															"description": "Content-Types that are acceptable"
														},
														{
															"key": "Cache-Control",
															"value": "no-store",
															"name": "Cache-Control",
															"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
														},
														{
															"key": "Content-Type",
															"value": "application/json",
															"name": "Content-Type",
															"description": "The mime type of this content"
														},
														{
															"key": "Date",
															"value": "Fri, 31 Aug 2018 23:38:07 GMT",
															"name": "Date",
															"description": "The date and time that the message was sent"
														},
														{
															"key": "Pragma",
															"value": "no-cache",
															"name": "Pragma",
															"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
														},
														{
															"key": "Server",
															"value": "Restlet-Framework/2.3.4",
															"name": "Server",
															"description": "A name for the server"
														},
														{
															"key": "Strict-Transport-Security",
															"value": "max-age=31536000; includeSubdomains; preload",
															"name": "Strict-Transport-Security",
															"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
														},
														{
															"key": "Vary",
															"value": "Accept-Charset, Accept-Encoding, Accept-Language, Accept",
															"name": "Vary",
															"description": "Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server."
														},
														{
															"key": "X-Content-Type-Options",
															"value": "nosniff",
															"name": "X-Content-Type-Options",
															"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
														},
														{
															"key": "X-Frame-Options",
															"value": "DENY",
															"name": "X-Frame-Options",
															"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
														},
														{
															"key": "transfer-encoding",
															"value": "chunked",
															"name": "transfer-encoding",
															"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "077cbcb9-51a5-4b51-b960-9c420cb10138",
															"name": "x-fapi-interaction-id",
															"description": "Custom header"
														}
													],
													"cookie": [
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "01",
															"key": "amlbcookie"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
															"key": "iPlanetDirectoryPro"
														}
													],
													"body": "{\"access_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNDYxYzhhYTgtZjY1Ni00NGQyLThjOTEtYThiOTRjNzUwZGZlIiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6ImFjY2Vzc190b2tlbiIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwibmJmIjoxNTM1NzU4Njg3LCJncmFudF90eXBlIjoiYXV0aG9yaXphdGlvbl9jb2RlIiwic2NvcGUiOlsib3BlbmlkIiwicGF5bWVudHMiLCJhY2NvdW50cyJdLCJhdXRoX3RpbWUiOjE1MzU3NTg2NjMwMDAsImNsYWltcyI6IntcImlkX3Rva2VuXCI6e1wiYWNyXCI6e1widmFsdWVcIjpcInVybjpvcGVuYmFua2luZzpwc2QyOnNjYVwiLFwiZXNzZW50aWFsXCI6dHJ1ZX0sXCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19LFwidXNlcmluZm9cIjp7XCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19fSIsInJlYWxtIjoiL29wZW5iYW5raW5nIiwiZXhwIjoxNTM1ODQ1MDg3LCJpYXQiOjE1MzU3NTg2ODcsImV4cGlyZXNfaW4iOjg2NDAwLCJqdGkiOiIyNmQ1OWZmNS0wYmU3LTQxN2MtOGJhOC01MzcxOGU5ZjE1YTkifQ.Oi4HzCmb1dT-xE1ewNAxrcy1PO85_gIFs7BKhuD7Qbn9K0kS6tDXawHa4K3vZzZUk5-CA3LJ7zqQ7Ex2vocNGQ\",\"refresh_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNGY0YzhlOTgtZjMyYS00NzliLWEyYzUtZTRjYzE3NWZiZDU3IiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6InJlZnJlc2hfdG9rZW4iLCJhdXRoTW9kdWxlcyI6IkRhdGFTdG9yZSIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsImF1ZCI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImFjciI6InVybjpvcGVuYmFua2luZzpwc2QyOnNjYSIsIm5iZiI6MTUzNTc1ODY4Nywib3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInNjb3BlIjpbIm9wZW5pZCIsInBheW1lbnRzIiwiYWNjb3VudHMiXSwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJjbGFpbXMiOiJ7XCJpZF90b2tlblwiOntcImFjclwiOntcInZhbHVlXCI6XCJ1cm46b3BlbmJhbmtpbmc6cHNkMjpzY2FcIixcImVzc2VudGlhbFwiOnRydWV9LFwib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fSxcInVzZXJpbmZvXCI6e1wib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fX0iLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTU0MzUzNDY4NywiaWF0IjoxNTM1NzU4Njg3LCJleHBpcmVzX2luIjo3Nzc2MDAwLCJqdGkiOiJiMTk1Y2QzZi0wMjI5LTQ3YzYtOGNkMy03ODZhMDI1OWFhODMifQ.sjRPbbgxR5AXl-gtuSPKuz_9oM9MjocSfEDYJmJBJLyqSAHWimnMon5Pnxk_eEnvF2TNS3mFovtHq1RCXE4E-w\",\"scope\":\"openid payments accounts\",\"id_token\":\"eyJ0eXAiOiJKV1QiLCJraWQiOiJiL082T3ZWdjEreStXZ3JINVVpOVdUaW9MdDA9IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoicm1EYUlJMjFGcmNadElNWnpSeFNGQSIsInN1YiI6ImRlbW8iLCJhdWRpdFRyYWNraW5nSWQiOiIwOTAxZWNhZi1hMDA4LTQ1NzItOGQ4NC0zMGJkZmM0NTRjMTYtMzE5ODU3MCIsImlzcyI6Imh0dHBzOi8vbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbC9vYXV0aDIvb3BlbmJhbmtpbmciLCJ0b2tlbk5hbWUiOiJpZF90b2tlbiIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYWNyIjoidXJuOm9wZW5iYW5raW5nOnBzZDI6c2NhIiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiY19oYXNoIjoiYldBUTJUVk1UVUVMTTJkLTUyRHpPQSIsIm9wZW5iYW5raW5nX2ludGVudF9pZCI6IlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDgiLCJvcmcuZm9yZ2Vyb2NrLm9wZW5pZGNvbm5lY3Qub3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiYXpwIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTUzNTg0NTA4NywidG9rZW5UeXBlIjoiSldUVG9rZW4iLCJpYXQiOjE1MzU3NTg2ODd9.kxRZg6qTIrZGn99SJaOhYvVQOPe5SnIYNfOVa1LDM4NheJ-ClETNtfdpK43aDe1Xf79bH1wX5KO4j807kbDcLZ7g36PepIeUESzB6nKGyCaDZeuNlBRy97WEkFRrXeYoqmi7oMy_m7NEQDw7VR983GBjpjgQACJeyY4P26DU1S6OmrSonateFaViatwP7gqXKYuMfy-lsN8B1QVGg59xigu1lg90QUgDwnMVHqwKrunoBBTUtIYHcIeV3w2RRCWyH5JRnbYDzcnhZ1gQYdHbkZQcoxVvjYwX1FxwQa0vnY1wfLlWp6R-VhSGgsaLPh81yRmp_aaUp5G5P0_03QtOVw\",\"token_type\":\"Bearer\",\"expires_in\":86399,\"nonce\":\"10d260bf-a7d9-444a-92d9-7b7a5f088208\"}"
												}
											]
										},
										{
											"name": "UserInfo",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "6cf79c1e-33bc-4940-9bf8-5e4ec2d6cf39",
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/x-www-form-urlencoded"
													},
													{
														"key": "Authorization",
														"value": "Bearer {{access_token_with_consent}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "urlencoded",
													"urlencoded": []
												},
												"url": "{{AS_userinfo_endpoint}}"
											},
											"response": [
												{
													"name": "Exchange code",
													"originalRequest": {
														"method": "POST",
														"header": [
															{
																"key": "Content-Type",
																"value": "application/x-www-form-urlencoded"
															}
														],
														"body": {
															"mode": "urlencoded",
															"urlencoded": [
																{
																	"key": "grant_type",
																	"value": "authorization_code",
																	"type": "text"
																},
																{
																	"key": "code",
																	"value": "d32dafd8-071d-41bd-bdda-afe6d45d8307",
																	"type": "text"
																},
																{
																	"key": "redirect_uri",
																	"value": "{{CLIENT_REDIRECT_URI}}",
																	"type": "text"
																},
																{
																	"key": "client_assertion_type",
																	"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
																	"type": "text"
																},
																{
																	"key": "client_assertion",
																	"value": "{{client_credential_jwt}}",
																	"type": "text"
																}
															]
														},
														"url": "{{AS_token_endpoint}}"
													},
													"status": "OK",
													"code": 200,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "Accept-Ranges",
															"value": "bytes",
															"name": "Accept-Ranges",
															"description": "Content-Types that are acceptable"
														},
														{
															"key": "Cache-Control",
															"value": "no-store",
															"name": "Cache-Control",
															"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
														},
														{
															"key": "Content-Type",
															"value": "application/json",
															"name": "Content-Type",
															"description": "The mime type of this content"
														},
														{
															"key": "Date",
															"value": "Fri, 31 Aug 2018 23:38:07 GMT",
															"name": "Date",
															"description": "The date and time that the message was sent"
														},
														{
															"key": "Pragma",
															"value": "no-cache",
															"name": "Pragma",
															"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
														},
														{
															"key": "Server",
															"value": "Restlet-Framework/2.3.4",
															"name": "Server",
															"description": "A name for the server"
														},
														{
															"key": "Strict-Transport-Security",
															"value": "max-age=31536000; includeSubdomains; preload",
															"name": "Strict-Transport-Security",
															"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
														},
														{
															"key": "Vary",
															"value": "Accept-Charset, Accept-Encoding, Accept-Language, Accept",
															"name": "Vary",
															"description": "Tells downstream proxies how to match future request headers to decide whether the cached response can be used rather than requesting a fresh one from the origin server."
														},
														{
															"key": "X-Content-Type-Options",
															"value": "nosniff",
															"name": "X-Content-Type-Options",
															"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
														},
														{
															"key": "X-Frame-Options",
															"value": "DENY",
															"name": "X-Frame-Options",
															"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
														},
														{
															"key": "transfer-encoding",
															"value": "chunked",
															"name": "transfer-encoding",
															"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "077cbcb9-51a5-4b51-b960-9c420cb10138",
															"name": "x-fapi-interaction-id",
															"description": "Custom header"
														}
													],
													"cookie": [
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "01",
															"key": "amlbcookie"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
															"key": "iPlanetDirectoryPro"
														}
													],
													"body": "{\"access_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNDYxYzhhYTgtZjY1Ni00NGQyLThjOTEtYThiOTRjNzUwZGZlIiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6ImFjY2Vzc190b2tlbiIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwibmJmIjoxNTM1NzU4Njg3LCJncmFudF90eXBlIjoiYXV0aG9yaXphdGlvbl9jb2RlIiwic2NvcGUiOlsib3BlbmlkIiwicGF5bWVudHMiLCJhY2NvdW50cyJdLCJhdXRoX3RpbWUiOjE1MzU3NTg2NjMwMDAsImNsYWltcyI6IntcImlkX3Rva2VuXCI6e1wiYWNyXCI6e1widmFsdWVcIjpcInVybjpvcGVuYmFua2luZzpwc2QyOnNjYVwiLFwiZXNzZW50aWFsXCI6dHJ1ZX0sXCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19LFwidXNlcmluZm9cIjp7XCJvcGVuYmFua2luZ19pbnRlbnRfaWRcIjp7XCJ2YWx1ZVwiOlwiUGZkYTM5ZWY2LWM4MWYtNDliNi05MTAwLTA2OGZiODhiYjhkOFwiLFwiZXNzZW50aWFsXCI6dHJ1ZX19fSIsInJlYWxtIjoiL29wZW5iYW5raW5nIiwiZXhwIjoxNTM1ODQ1MDg3LCJpYXQiOjE1MzU3NTg2ODcsImV4cGlyZXNfaW4iOjg2NDAwLCJqdGkiOiIyNmQ1OWZmNS0wYmU3LTQxN2MtOGJhOC01MzcxOGU5ZjE1YTkifQ.Oi4HzCmb1dT-xE1ewNAxrcy1PO85_gIFs7BKhuD7Qbn9K0kS6tDXawHa4K3vZzZUk5-CA3LJ7zqQ7Ex2vocNGQ\",\"refresh_token\":\"eyJ0eXAiOiJKV1QiLCJ6aXAiOiJOT05FIiwia2lkIjoiRm9sN0lwZEtlTFptekt0Q0VnaTFMRGhTSXpNPSIsImFsZyI6IkVTMjU2In0.eyJzdWIiOiJkZW1vIiwiYXV0aF9sZXZlbCI6MCwiYXVkaXRUcmFja2luZ0lkIjoiNGY0YzhlOTgtZjMyYS00NzliLWEyYzUtZTRjYzE3NWZiZDU3IiwiaXNzIjoiaHR0cHM6Ly9tYXRscy5hcy5hc3BzcC5vYi5mb3JnZXJvY2suZmluYW5jaWFsL29hdXRoMi9vcGVuYmFua2luZyIsInRva2VuTmFtZSI6InJlZnJlc2hfdG9rZW4iLCJhdXRoTW9kdWxlcyI6IkRhdGFTdG9yZSIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJhdXRoR3JhbnRJZCI6ImEzMzQxYmEyLTQzOTgtNDQ4NC1hNjM0LWJkNWVkOTUzMmE1NSIsImF1ZCI6IjkxYzNjNTE3LTlkYjYtNDE3ZS04YjA1LThiMTE4OGY3YTJkNiIsImFjciI6InVybjpvcGVuYmFua2luZzpwc2QyOnNjYSIsIm5iZiI6MTUzNTc1ODY4Nywib3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInNjb3BlIjpbIm9wZW5pZCIsInBheW1lbnRzIiwiYWNjb3VudHMiXSwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJjbGFpbXMiOiJ7XCJpZF90b2tlblwiOntcImFjclwiOntcInZhbHVlXCI6XCJ1cm46b3BlbmJhbmtpbmc6cHNkMjpzY2FcIixcImVzc2VudGlhbFwiOnRydWV9LFwib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fSxcInVzZXJpbmZvXCI6e1wib3BlbmJhbmtpbmdfaW50ZW50X2lkXCI6e1widmFsdWVcIjpcIlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDhcIixcImVzc2VudGlhbFwiOnRydWV9fX0iLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTU0MzUzNDY4NywiaWF0IjoxNTM1NzU4Njg3LCJleHBpcmVzX2luIjo3Nzc2MDAwLCJqdGkiOiJiMTk1Y2QzZi0wMjI5LTQ3YzYtOGNkMy03ODZhMDI1OWFhODMifQ.sjRPbbgxR5AXl-gtuSPKuz_9oM9MjocSfEDYJmJBJLyqSAHWimnMon5Pnxk_eEnvF2TNS3mFovtHq1RCXE4E-w\",\"scope\":\"openid payments accounts\",\"id_token\":\"eyJ0eXAiOiJKV1QiLCJraWQiOiJiL082T3ZWdjEreStXZ3JINVVpOVdUaW9MdDA9IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoicm1EYUlJMjFGcmNadElNWnpSeFNGQSIsInN1YiI6ImRlbW8iLCJhdWRpdFRyYWNraW5nSWQiOiIwOTAxZWNhZi1hMDA4LTQ1NzItOGQ4NC0zMGJkZmM0NTRjMTYtMzE5ODU3MCIsImlzcyI6Imh0dHBzOi8vbWF0bHMuYXMuYXNwc3Aub2IuZm9yZ2Vyb2NrLmZpbmFuY2lhbC9vYXV0aDIvb3BlbmJhbmtpbmciLCJ0b2tlbk5hbWUiOiJpZF90b2tlbiIsIm5vbmNlIjoiMTBkMjYwYmYtYTdkOS00NDRhLTkyZDktN2I3YTVmMDg4MjA4IiwiYWNyIjoidXJuOm9wZW5iYW5raW5nOnBzZDI6c2NhIiwiYXVkIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiY19oYXNoIjoiYldBUTJUVk1UVUVMTTJkLTUyRHpPQSIsIm9wZW5iYW5raW5nX2ludGVudF9pZCI6IlBmZGEzOWVmNi1jODFmLTQ5YjYtOTEwMC0wNjhmYjg4YmI4ZDgiLCJvcmcuZm9yZ2Vyb2NrLm9wZW5pZGNvbm5lY3Qub3BzIjoiMDFlYjI0ZTUtNmM5YS00MWRhLWIzZDItMzhjODcwODRlMDAzIiwiYXpwIjoiOTFjM2M1MTctOWRiNi00MTdlLThiMDUtOGIxMTg4ZjdhMmQ2IiwiYXV0aF90aW1lIjoxNTM1NzU4NjYzMDAwLCJyZWFsbSI6Ii9vcGVuYmFua2luZyIsImV4cCI6MTUzNTg0NTA4NywidG9rZW5UeXBlIjoiSldUVG9rZW4iLCJpYXQiOjE1MzU3NTg2ODd9.kxRZg6qTIrZGn99SJaOhYvVQOPe5SnIYNfOVa1LDM4NheJ-ClETNtfdpK43aDe1Xf79bH1wX5KO4j807kbDcLZ7g36PepIeUESzB6nKGyCaDZeuNlBRy97WEkFRrXeYoqmi7oMy_m7NEQDw7VR983GBjpjgQACJeyY4P26DU1S6OmrSonateFaViatwP7gqXKYuMfy-lsN8B1QVGg59xigu1lg90QUgDwnMVHqwKrunoBBTUtIYHcIeV3w2RRCWyH5JRnbYDzcnhZ1gQYdHbkZQcoxVvjYwX1FxwQa0vnY1wfLlWp6R-VhSGgsaLPh81yRmp_aaUp5G5P0_03QtOVw\",\"token_type\":\"Bearer\",\"expires_in\":86399,\"nonce\":\"10d260bf-a7d9-444a-92d9-7b7a5f088208\"}"
												}
											]
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								},
								{
									"name": "Data Access",
									"item": [
										{
											"name": "Submit Domestic Payment - without Debtor",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "0b1a5c08-412b-414e-b81e-c8240323465c",
														"exec": [
															"var data = JSON.parse(responseBody);",
															"",
															"postman.setEnvironmentVariable(\"DomesticPaymentId\", data.Data.DomesticPaymentId);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Authorization",
														"value": "Bearer {{access_token_with_consent}}"
													},
													{
														"key": "Content-Type",
														"value": "application/json"
													},
													{
														"key": "Accept",
														"value": "application/json"
													},
													{
														"key": "x-idempotency-key",
														"value": "{{x-idempotency-key}}"
													},
													{
														"key": "x-jws-signature",
														"value": "{{x-jws-signature}}"
													},
													{
														"key": "x-fapi-financial-id",
														"value": "{{x-fapi-financial-id}}"
													},
													{
														"key": "x-fapi-customer-last-logged-time",
														"value": "{{x-fapi-customer-last-logged-time}}"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "{{x-fapi-customer-ip-address}}"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{x-fapi-interaction-id}}"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n  \"Data\": {\r\n    \"ConsentId\": \"{{IntentId}}\",\r\n    \"Initiation\": {\r\n      \"InstructionIdentification\": \"ACME412\",\r\n      \"EndToEndIdentification\": \"FRESCO.21302.GFX.20\",\r\n      \"InstructedAmount\": {\r\n        \"Amount\": \"165.88\",\r\n        \"Currency\": \"GBP\"\r\n      },\r\n      \"CreditorAccount\": {\r\n        \"SchemeName\": \"UK.OBIE.SortCodeAccountNumber\",\r\n        \"Identification\": \"08080021325698\",\r\n        \"Name\": \"ACME Inc\",\r\n        \"SecondaryIdentification\": \"0002\"\r\n      },\r\n      \"RemittanceInformation\": {\r\n        \"Reference\": \"FRESCO-101\",\r\n        \"Unstructured\": \"Internal ops code 5120101\"\r\n      }\r\n    }\r\n  },\r\n  \"Risk\": {\r\n    \"PaymentContextCode\": \"EcommerceGoods\",\r\n    \"MerchantCategoryCode\": \"5967\",\r\n    \"MerchantCustomerIdentification\": \"053598653254\",\r\n    \"DeliveryAddress\": {\r\n      \"AddressLine\": [\r\n        \"Flat 7\",\r\n        \"Acacia Lodge\"\r\n      ],\r\n      \"StreetName\": \"Acacia Avenue\",\r\n      \"BuildingNumber\": \"27\",\r\n      \"PostCode\": \"GU31 2ZZ\",\r\n      \"TownName\": \"Sparsholt\",\r\n      \"CountySubDivision\": [\r\n        \"Wessex\"\r\n      ],\r\n      \"Country\": \"UK\"\r\n    }\r\n  }\r\n}"
												},
												"url": "{{RS_CreateDomesticPayment_v3.1}}"
											},
											"response": [
												{
													"name": "Payment submission",
													"originalRequest": {
														"method": "POST",
														"header": [
															{
																"key": "Authorization",
																"value": "Bearer {{access_token_with_consent}}"
															},
															{
																"key": "Content-Type",
																"value": "application/json"
															},
															{
																"key": "x-idempotency-key",
																"value": "FRESCO.21302.GFX.20"
															},
															{
																"key": "x-jws-signature",
																"value": "TGlmZSdzIGEgam91cm5leSBub3QgYSBkZXN0aW5hdGlvbiA=..T2ggZ29vZCBldmVuaW5nIG1yIHR5bGVyIGdvaW5nIGRvd24gPw==",
																"disabled": true
															},
															{
																"key": "x-fapi-financial-id",
																"value": "{{ASPSP_FINANCIAL_ID}}"
															},
															{
																"key": "x-fapi-customer-last-logged-time",
																"value": "Sun, 10 Sep 2017 19:43:31 UTC"
															},
															{
																"key": "x-fapi-customer-ip-address",
																"value": "104.25.212.99"
															},
															{
																"key": "x-fapi-interaction-id",
																"value": "93bac548-d2de-4546-b106-880a5018460d"
															},
															{
																"key": "Accept",
																"value": "application/json"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{\n  \"Data\": {\n    \"PaymentId\": \"{{PaymentId}}\",\n    \"Initiation\": {\n      \"InstructionIdentification\": \"ACME412\",\n      \"EndToEndIdentification\": \"FRESCO.21302.GFX.20\",\n      \"InstructedAmount\": {\n        \"Amount\": \"165.88\",\n        \"Currency\": \"GBP\"\n      },\n      \"CreditorAccount\": {\n        \"SchemeName\": \"SortCodeAccountNumber\",\n        \"Identification\": \"08080021325698\",\n        \"Name\": \"ACME Inc\",\n        \"SecondaryIdentification\": \"0002\"\n      },\n      \"RemittanceInformation\": {\n        \"Reference\": \"FRESCO-101\",\n        \"Unstructured\": \"Internal ops code 5120101\"\n      }\n    }\n  },\n  \"Risk\": {\n    \"PaymentContextCode\": \"EcommerceGoods\",\n    \"MerchantCategoryCode\": \"5967\",\n    \"MerchantCustomerIdentification\": \"053598653254\",\n    \"DeliveryAddress\": {\n      \"AddressLine\": [\n        \"Flat 7\",\n        \"Acacia Lodge\"\n      ],\n      \"StreetName\": \"Acacia Avenue\",\n      \"BuildingNumber\": \"27\",\n      \"PostCode\": \"GU31 2ZZ\",\n      \"TownName\": \"Sparsholt\",\n      \"CountySubDivision\": [\n        \"Wessex\"\n      ],\n      \"Country\": \"UK\"\n    }\n  }\n}"
														},
														"url": "{{RS_CreatePaymentSubmission_v2.0}}"
													},
													"status": "Created",
													"code": 201,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "Cache-Control",
															"value": "no-cache, no-store, max-age=0, must-revalidate",
															"name": "Cache-Control",
															"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
														},
														{
															"key": "Content-Type",
															"value": "application/json;charset=utf-8",
															"name": "Content-Type",
															"description": "The mime type of this content"
														},
														{
															"key": "Date",
															"value": "Fri, 31 Aug 2018 23:38:12 GMT",
															"name": "Date",
															"description": "The date and time that the message was sent"
														},
														{
															"key": "Expires",
															"value": "0",
															"name": "Expires",
															"description": "Gives the date/time after which the response is considered stale"
														},
														{
															"key": "Pragma",
															"value": "no-cache",
															"name": "Pragma",
															"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
														},
														{
															"key": "Strict-Transport-Security",
															"value": "max-age=31536000 ; includeSubDomains",
															"name": "Strict-Transport-Security",
															"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
														},
														{
															"key": "X-Content-Type-Options",
															"value": "nosniff",
															"name": "X-Content-Type-Options",
															"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
														},
														{
															"key": "X-Frame-Options",
															"value": "DENY",
															"name": "X-Frame-Options",
															"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
														},
														{
															"key": "X-XSS-Protection",
															"value": "1; mode=block",
															"name": "X-XSS-Protection",
															"description": "Cross-site scripting (XSS) filter"
														},
														{
															"key": "transfer-encoding",
															"value": "chunked",
															"name": "transfer-encoding",
															"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "93bac548-d2de-4546-b106-880a5018460d",
															"name": "x-fapi-interaction-id",
															"description": "Custom header"
														}
													],
													"cookie": [
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "01",
															"key": "amlbcookie"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
															"key": "iPlanetDirectoryPro"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": true,
															"domain": "rs.aspsp.ob.forgerock.financial",
															"path": "/v1.1",
															"secure": true,
															"value": "34F0FF6ADBE51B4332018415EB8726BF",
															"key": "JSESSIONID"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": true,
															"domain": "rs.aspsp.ob.forgerock.financial",
															"path": "/",
															"secure": true,
															"value": "B165242A9E44929BEB0404056A48E34D",
															"key": "JSESSIONID"
														}
													],
													"body": "{\"Data\":{\"PaymentSubmissionId\":\"764b7ff1-3c92-466a-a3d7-34bbf408a141\",\"PaymentId\":\"Pfda39ef6-c81f-49b6-9100-068fb88bb8d8\",\"Status\":\"AcceptedSettlementInProcess\",\"CreationDateTime\":\"2018-08-31T23:38:12+00:00\"}}"
												}
											]
										},
										{
											"name": "Submit Domestic Payment - with Debtor",
											"event": [
												{
													"listen": "test",
													"script": {
														"id": "48120f7c-9d5c-4f9f-9d3e-6045d1374e4f",
														"exec": [
															"var data = JSON.parse(responseBody);",
															"",
															"postman.setEnvironmentVariable(\"DomesticPaymentId\", data.Data.DomesticPaymentId);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "Authorization",
														"value": "Bearer {{access_token_with_consent}}"
													},
													{
														"key": "Content-Type",
														"value": "application/json"
													},
													{
														"key": "Accept",
														"value": "application/json"
													},
													{
														"key": "x-idempotency-key",
														"value": "{{x-idempotency-key}}"
													},
													{
														"key": "x-jws-signature",
														"value": "{{x-jws-signature}}"
													},
													{
														"key": "x-fapi-financial-id",
														"value": "{{x-fapi-financial-id}}"
													},
													{
														"key": "x-fapi-customer-last-logged-time",
														"value": "{{x-fapi-customer-last-logged-time}}"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "{{x-fapi-customer-ip-address}}"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{x-fapi-interaction-id}}"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n    \"Data\": {\n        \"ConsentId\": \"{{IntentId}}\",\n        \"Initiation\": {\n            \"InstructionIdentification\": \"ACME412\",\n            \"EndToEndIdentification\": \"FRESCO.21302.GFX.20\",\n            \"InstructedAmount\": {\n                \"Amount\": \"165.88\",\n                \"Currency\": \"GBP\"\n            },\n            \"CreditorAccount\": {\n                \"SchemeName\": \"UK.OBIE.SortCodeAccountNumber\",\n                \"Identification\": \"08080021325698\",\n                \"Name\": \"ACME Inc\",\n                \"SecondaryIdentification\": \"0002\"\n            },\n            \"DebtorAccount\": {\n                \"SchemeName\": \"UK.OBIE.SortCodeAccountNumber\",\n                \"Identification\": \"08080021312345\",\n                \"Name\": \"ACME Inc\",\n                \"SecondaryIdentification\": \"0003\"\n            },\n            \"RemittanceInformation\": {\n                \"Reference\": \"FRESCO-101\",\n                \"Unstructured\": \"Internal ops code 5120101\"\n            }\n        }\n    },\n    \"Risk\": {\n        \"PaymentContextCode\": \"EcommerceGoods\",\n        \"MerchantCategoryCode\": \"5967\",\n        \"MerchantCustomerIdentification\": \"053598653254\",\n        \"DeliveryAddress\": {\n            \"AddressLine\": [\n                \"Flat 7\",\n                \"Acacia Lodge\"\n            ],\n            \"StreetName\": \"Acacia Avenue\",\n            \"BuildingNumber\": \"27\",\n            \"PostCode\": \"GU31 2ZZ\",\n            \"TownName\": \"Sparsholt\",\n            \"CountySubDivision\": [\n                \"Wessex\"\n            ],\n            \"Country\": \"UK\"\n        }\n    }\n}"
												},
												"url": "{{RS_CreateDomesticPayment_v3.1}}"
											},
											"response": [
												{
													"name": "Payment submission",
													"originalRequest": {
														"method": "POST",
														"header": [
															{
																"key": "Authorization",
																"value": "Bearer {{access_token_with_consent}}"
															},
															{
																"key": "Content-Type",
																"value": "application/json"
															},
															{
																"key": "x-idempotency-key",
																"value": "FRESCO.21302.GFX.20"
															},
															{
																"key": "x-jws-signature",
																"value": "TGlmZSdzIGEgam91cm5leSBub3QgYSBkZXN0aW5hdGlvbiA=..T2ggZ29vZCBldmVuaW5nIG1yIHR5bGVyIGdvaW5nIGRvd24gPw==",
																"disabled": true
															},
															{
																"key": "x-fapi-financial-id",
																"value": "{{ASPSP_FINANCIAL_ID}}"
															},
															{
																"key": "x-fapi-customer-last-logged-time",
																"value": "Sun, 10 Sep 2017 19:43:31 UTC"
															},
															{
																"key": "x-fapi-customer-ip-address",
																"value": "104.25.212.99"
															},
															{
																"key": "x-fapi-interaction-id",
																"value": "93bac548-d2de-4546-b106-880a5018460d"
															},
															{
																"key": "Accept",
																"value": "application/json"
															}
														],
														"body": {
															"mode": "raw",
															"raw": "{\n  \"Data\": {\n    \"PaymentId\": \"{{PaymentId}}\",\n    \"Initiation\": {\n      \"InstructionIdentification\": \"ACME412\",\n      \"EndToEndIdentification\": \"FRESCO.21302.GFX.20\",\n      \"InstructedAmount\": {\n        \"Amount\": \"165.88\",\n        \"Currency\": \"GBP\"\n      },\n      \"CreditorAccount\": {\n        \"SchemeName\": \"SortCodeAccountNumber\",\n        \"Identification\": \"08080021325698\",\n        \"Name\": \"ACME Inc\",\n        \"SecondaryIdentification\": \"0002\"\n      },\n      \"RemittanceInformation\": {\n        \"Reference\": \"FRESCO-101\",\n        \"Unstructured\": \"Internal ops code 5120101\"\n      }\n    }\n  },\n  \"Risk\": {\n    \"PaymentContextCode\": \"EcommerceGoods\",\n    \"MerchantCategoryCode\": \"5967\",\n    \"MerchantCustomerIdentification\": \"053598653254\",\n    \"DeliveryAddress\": {\n      \"AddressLine\": [\n        \"Flat 7\",\n        \"Acacia Lodge\"\n      ],\n      \"StreetName\": \"Acacia Avenue\",\n      \"BuildingNumber\": \"27\",\n      \"PostCode\": \"GU31 2ZZ\",\n      \"TownName\": \"Sparsholt\",\n      \"CountySubDivision\": [\n        \"Wessex\"\n      ],\n      \"Country\": \"UK\"\n    }\n  }\n}"
														},
														"url": "{{RS_CreatePaymentSubmission_v2.0}}"
													},
													"status": "Created",
													"code": 201,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "Cache-Control",
															"value": "no-cache, no-store, max-age=0, must-revalidate",
															"name": "Cache-Control",
															"description": "Tells all caching mechanisms from server to client whether they may cache this object. It is measured in seconds"
														},
														{
															"key": "Content-Type",
															"value": "application/json;charset=utf-8",
															"name": "Content-Type",
															"description": "The mime type of this content"
														},
														{
															"key": "Date",
															"value": "Fri, 31 Aug 2018 23:38:12 GMT",
															"name": "Date",
															"description": "The date and time that the message was sent"
														},
														{
															"key": "Expires",
															"value": "0",
															"name": "Expires",
															"description": "Gives the date/time after which the response is considered stale"
														},
														{
															"key": "Pragma",
															"value": "no-cache",
															"name": "Pragma",
															"description": "Implementation-specific headers that may have various effects anywhere along the request-response chain."
														},
														{
															"key": "Strict-Transport-Security",
															"value": "max-age=31536000 ; includeSubDomains",
															"name": "Strict-Transport-Security",
															"description": "A HSTS Policy informing the HTTP client how long to cache the HTTPS only policy and whether this applies to subdomains."
														},
														{
															"key": "X-Content-Type-Options",
															"value": "nosniff",
															"name": "X-Content-Type-Options",
															"description": "The only defined value, \"nosniff\", prevents Internet Explorer from MIME-sniffing a response away from the declared content-type"
														},
														{
															"key": "X-Frame-Options",
															"value": "DENY",
															"name": "X-Frame-Options",
															"description": "Clickjacking protection: \"deny\" - no rendering within a frame, \"sameorigin\" - no rendering if origin mismatch"
														},
														{
															"key": "X-XSS-Protection",
															"value": "1; mode=block",
															"name": "X-XSS-Protection",
															"description": "Cross-site scripting (XSS) filter"
														},
														{
															"key": "transfer-encoding",
															"value": "chunked",
															"name": "transfer-encoding",
															"description": "The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "93bac548-d2de-4546-b106-880a5018460d",
															"name": "x-fapi-interaction-id",
															"description": "Custom header"
														}
													],
													"cookie": [
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "01",
															"key": "amlbcookie"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": false,
															"domain": "ob.forgerock.financial",
															"path": "/",
															"secure": false,
															"value": "7g2EmmA674oQbwhFmxU0GT094no.*AAJTSQACMDEAAlNLABx2am5pb2N2RnhHelNRU084T3E5YW92cDhjdG89AAJTMQAA*",
															"key": "iPlanetDirectoryPro"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": true,
															"domain": "rs.aspsp.ob.forgerock.financial",
															"path": "/v1.1",
															"secure": true,
															"value": "34F0FF6ADBE51B4332018415EB8726BF",
															"key": "JSESSIONID"
														},
														{
															"expires": "Invalid Date",
															"httpOnly": true,
															"domain": "rs.aspsp.ob.forgerock.financial",
															"path": "/",
															"secure": true,
															"value": "B165242A9E44929BEB0404056A48E34D",
															"key": "JSESSIONID"
														}
													],
													"body": "{\"Data\":{\"PaymentSubmissionId\":\"764b7ff1-3c92-466a-a3d7-34bbf408a141\",\"PaymentId\":\"Pfda39ef6-c81f-49b6-9100-068fb88bb8d8\",\"Status\":\"AcceptedSettlementInProcess\",\"CreationDateTime\":\"2018-08-31T23:38:12+00:00\"}}"
												}
											]
										}
									],
									"protocolProfileBehavior": {},
									"_postman_isSubFolder": true
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "IAM Configuration",
			"item": [
				{
					"name": "AM - Authenticate",
					"item": [
						{
							"name": "Get AM admin session",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept-API-Version",
										"value": "protocol=1.0,resource=2.1",
										"type": "text"
									},
									{
										"key": "X-OpenAM-Username",
										"value": "{{adminUsername}}",
										"type": "text"
									},
									{
										"key": "X-OpenAM-Password",
										"value": "{{adminPassword}}",
										"type": "text"
									}
								],
								"url": "https://{{iamFQDN}}/am/json/realms/root/authenticate"
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "e6a5700a-7017-47ae-a7c8-134fbfb365e0",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "ae2f53cb-26e1-40d9-8ade-e26a455fc470",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "AM - OAuth2 Config",
					"item": [
						{
							"name": "Create Remote Consent Service",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Accept-API-Version",
										"value": "protocol=2.0,resource=1.0",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userpassword\": null,\n  \"remoteConsentRequestEncryptionAlgorithm\": {\n    \"inherited\": false,\n    \"value\": \"RSA-OAEP-256\"\n  },\n  \"publicKeyLocation\": {\n    \"inherited\": false,\n    \"value\": \"jwks_uri\"\n  },\n  \"jwksCacheTimeout\": {\n    \"inherited\": false,\n    \"value\": 0\n  },\n  \"remoteConsentResponseSigningAlg\": {\n    \"inherited\": false,\n    \"value\": \"RS256\"\n  },\n  \"remoteConsentRequestSigningAlgorithm\": {\n    \"inherited\": false,\n    \"value\": \"RS256\"\n  },\n  \"jwkSet\": {\n    \"inherited\": false\n  },\n  \"jwkStoreCacheMissCacheTime\": {\n    \"inherited\": false,\n    \"value\": 0\n  },\n  \"remoteConsentResponseEncryptionMethod\": {\n    \"inherited\": false,\n    \"value\": \"A128GCM\"\n  },\n  \"remoteConsentRedirectUrl\": {\n    \"inherited\": false,\n    \"value\": \"https://{{FQDN}}/rcs\"\n  },\n  \"remoteConsentRequestEncryptionEnabled\": {\n    \"inherited\": false,\n    \"value\": false\n  },\n  \"remoteConsentRequestEncryptionMethod\": {\n    \"inherited\": false,\n    \"value\": \"A128GCM\"\n  },\n  \"remoteConsentResponseEncryptionAlgorithm\": {\n    \"inherited\": false,\n    \"value\": \"RSA-OAEP-256\"\n  },\n  \"requestTimeLimit\": {\n    \"inherited\": false,\n    \"value\": 0\n  },\n  \"jwksUri\": {\n    \"inherited\": false,\n    \"value\": \"http://obdemo-rcs-api:8083/api/rcs/consent/jwk_pub\"\n  },\n  \"_type\": {\n    \"_id\": \"RemoteConsentAgent\",\n    \"name\": \"OAuth2 Remote Consent Service\",\n    \"collection\": true\n  }\n}\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://{{iamFQDN}}/am/json/realms/root/realms/{{realm}}/realm-config/agents/RemoteConsentAgent/forgerock-rcs"
							},
							"response": []
						},
						{
							"name": "Create Software Publisher Agent",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Accept-API-Version",
										"type": "text",
										"value": "protocol=2.0,resource=1.0"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userpassword\": null,\n  \"publicKeyLocation\": {\n    \"inherited\": false,\n    \"value\": \"jwks_uri\"\n  },\n  \"jwksCacheTimeout\": {\n    \"inherited\": false,\n    \"value\": 3600000\n  },\n  \"softwareStatementSigningAlgorithm\": {\n    \"inherited\": false,\n    \"value\": \"PS256\"\n  },\n  \"jwkSet\": {\n    \"inherited\": false\n  },\n  \"issuer\": {\n    \"inherited\": false,\n    \"value\": \"ForgeRock\"\n  },\n  \"jwkStoreCacheMissCacheTime\": {\n    \"inherited\": false,\n    \"value\": 60000\n  },\n  \"jwksUri\": {\n    \"inherited\": false,\n    \"value\": \"https://service.directory.ob.forgerock.financial/api/directory/keys/jwk_uri\"\n  }\n}\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://{{iamFQDN}}/am/json/realms/root/realms/{{realm}}/realm-config/agents/SoftwarePublisher/OBRI"
							},
							"response": []
						},
						{
							"name": "Create OIDC Claims Script",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "079995a1-1dcd-4324-8b75-47db1c9f8390",
										"exec": [
											"var data = JSON.parse(responseBody);",
											"",
											"postman.setEnvironmentVariable(\"oidcClaimsScriptId\", data._id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept-API-Version",
										"type": "text",
										"value": "protocol=2.0,resource=1.0"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"Open Banking OIDC Claims Script\",\n  \"script\": \"LyoKICogQ29weXJpZ2h0IDIwMTQtMjAxOSBGb3JnZVJvY2sgQVMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQKICoKICogVXNlIG9mIHRoaXMgY29kZSByZXF1aXJlcyBhIGNvbW1lcmNpYWwgc29mdHdhcmUgbGljZW5zZSB3aXRoIEZvcmdlUm9jayBBUy4KICogb3Igd2l0aCBvbmUgb2YgaXRzIGFmZmlsaWF0ZXMuIEFsbCB1c2Ugc2hhbGwgYmUgZXhjbHVzaXZlbHkgc3ViamVjdAogKiB0byBzdWNoIGxpY2Vuc2UgYmV0d2VlbiB0aGUgbGljZW5zZWUgYW5kIEZvcmdlUm9jayBBUy4KICovCmltcG9ydCBjb20uaXBsYW5ldC5zc28uU1NPRXhjZXB0aW9uCmltcG9ydCBjb20uc3VuLmlkZW50aXR5LmlkbS5JZFJlcG9FeGNlcHRpb24KaW1wb3J0IG9yZy5mb3JnZXJvY2sub2F1dGgyLmNvcmUuZXhjZXB0aW9ucy5JbnZhbGlkUmVxdWVzdEV4Y2VwdGlvbgppbXBvcnQgb3JnLmZvcmdlcm9jay5vYXV0aDIuY29yZS5Vc2VySW5mb0NsYWltcwppbXBvcnQgb3JnLmZvcmdlcm9jay5vcGVuaWRjb25uZWN0LkNsYWltCmltcG9ydCBncm9vdnkuanNvbi5Kc29uU2x1cnBlcgppbXBvcnQgb3JnLmFwYWNoZS5ncm9vdnkuanNvbi5pbnRlcm5hbC5MYXp5TWFwCgovKgoqIERlZmluZWQgdmFyaWFibGVzOgoqIGxvZ2dlciAtIGFsd2F5cyBwcmVzZW50cywgdGhlICJPQXV0aDJQcm92aWRlciIgZGVidWcgbG9nZ2VyIGluc3RhbmNlCiogY2xhaW1zIC0gYWx3YXlzIHByZXNlbnQsIGRlZmF1bHQgc2VydmVyIHByb3ZpZGVkIGNsYWltcyAtIE1hcDxTdHJpbmcsIE9iamVjdD4KKiBjbGFpbU9iamVjdHMgLSBhbHdheXMgcHJlc2VudCwgZGVmYXVsdCBzZXJ2ZXIgcHJvdmlkZWQgY2xhaW1zIC0gTGlzdDxDbGFpbT4KKiBzZXNzaW9uIC0gcHJlc2VudCBpZiB0aGUgcmVxdWVzdCBjb250YWlucyB0aGUgc2Vzc2lvbiBjb29raWUsIHRoZSB1c2VyJ3Mgc2Vzc2lvbiBvYmplY3QKKiBpZGVudGl0eSAtIGFsd2F5cyBwcmVzZW50LCB0aGUgaWRlbnRpdHkgb2YgdGhlIHJlc291cmNlIG93bmVyCiogc2NvcGVzIC0gYWx3YXlzIHByZXNlbnQsIHRoZSByZXF1ZXN0ZWQgc2NvcGVzCiogcmVxdWVzdGVkQ2xhaW1zIC0gTWFwPFN0cmluZywgU2V0PFN0cmluZz4+CiogICAgICAgICAgICAgICAgICBhbHdheXMgcHJlc2VudCwgbm90IGVtcHR5IGlmIHRoZSByZXF1ZXN0IGNvbnRhaW5zIGEgY2xhaW1zIHBhcmFtZXRlciBhbmQgc2VydmVyIGhhcyBlbmFibGVkCiogICAgICAgICAgICAgICAgICBjbGFpbXNfcGFyYW1ldGVyX3N1cHBvcnRlZCwgbWFwIG9mIHJlcXVlc3RlZCBjbGFpbXMgdG8gcG9zc2libGUgdmFsdWVzLCBvdGhlcndpc2UgZW1wdHksCiogICAgICAgICAgICAgICAgICByZXF1ZXN0ZWQgY2xhaW1zIHdpdGggbm8gcmVxdWVzdGVkIHZhbHVlcyB3aWxsIGhhdmUgYSBrZXkgYnV0IG5vIHZhbHVlIGluIHRoZSBtYXAuIEEga2V5IHdpdGgKKiAgICAgICAgICAgICAgICAgIGEgc2luZ2xlIHZhbHVlIGluIGl0cyBTZXQgaW5kaWNhdGVzIHRoaXMgaXMgdGhlIG9ubHkgdmFsdWUgdGhhdCBzaG91bGQgYmUgcmV0dXJuZWQuCiogcmVxdWVzdGVkVHlwZWRDbGFpbXMgLSBMaXN0PENsYWltPgoqICAgICAgICAgICAgICAgICAgICAgICBhbHdheXMgcHJlc2VudCwgbm90IGVtcHR5IGlmIHRoZSByZXF1ZXN0IGNvbnRhaW5zIGEgY2xhaW1zIHBhcmFtZXRlciBhbmQgc2VydmVyIGhhcyBlbmFibGVkCiogICAgICAgICAgICAgICAgICAgICAgIGNsYWltc19wYXJhbWF0ZXJfc3VwcG9ydGVkLCBsaXN0IG9mIHJlcXVlc3RlZCBjbGFpbXMgd2l0aCBjbGFpbSBuYW1lLCByZXF1ZXN0ZWQgcG9zc2libGUgdmFsdWVzCiogICAgICAgICAgICAgICAgICAgICAgIGFuZCBpZiBjbGFpbSBpcyBlc3NlbnRpYWwsIG90aGVyd2lzZSBlbXB0eSwKKiAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkIGNsYWltcyB3aXRoIG5vIHJlcXVlc3RlZCB2YWx1ZXMgd2lsbCBoYXZlIGEgY2xhaW0gd2l0aCBubyB2YWx1ZXMuIEEgY2xhaW1zIHdpdGgKKiAgICAgICAgICAgICAgICAgICAgICAgYSBzaW5nbGUgdmFsdWUgaW5kaWNhdGVzIHRoaXMgaXMgdGhlIG9ubHkgdmFsdWUgdGhhdCBzaG91bGQgYmUgcmV0dXJuZWQuCiogY2xhaW1zTG9jYWxlcyAtIHRoZSB2YWx1ZXMgZnJvbSB0aGUgJ2NsYWltc19sb2NhbGVzJyBwYXJhbWV0ZXIgLSBMaXN0PFN0cmluZz4KKiBSZXF1aXJlZCB0byByZXR1cm4gYSBNYXAgb2YgY2xhaW1zIHRvIGJlIGFkZGVkIHRvIHRoZSBpZF90b2tlbiBjbGFpbXMKKgoqIEV4cGVjdGVkIHJldHVybiB2YWx1ZSBzdHJ1Y3R1cmU6CiogVXNlckluZm9DbGFpbXMgewoqICAgIE1hcDxTdHJpbmcsIE9iamVjdD4gdmFsdWVzOyAvLyBUaGUgdmFsdWVzIG9mIHRoZSBjbGFpbXMgZm9yIHRoZSB1c2VyIGluZm9ybWF0aW9uCiogICAgTWFwPFN0cmluZywgTGlzdDxTdHJpbmc+PiBjb21wb3NpdGVTY29wZXM7IC8vIE1hcHBpbmcgb2Ygc2NvcGUgbmFtZSB0byBhIGxpc3Qgb2YgY2xhaW0gbmFtZXMuCiogfQoqLwoKLy8gdXNlciBzZXNzaW9uIG5vdCBndWFyYW50ZWVkIHRvIGJlIHByZXNlbnQKYm9vbGVhbiBzZXNzaW9uUHJlc2VudCA9IHNlc3Npb24gIT0gbnVsbAoKLyoKICogUHVsbHMgZmlyc3QgdmFsdWUgZnJvbSB1c2VycyBwcm9maWxlIGF0dHJpYnV0ZQogKgogKiBAcGFyYW0gY2xhaW0gVGhlIGNsYWltIG9iamVjdC4KICogQHBhcmFtIGF0dHIgVGhlIHByb2ZpbGUgYXR0cmlidXRlIG5hbWUuCiAqLwpkZWYgZnJvbVNldCA9IHsgY2xhaW0sIGF0dHIgLT4KICAgIGlmIChhdHRyICE9IG51bGwgJiYgYXR0ci5zaXplKCkgPT0gMSl7CiAgICAgICAgYXR0ci5pdGVyYXRvcigpLm5leHQoKQogICAgfSBlbHNlIGlmIChhdHRyICE9IG51bGwgJiYgYXR0ci5zaXplKCkgPiAxKXsKICAgICAgICBhdHRyCiAgICB9IGVsc2UgaWYgKGxvZ2dlci53YXJuaW5nRW5hYmxlZCgpKSB7CiAgICAgICAgbG9nZ2VyLndhcm5pbmcoIk9wZW5BTVNjb3BlVmFsaWRhdG9yLmdldFVzZXJJbmZvKCk6IEdvdCBhbiBlbXB0eSByZXN1bHQgZm9yIGNsYWltPSRjbGFpbSIpOwogICAgfQp9CgovLyAtLS12dnZ2dnZ2dnZ2LS0tIEVYQU1QTEUgQ0xBSU0gQVRUUklCVVRFIFJFU09MVkVSIEZVTkNUSU9OUyAtLS12dnZ2dnZ2dnZ2LS0tCi8qCiAqIENsYWltIHJlc29sdmVyIHdoaWNoIHJlc29sdmVzIHRoZSB2YWx1ZSBvZiB0aGUgY2xhaW0gZnJvbSBpdHMgcmVxdWVzdGVkIHZhbHVlcy4KICoKICogVGhpcyByZXNvbHZlciB3aWxsIHJldHVybiBhIHZhbHVlIGlmIHRoZSBjbGFpbSBoYXMgb25lIHJlcXVlc3RlZCB2YWx1ZXMsIG90aGVyd2lzZSBhbiBleGNlcHRpb24gaXMgdGhyb3duLgogKi8KZGVmYXVsdENsYWltUmVzb2x2ZXIgPSB7IGNsYWltIC0+CiAgICBpZiAoY2xhaW0uZ2V0VmFsdWVzKCkuc2l6ZSgpID09IDEpIHsKICAgICAgICBbKGNsYWltLmdldE5hbWUoKSk6IGNsYWltLmdldFZhbHVlcygpLml0ZXJhdG9yKCkubmV4dCgpXQogICAgfSBlbHNlIHsKICAgICAgICBbOl0KICAgIH0KfQoKLyoKICogQ2xhaW0gcmVzb2x2ZXIgd2hpY2ggcmVzb2x2ZXMgdGhlIHZhbHVlIG9mIHRoZSBjbGFpbSBieSBsb29raW5nIHVwIHRoZSB1c2VyJ3MgcHJvZmlsZS4KICoKICogVGhpcyByZXNvbHZlciB3aWxsIHJldHVybiBhIHZhbHVlIGZvciB0aGUgY2xhaW0gaWY6CiAqICMgdGhlIHVzZXIncyBwcm9maWxlIGF0dHJpYnV0ZSBpcyBub3QgbnVsbAogKiAjIEFORCB0aGUgY2xhaW0gY29udGFpbnMgbm8gcmVxdWVzdGVkIHZhbHVlcwogKiAjIE9SIHRoZSBjbGFpbSBjb250YWlucyByZXF1ZXN0ZWQgdmFsdWVzIGFuZCB0aGUgdmFsdWUgZnJvbSB0aGUgdXNlcidzIHByb2ZpbGUgaXMgaW4gdGhlIGxpc3Qgb2YgdmFsdWVzCiAqCiAqIElmIG5vIG1hdGNoIGlzIGZvdW5kIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24uCiAqLwoKbmFtZVJlc29sdmVyID0geyBhdHRyaWJ1dGUsIGNsYWltLCBpZGVudGl0eSAtPgogICAgdXNlclByb2ZpbGVWYWx1ZSA9IGZyb21TZXQoY2xhaW0uZ2V0TmFtZSgpLCBpZGVudGl0eS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKSkKICAgIGlmICh1c2VyUHJvZmlsZVZhbHVlICE9IG51bGwgJiYgKGNsYWltLmdldFZhbHVlcygpID09IG51bGwgfHwgY2xhaW0uZ2V0VmFsdWVzKCkuaXNFbXB0eSgpIHx8IGNsYWltLmdldFZhbHVlcygpLmNvbnRhaW5zKHVzZXJQcm9maWxlVmFsdWUpKSkgewogICAgICAgIGRlZiB2YWx1ZSA9IHRvSnNvbih1c2VyUHJvZmlsZVZhbHVlKQogICAgICAgIC8vIEB0b2RvIG5hbWUgaW5jbHVkaW5nIGFsbCBuYW1lIHBhcnRzLCBwb3NzaWJseSBpbmNsdWRpbmcgdGl0bGVzIGFuZCBzdWZmaXhlcywgb3JkZXJlZCBhY2NvcmRpbmcgdG8gdGhlIEVuZC1Vc2VyJ3MgbG9jYWxlIGFuZCBwcmVmZXJlbmNlcy4KICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBMYXp5TWFwKSB7CiAgICAgICAgICAJaWYgKHZhbHVlLmdpdmVuTmFtZSAmJiB2YWx1ZS5mYW1pbHlOYW1lICYmIHZhbHVlLm1pZGRsZU5hbWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgImZhbWlseV9uYW1lIjogdmFsdWUuZmFtaWx5TmFtZSwKICAgICAgICAgICAgICAgICAgICAiZ2l2ZW5fbmFtZSI6IHZhbHVlLmdpdmVuTmFtZSwKICAgICAgICAgICAgICAgICAgCSJtaWRkbGVfbmFtZSI6IHZhbHVlLm1pZGRsZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAiJHZhbHVlLmdpdmVuTmFtZSAkdmFsdWUubWlkZGxlTmFtZSAkdmFsdWUuZmFtaWx5TmFtZSIudHJpbSgpLAogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLmdpdmVuTmFtZSAmJiB2YWx1ZS5mYW1pbHlOYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgICAgICJmYW1pbHlfbmFtZSI6IHZhbHVlLmZhbWlseU5hbWUsCiAgICAgICAgICAgICAgICAgICAgImdpdmVuX25hbWUiOiB2YWx1ZS5naXZlbk5hbWUsCiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAiJHZhbHVlLmdpdmVuTmFtZSAkdmFsdWUuZmFtaWx5TmFtZSIudHJpbSgpLAogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLmZhbWlseU5hbWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgImZhbWlseV9uYW1lIjogdmFsdWUuZmFtaWx5TmFtZSwKICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHZhbHVlLmZhbWlseU5hbWUsCiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuZ2l2ZW5OYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgICAgICJnaXZlbl9uYW1lIjogdmFsdWUuZ2l2ZW5OYW1lLAogICAgICAgICAgICAgICAgICAgICJuYW1lIjogdmFsdWUuZ2l2ZW5OYW1lLAogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAibmFtZSI6IHZhbHVlLAogICAgICAgICAgICBdCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgICJuYW1lIjogdmFsdWUsCiAgICAgICAgICAgIF0KICAgICAgICB9CiAgICB9CiAgICBbOl0KfQoKYWRkcmVzc1Jlc29sdmVyID0geyBhdHRyaWJ1dGUsIGNsYWltLCBpZGVudGl0eSAtPgogIAlkZWYgbmFtZSA9IGNsYWltLmdldE5hbWUoKQogICAgbG9nZ2VyLm1lc3NhZ2UoImFkZHJlc3NSZXNvbHZlcjogIiArIG5hbWUpCiAgICAKICAJZGVmIGpzb25WYWx1ZSA9IGZyb21TZXQobmFtZSwgaWRlbnRpdHkuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSkpCglpZiAoanNvblZhbHVlID09IG51bGwpIHsKICAgIAlyZXR1cm4gWzpdCiAgCX0KICAKICAJZGVmIGFkZHJlc3MgPSB0b0pzb24oanNvblZhbHVlKQoKICAJLy8gQ3JlYXRlIGluZGl2aWR1YWwgcHJvcGVydGllcwogIAlkZWYgbWFwID0gWzpdCiAgCWlmIChhZGRyZXNzLnN0cmVldEFkZHJlc3MpIHsKICAgIAltYXAucHV0KCJzdHJlZXRfYWRkcmVzcyIsIGFkZHJlc3Muc3RyZWV0QWRkcmVzcykKICAJfQogIAlpZiAoYWRkcmVzcy5sb2NhbGl0eSkgewogICAgCW1hcC5wdXQoImxvY2FsaXR5IiwgYWRkcmVzcy5sb2NhbGl0eSkKICAJfQogIAlpZiAoYWRkcmVzcy5yZWdpb24pIHsKICAgIAltYXAucHV0KCJyZWdpb24iLCBhZGRyZXNzLnJlZ2lvbikKICAJfQogIAlpZiAoYWRkcmVzcy5wb3N0YWxDb2RlKSB7CiAgICAJbWFwLnB1dCgicG9zdGFsX2NvZGUiLCBhZGRyZXNzLnBvc3RhbENvZGUpCiAgCX0KICAJaWYgKGFkZHJlc3MuY291bnRyeSkgewogICAgCW1hcC5wdXQoImNvdW50cnkiLCBhZGRyZXNzLmNvdW50cnkpCiAgCX0KICAKICAJLy8gQ3JlYXRlIGZvcm1hdHRlZCBhZGRyZXNzCiAgCWRlZiBmb3JtYXR0ZWQgPSBbXQogIAlkZWYgbG9jYWxpdHlSZWdpb25TZXAgPSAiLCAiCiAgCWlmICghYWRkcmVzcy5sb2NhbGl0eSB8fCAhYWRkcmVzcy5yZWdpb24pIHsKICAgIAlsb2NhbGl0eVJlZ2lvblNlcCA9ICIiCiAgCX0KICAJaWYgKGFkZHJlc3Muc3RyZWV0QWRkcmVzcykgewogICAgICAJZm9ybWF0dGVkIDw8IGFkZHJlc3Muc3RyZWV0QWRkcmVzcwogIAl9CiAgCWlmIChhZGRyZXNzLmxvY2FsaXR5IHx8IGFkZHJlc3MucmVnaW9uIHx8IGFkZHJlc3MucG9zdGFsQ29kZSkgewogICAgCWZvcm1hdHRlZCA8PCAoYWRkcmVzcy5sb2NhbGl0eSArIGxvY2FsaXR5UmVnaW9uU2VwICsgYWRkcmVzcy5yZWdpb24gKyAiICIgKyBhZGRyZXNzLnBvc3RhbENvZGUpLnRyaW0oKQogIAl9CiAgCWlmIChhZGRyZXNzLmNvdW50cnkpIHsKICAgIAlmb3JtYXR0ZWQgPDwgYWRkcmVzcy5jb3VudHJ5CiAgCX0KICAJaWYgKGZvcm1hdHRlZC5zaXplKCkgPiAwKSB7CiAgICAJbWFwLnB1dCgiZm9ybWF0dGVkIiwgZm9ybWF0dGVkLmpvaW4oIlxuIikpCiAgCX0KICAgICAgICAgICAgICAKICAgCXJldHVybiBbYWRkcmVzczogbWFwXQp9CgphdHRyaWJ1dGVSZXNvbHZlciA9IHsgYXR0cmlidXRlLCBmaWVsZCwgdXNlUHJpbWFyeSwgYWRkVmVyaWZpZWQsIGNsYWltLCBpZGVudGl0eSAtPgogIAluYW1lID0gY2xhaW0uZ2V0TmFtZSgpCiAgICBsb2dnZXIubWVzc2FnZSgiYXR0cmlidXRlUmVzb2x2ZXI6ICIgKyBuYW1lKQogIAogICAgdmFsdWUgPSBmcm9tU2V0KG5hbWUsIGlkZW50aXR5LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpKQoKICAJaWYgKHZhbHVlICE9IG51bGwgJiYgKGNsYWltLmdldFZhbHVlcygpID09IG51bGwgfHwgY2xhaW0uZ2V0VmFsdWVzKCkuaXNFbXB0eSgpIHx8IGNsYWltLmdldFZhbHVlcygpLmNvbnRhaW5zKHZhbHVlKSkpIHsKICAgICAgICB2YWx1ZSA9IHRvSnNvbih2YWx1ZSkKICAgICAgICBpZiAodXNlUHJpbWFyeSkgewogICAgICAgICAgICB2YWx1ZSA9IGdldFByaW1hcnlPckZpcnN0KHZhbHVlKQogICAgICAgIH0KICAgICAgCiAgICAgICAJaXNNYXAgPSB2YWx1ZSAhPSBudWxsICYmIHZhbHVlIGluc3RhbmNlb2YgTGF6eU1hcAogICAgICAgCWhhc0ZpZWxkID0gaXNNYXAgJiYgZmllbGQgaW5zdGFuY2VvZiBTdHJpbmcgJiYgdmFsdWUuY29udGFpbnNLZXkoZmllbGQpCiAgICAgIAloYXNWZXJpZmllZCA9IGlzTWFwICYmIHZhbHVlLmNvbnRhaW5zS2V5KCJ2ZXJpZmllZCIpCgogICAgICAJaWYgKGFkZFZlcmlmaWVkICYmIGhhc1ZlcmlmaWVkKSB7ICAgICAgICAgIAkKICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgIChuYW1lICsgIl92ZXJpZmllZCIpOiBoYXNWZXJpZmllZCAmJiB2YWx1ZS52ZXJpZmllZCA9PSB0cnVlLAogICAgICAgICAgICAgICAgKG5hbWUpOiBoYXNGaWVsZCA/IHZhbHVlW2ZpZWxkXSA6IHZhbHVlLAogICAgICAgICAgICBdCiAgICAgICAgfQogICAgICAKICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAobmFtZSk6IGhhc0ZpZWxkID8gdmFsdWVbZmllbGRdIDogdmFsdWUsCiAgICAgICAgXQogICAgfQogICAgWzpdCn0KCmJhc2ljUmVzb2x2ZXIgPSB7IGF0dHJpYnV0ZSwgY2xhaW0sIGlkZW50aXR5IC0+CiAgICBuYW1lID0gY2xhaW0uZ2V0TmFtZSgpCiAgICBsb2dnZXIubWVzc2FnZSgiYmFzaWNSZXNvbHZlcjogIiArIG5hbWUpCiAgICB1c2VyUHJvZmlsZVZhbHVlID0gZnJvbVNldChuYW1lLCBpZGVudGl0eS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKSkKICAgIGlmICh1c2VyUHJvZmlsZVZhbHVlICE9IG51bGwgJiYgKGNsYWltLmdldFZhbHVlcygpID09IG51bGwgfHwgY2xhaW0uZ2V0VmFsdWVzKCkuaXNFbXB0eSgpIHx8IGNsYWltLmdldFZhbHVlcygpLmNvbnRhaW5zKHVzZXJQcm9maWxlVmFsdWUpKSkgewogICAgICAgIGRlZiB2YWx1ZSA9IHRvSnNvbih1c2VyUHJvZmlsZVZhbHVlKQogICAgICAgIHZhbHVlID0gZ2V0UHJpbWFyeU9yRmlyc3QodmFsdWUpCiAgICAgICAgcmV0dXJuIFsobmFtZSk6IHZhbHVlXQogICAgfQogICAgWzpdCn0KCmRhdGVSZXNvbHZlciA9IHsgYXR0cmlidXRlLCBjbGFpbSwgaWRlbnRpdHkgLT4KICAgIG5hbWUgPSBjbGFpbS5nZXROYW1lKCkKICAgIGxvZ2dlci5tZXNzYWdlKCJkYXRlUmVzb2x2ZXI6ICIgKyBuYW1lKQogICAgdXNlclByb2ZpbGVWYWx1ZSA9IGZyb21TZXQobmFtZSwgaWRlbnRpdHkuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSkpCiAgICBpZiAodXNlclByb2ZpbGVWYWx1ZSAhPSBudWxsICYmIChjbGFpbS5nZXRWYWx1ZXMoKSA9PSBudWxsIHx8IGNsYWltLmdldFZhbHVlcygpLmlzRW1wdHkoKSB8fCBjbGFpbS5nZXRWYWx1ZXMoKS5jb250YWlucyh1c2VyUHJvZmlsZVZhbHVlKSkpIHsKICAgICAgCWRlZiB2YWx1ZSA9IHRvSnNvbih1c2VyUHJvZmlsZVZhbHVlKQogICAgICAJdmFsdWUgPSBnZXRQcmltYXJ5T3JGaXJzdCh2YWx1ZSkKICAgICAgICBkZWYgZGF0ZUZvcm1hdCA9IG5ldyBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdCgieXl5eU1NZGRISG1tc3MiKQogICAgICAgIGRlZiBkYXRlID0gZGF0ZUZvcm1hdC5wYXJzZSh2YWx1ZSk7CgkJcmV0dXJuIFsobmFtZSk6IGRhdGUudGltZSAvIDEwMDBdCiAgICB9CiAgICBbOl0KfQoKZ2V0UHJpbWFyeU9yRmlyc3QgPSB7IHZhbHVlIC0+CiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBqYXZhLnV0aWwuQXJyYXlMaXN0KSB7CiAgICAgICAgLy8gbG9vayBmb3IgcHJpbWFyeQogICAgICAgIGZvciAoaXRlbSBpbiB2YWx1ZSkgewogICAgICAgICAgCW9iaiA9IHRvSnNvbihpdGVtKQogICAgICAgICAgICBpZiAob2JqLmhhc1Byb3BlcnR5KCJwcmltYXJ5IikgJiYgb2JqLnByaW1hcnkgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iagogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIHJldHVybiBmaXJzdAogICAgICAgIHJldHVybiB0b0pzb24odmFsdWVbMF0pCiAgICB9CiAgICByZXR1cm4gdmFsdWUKfQoKdG9Kc29uID0geyB2YWx1ZSAtPgogICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgamF2YS51dGlsLkhhc2hTZXQpIHsKICAgICAgICBkZWYganNvblNldCA9IFtdCiAgICAgICAgdmFsdWUuZWFjaCB7IGkgLT4KICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGpzb25TZXQuYWRkKHRvSnNvbihpKSkKICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICBqc29uU2V0LmFkZChpKQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICByZXR1cm4ganNvblNldAogICAgfQogICAgdHJ5IHsKICAgICAgICByZXR1cm4gbmV3IEpzb25TbHVycGVyKCkucGFyc2VUZXh0KHZhbHVlKQogICAgfSBjYXRjaChlKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlCiAgICB9Cn0KCgovKgogKiBDbGFpbSByZXNvbHZlciB3aGljaCByZXNvbHZlcyB0aGUgdmFsdWUgb2YgdGhlIGNsYWltIGJ5IGxvb2tpbmcgdXAgdGhlIHVzZXIncyBwcm9maWxlLgogKgogKiBUaGlzIHJlc29sdmVyIHdpbGwgcmV0dXJuIGEgdmFsdWUgZm9yIHRoZSBjbGFpbSBpZjoKICogIyB0aGUgdXNlcidzIHByb2ZpbGUgYXR0cmlidXRlIGlzIG5vdCBudWxsCiAqICMgQU5EIHRoZSBjbGFpbSBjb250YWlucyBubyByZXF1ZXN0ZWQgdmFsdWVzCiAqICMgT1IgdGhlIGNsYWltIGNvbnRhaW5zIHJlcXVlc3RlZCB2YWx1ZXMgYW5kIHRoZSB2YWx1ZSBmcm9tIHRoZSB1c2VyJ3MgcHJvZmlsZSBpcyBpbiB0aGUgbGlzdCBvZiB2YWx1ZXMKICoKICogSWYgdGhlIGNsYWltIGlzIGVzc2VudGlhbCBhbmQgbm8gdmFsdWUgaXMgZm91bmQgYW4gSW52YWxpZFJlcXVlc3RFeGNlcHRpb24gd2lsbCBiZSB0aHJvd24gYW5kIHJldHVybmVkIHRvIHRoZSB1c2VyLgogKiBJZiBubyBtYXRjaCBpcyBmb3VuZCBhbiBleGNlcHRpb24gaXMgdGhyb3duLgogKi8KZXNzZW50aWFsQ2xhaW1SZXNvbHZlciA9IHsgYXR0cmlidXRlLCBjbGFpbSwgaWRlbnRpdHkgLT4KICAgIHVzZXJQcm9maWxlVmFsdWUgPSBmcm9tU2V0KGNsYWltLmdldE5hbWUoKSwgaWRlbnRpdHkuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSkpCiAgICBpZiAoY2xhaW0uaXNFc3NlbnRpYWwoKSAmJiAodXNlclByb2ZpbGVWYWx1ZSA9PSBudWxsIHx8IHVzZXJQcm9maWxlVmFsdWUuaXNFbXB0eSgpKSkgewogICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVxdWVzdEV4Y2VwdGlvbigiQ291bGQgbm90IHByb3ZpZGUgdmFsdWUgZm9yIGVzc2VudGlhbCBjbGFpbSAkY2xhaW0iKQogICAgfQogICAgaWYgKHVzZXJQcm9maWxlVmFsdWUgIT0gbnVsbCAmJiAoY2xhaW0uZ2V0VmFsdWVzKCkgPT0gbnVsbCB8fCBjbGFpbS5nZXRWYWx1ZXMoKS5pc0VtcHR5KCkgfHwgY2xhaW0uZ2V0VmFsdWVzKCkuY29udGFpbnModXNlclByb2ZpbGVWYWx1ZSkpKSB7CiAgICAgICAgcmV0dXJuIFsoY2xhaW0uZ2V0TmFtZSgpKTogdXNlclByb2ZpbGVWYWx1ZV0KICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFs6XQogICAgfQp9CgovKgogKiBDbGFpbSByZXNvbHZlciB3aGljaCBleHBlY3RzIHRoZSB1c2VyJ3MgcHJvZmlsZSBhdHRyaWJ1dGUgdmFsdWUgdG8gYmUgaW4gdGhlIGZvbGxvd2luZyBmb3JtYXQ6CiAqICJsYW5ndWFnZV90YWd8dmFsdWVfZm9yX2xhbmd1YWdlLC4uLiIuCiAqCiAqIFRoaXMgcmVzb2x2ZXIgd2lsbCB0YWtlIHRoZSBsaXN0IG9mIHJlcXVlc3RlZCBsYW5ndWFnZXMgZnJvbSB0aGUgJ2NsYWltc19sb2NhbGVzJyBhdXRob3JpemUgcmVxdWVzdAogKiBwYXJhbWV0ZXIgYW5kIGF0dGVtcHQgdG8gbWF0Y2ggaXQgdG8gYSB2YWx1ZSBmcm9tIHRoZSB1c2VycycgcHJvZmlsZSBhdHRyaWJ1dGUuCiAqIElmIG5vIG1hdGNoIGlzIGZvdW5kIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24uCiAqLwpjbGFpbUxvY2FsZXNDbGFpbVJlc29sdmVyID0geyBhdHRyaWJ1dGUsIGNsYWltLCBpZGVudGl0eSAtPgogICAgdXNlclByb2ZpbGVWYWx1ZSA9IGZyb21TZXQoY2xhaW0uZ2V0TmFtZSgpLCBpZGVudGl0eS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKSkKICAgIGlmICh1c2VyUHJvZmlsZVZhbHVlICE9IG51bGwpIHsKICAgICAgICBsb2NhbGVWYWx1ZXMgPSBwYXJzZUxvY2FsZUF3YXJlU3RyaW5nKHVzZXJQcm9maWxlVmFsdWUpCiAgICAgICAgbG9jYWxlID0gY2xhaW1zTG9jYWxlcy5maW5kIHsgbG9jYWxlIC0+IGxvY2FsZVZhbHVlcy5jb250YWluc0tleShsb2NhbGUpIH0KICAgICAgICBpZiAobG9jYWxlICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIFsoY2xhaW0uZ2V0TmFtZSgpKTogbG9jYWxlVmFsdWVzLmdldChsb2NhbGUpXQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBbOl0KfQoKLyoKICogQ2xhaW0gcmVzb2x2ZXIgd2hpY2ggZXhwZWN0cyB0aGUgdXNlcidzIHByb2ZpbGUgYXR0cmlidXRlIHZhbHVlIHRvIGJlIGluIHRoZSBmb2xsb3dpbmcgZm9ybWF0OgogKiAibGFuZ3VhZ2VfdGFnfHZhbHVlX2Zvcl9sYW5ndWFnZSwuLi4iLgogKgogKiBUaGlzIHJlc29sdmVyIHdpbGwgdGFrZSB0aGUgbGFuZ3VhZ2UgdGFnIHNwZWNpZmllZCBpbiB0aGUgY2xhaW0gb2JqZWN0IGFuZCBhdHRlbXB0IHRvIG1hdGNoIGl0IHRvIGEgdmFsdWUKICogZnJvbSB0aGUgdXNlcnMnIHByb2ZpbGUgYXR0cmlidXRlLiBJZiBubyBtYXRjaCBpcyBmb3VuZCBhbiBleGNlcHRpb24gaXMgdGhyb3duLgogKi8KbGFuZ3VhZ2VUYWdDbGFpbVJlc29sdmVyID0geyBhdHRyaWJ1dGUsIGNsYWltLCBpZGVudGl0eSAtPgogICAgdXNlclByb2ZpbGVWYWx1ZSA9IGZyb21TZXQoY2xhaW0uZ2V0TmFtZSgpLCBpZGVudGl0eS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKSkKICAgIGlmICh1c2VyUHJvZmlsZVZhbHVlICE9IG51bGwpIHsKICAgICAgICBsb2NhbGVWYWx1ZXMgPSBwYXJzZUxvY2FsZUF3YXJlU3RyaW5nKHVzZXJQcm9maWxlVmFsdWUpCiAgICAgICAgaWYgKGNsYWltLmdldExvY2FsZSgpICE9IG51bGwpIHsKICAgICAgICAgICAgaWYgKGxvY2FsZVZhbHVlcy5jb250YWluc0tleShjbGFpbS5nZXRMb2NhbGUoKSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBbKGNsYWltLmdldE5hbWUoKSk6IGxvY2FsZVZhbHVlcy5nZXQoY2xhaW0uZ2V0TG9jYWxlKCkpXQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZW50cnkgPSBsb2NhbGVWYWx1ZXMuZW50cnlTZXQoKS5pdGVyYXRvcigpLm5leHQoKQogICAgICAgICAgICAgICAgcmV0dXJuIFsoY2xhaW0uZ2V0TmFtZSgpICsgIiMiICsgZW50cnkuZ2V0S2V5KCkpOiBlbnRyeS5nZXRWYWx1ZSgpXQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZW50cnkgPSBsb2NhbGVWYWx1ZXMuZW50cnlTZXQoKS5pdGVyYXRvcigpLm5leHQoKQogICAgICAgICAgICByZXR1cm4gWyhjbGFpbS5nZXROYW1lKCkpOiBlbnRyeS5nZXRWYWx1ZSgpXQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBbOl0KfQoKLyoKICogSW50ZW50IElEIGNsYWltIHJlc29sdmVyCiAqLwpJbnRlbnRJZFJlc29sdmVyID0geyBhdHRyaWJ1dGUsIGNsYWltLCBpZGVudGl0eSAtPgogIGlmIChjbGFpbS5nZXRWYWx1ZXMoKSAhPSBudWxsICYmIGNsYWltLmdldFZhbHVlcygpLnNpemUoKSA+IDApIHsKCWxvZ2dlci5tZXNzYWdlKCJJbnRlbnRJZFJlc29sdmVyOjpNZXNzYWdlOiB7fSA6IHt9IiwgY2xhaW0uZ2V0TmFtZSgpLCBjbGFpbS5nZXRWYWx1ZXMoKS5nZXQoMCkpCglyZXR1cm4gWyhjbGFpbS5nZXROYW1lKCkpOiBjbGFpbS5nZXRWYWx1ZXMoKS5nZXQoMCldCiAgfSBlbHNlIHsKICAgIGxvZ2dlci5tZXNzYWdlKCJJbnRlbnRJZFJlc29sdmVyOjogTm8gaW50ZW50IGlkLiIpCiAgICByZXR1cm4gW10KICB9Cn0KCgovKgogKiBHaXZlbiBhIHN0cmluZyAiZW58RW5nbGlzaCxqcHxKYXBlbmVzZSxmcl9DQXxGcmVuY2ggQ2FuYWRpYW4iIHdpbGwgcmV0dXJuIG1hcCBvZiBsb2NhbGUgLT4gdmFsdWUuCiAqLwpwYXJzZUxvY2FsZUF3YXJlU3RyaW5nID0geyBzIC0+CiAgICByZXR1cm4gcmVzdWx0ID0gcy5zcGxpdCgiLCIpLmNvbGxlY3RFbnRyaWVzIHsgZW50cnkgLT4KICAgICAgICBzcGxpdCA9IGVudHJ5LnNwbGl0KCJcXHwiKQogICAgICAgIFsoc3BsaXRbMF0pOiB2YWx1ZSA9IHNwbGl0WzFdXQogICAgfQp9Ci8vIC0tLV5eXl5eXl5eXl4tLS0gRVhBTVBMRSBDTEFJTSBBVFRSSUJVVEUgUkVTT0xWRVIgRlVOQ1RJT05TIC0tLV5eXl5eXl5eXl4tLS0KCi8vIC0tLS0tLS0tLS0tLS0tIFVQREFURSBUSElTIFRPIENIQU5HRSBDTEFJTSBUTyBBVFRSSUJVVEUgTUFQUElORyBGVU5DVElPTlMgLS0tLS0tLS0tLS0tLS0tCi8qCiAqIExpc3Qgb2YgY2xhaW0gcmVzb2x2ZXIgbWFwcGluZ3MuCiAqLwovLyBbIHtjbGFpbX06IHthdHRyaWJ1dGUgcmV0cmlldmVyfSwgLi4uIF0KY2xhaW1BdHRyaWJ1dGVzID0gWwogICAgICAgICJhZGRyZXNzIjogYWRkcmVzc1Jlc29sdmVyLmN1cnJ5KCJmci1pZG0tYWRkcmVzc2VzIiksCiAgICAgICAgImJpcnRoZGF0ZSI6IGJhc2ljUmVzb2x2ZXIuY3VycnkoImZyLWlkbS1iaXJ0aGRhdGUiKSwKICAgICAgICAiZW1haWwiOiBhdHRyaWJ1dGVSZXNvbHZlci5jdXJyeSgiZnItaWRtLWVtYWlscyIsICJ2YWx1ZSIsIHRydWUsIHRydWUpLAogICAgICAgICJnZW5kZXIiOiBiYXNpY1Jlc29sdmVyLmN1cnJ5KCJmci1pZG0tZ2VuZGVyIiksCiAgICAgICAgImxvY2FsZSI6IGJhc2ljUmVzb2x2ZXIuY3VycnkoImZyLWlkbS1sb2NhbGUiKSwKICAgICAgICAibmFtZSI6IG5hbWVSZXNvbHZlci5jdXJyeSgiZnItaWRtLW5hbWUtb2JqZWN0IiksCiAgICAgICAgIm5pY2tuYW1lIjogYmFzaWNSZXNvbHZlci5jdXJyeSgiZnItaWRtLW5pY2stbmFtZSIpLAogICAgICAgICJwaG9uZSI6IGF0dHJpYnV0ZVJlc29sdmVyLmN1cnJ5KCJmci1pZG0tcGhvbmUtbnVtYmVycyIsICJ2YWx1ZSIsIHRydWUsIGZhbHNlKSwKICAgICAgICAicGljdHVyZSI6IGF0dHJpYnV0ZVJlc29sdmVyLmN1cnJ5KCJmci1pZG0tcGhvdG9zIiwgInZhbHVlIiwgdHJ1ZSwgZmFsc2UpLAogICAgICAgICJwcmVmZXJyZWRfdXNlcm5hbWUiOiBiYXNpY1Jlc29sdmVyLmN1cnJ5KCJ1c2VyTmFtZSIpLAogICAgICAgICJwcm9maWxlIjogYmFzaWNSZXNvbHZlci5jdXJyeSgiZnItaWRtLXByb2ZpbGUtdXJsIiksCiAgICAgICAgInRpdGxlIjogYmFzaWNSZXNvbHZlci5jdXJyeSgiZnItaWRtLXRpdGxlIiksCiAgICAgICAgInVwZGF0ZWRfYXQiOiBkYXRlUmVzb2x2ZXIuY3VycnkoIm1vZGlmeVRpbWVzdGFtcCIpLAogICAgICAgICJ1c2VybmFtZSI6IGJhc2ljUmVzb2x2ZXIuY3VycnkoInVzZXJOYW1lIiksCiAgICAgICAgIndlYnNpdGUiOiBiYXNpY1Jlc29sdmVyLmN1cnJ5KCJmci1pZG0td2Vic2l0ZSIpLAogICAgICAgICJ6b25laW5mbyI6IGJhc2ljUmVzb2x2ZXIuY3VycnkoImZyLWlkbS10aW1lem9uZSIpLAogICAgICAgICJvcGVuYmFua2luZ19pbnRlbnRfaWQiOiBJbnRlbnRJZFJlc29sdmVyLmN1cnJ5KCJvcGVuYmFua2luZ19pbnRlbnRfaWQiKSwKICAgICAgICAic3ViIjogSW50ZW50SWRSZXNvbHZlci5jdXJyeSgib3BlbmJhbmtpbmdfaW50ZW50X2lkIikKXQoKLy8gLS0tLS0tLS0tLS0tLS0gVVBEQVRFIFRISVMgVE8gQ0hBTkdFIFNDT1BFIFRPIENMQUlNIE1BUFBJTkdTIC0tLS0tLS0tLS0tLS0tCi8qCiAqIE1hcCBvZiBzY29wZXMgdG8gY2xhaW0gb2JqZWN0cy4KICovCi8vIHtzY29wZX06IFsge2NsYWltfSwgLi4uIF0KLy8gaHR0cHM6Ly90cmVsbG8uY29tL2Mvd0hBM2VicDEvMTAyMS1pZC10b2tlbi1hbmQtdXNlcmluZm8tZW5kcG9pbnQtbm90LXJldHVybmluZy1hbGwtdXNlci1kYXRhCnNjb3BlQ2xhaW1zTWFwID0gWwogICAgICAgICJlbWFpbCI6IFsgImVtYWlsIiBdLAogICAgICAgICJhZGRyZXNzIjogWyAiYWRkcmVzcyIgXSwKICAgICAgICAicGhvbmUiOiBbICJwaG9uZSIgXSwKICAgICAgICAicHJvZmlsZSI6IFsKICAgICAgICAgICAgImJpcnRoZGF0ZSIsCiAgICAgICAgICAgICJmYW1pbHlfbmFtZSIsCiAgICAgICAgICAgICJnZW5kZXIiLAogICAgICAgICAgICAiZ2l2ZW5fbmFtZSIsCiAgICAgICAgICAgICJsb2NhbGUiLAogICAgICAgICAgICAibmFtZSIsCiAgICAgICAgICAgICJuaWNrbmFtZSIsCiAgICAgICAgICAgICJwaWN0dXJlIiwKICAgICAgICAgICAgInByZWZlcnJlZF91c2VybmFtZSIsCiAgICAgICAgICAgICJwcm9maWxlIiwKICAgICAgICAgICAgInRpdGxlIiwKICAgICAgICAgICAgInVwZGF0ZWRfYXQiLAogICAgICAgICAgICAidXNlcm5hbWUiLAogICAgICAgICAgICAid2Vic2l0ZSIsCiAgICAgICAgICAgICJ6b25laW5mbyIsCiAgICAgICAgXQpdCgovLyAtLS0tLS0tLS0tLS0tLS0tIFVQREFURSBCRUxPVyBGT1IgQURWQU5DRUQgVVNBR0VTIC0tLS0tLS0tLS0tLS0tLS0tLS0KaWYgKGxvZ2dlci5tZXNzYWdlRW5hYmxlZCgpKSB7CiAgICBzY29wZXMuZmluZEFsbCB7IHMgLT4gISgib3BlbmlkIi5lcXVhbHMocykgfHwgc2NvcGVDbGFpbXNNYXAuY29udGFpbnNLZXkocykpIH0uZWFjaCB7IHMgLT4KICAgICAgICBsb2dnZXIubWVzc2FnZSgiT3BlbkFNU2NvcGVWYWxpZGF0b3IuZ2V0VXNlckluZm8oKTo6TWVzc2FnZTogc2NvcGUgbm90IGJvdW5kIHRvIGNsYWltczogJHMiKQogICAgfQp9CgovKgogKiBDb21wdXRlcyB0aGUgY2xhaW1zIHJldHVybiBrZXkgYW5kIHZhbHVlLiBUaGUga2V5IG1heSBiZSBhIGRpZmZlcmVudCB2YWx1ZSBpZiB0aGUgY2xhaW0gdmFsdWUgaXMgbm90IGluCiAqIHRoZSByZXF1ZXN0ZWQgbGFuZ3VhZ2UuCiAqLwpkZWYgY29tcHV0ZUNsYWltID0geyBjbGFpbSAtPgogICAgdHJ5IHsKICAgICAgICBjbGFpbVJlc29sdmVyID0gY2xhaW1BdHRyaWJ1dGVzLmdldChjbGFpbS5nZXROYW1lKCksIHsgY2xhaW1PYmosIGlkZW50aXR5IC0+IGRlZmF1bHRDbGFpbVJlc29sdmVyKGNsYWltKX0pCiAgICAgICAgY2xhaW1SZXNvbHZlcihjbGFpbSwgaWRlbnRpdHkpCiAgICB9IGNhdGNoIChJZFJlcG9FeGNlcHRpb24gZSkgewogICAgICAgIGlmIChsb2dnZXIud2FybmluZ0VuYWJsZWQoKSkgewogICAgICAgICAgICBsb2dnZXIud2FybmluZygiT3BlbkFNU2NvcGVWYWxpZGF0b3IuZ2V0VXNlckluZm8oKTogVW5hYmxlIHRvIHJldHJpZXZlIGF0dHJpYnV0ZT0kYXR0cmlidXRlIiwgZSk7CiAgICAgICAgfQogICAgfSBjYXRjaCAoU1NPRXhjZXB0aW9uIGUpIHsKICAgICAgICBpZiAobG9nZ2VyLndhcm5pbmdFbmFibGVkKCkpIHsKICAgICAgICAgICAgbG9nZ2VyLndhcm5pbmcoIk9wZW5BTVNjb3BlVmFsaWRhdG9yLmdldFVzZXJJbmZvKCk6IFVuYWJsZSB0byByZXRyaWV2ZSBhdHRyaWJ1dGU9JGF0dHJpYnV0ZSIsIGUpOwogICAgICAgIH0KICAgIH0KfQoKLyoKICogQ29udmVydHMgcmVxdWVzdGVkIHNjb3BlcyBpbnRvIGNsYWltIG9iamVjdHMgYmFzZWQgb24gdGhlIHNjb3BlIG1hcHBpbmdzIGluIHNjb3BlQ2xhaW1zTWFwLgogKi8KZGVmIGNvbnZlcnRTY29wZVRvQ2xhaW1zID0gewogICAgc2NvcGVzLmZpbmRBbGwgeyBzY29wZSAtPiAib3BlbmlkIiAhPSBzY29wZSAmJiBzY29wZUNsYWltc01hcC5jb250YWluc0tleShzY29wZSkgfS5jb2xsZWN0TWFueSB7IHNjb3BlIC0+CiAgICAgICAgc2NvcGVDbGFpbXNNYXAuZ2V0KHNjb3BlKS5jb2xsZWN0IHsgY2xhaW0gLT4KICAgICAgICAgICAgbmV3IENsYWltKGNsYWltKQogICAgICAgIH0KICAgIH0KfQoKLy8gQ3JlYXRlcyBhIGZ1bGwgbGlzdCBvZiBjbGFpbXMgdG8gcmVzb2x2ZSBmcm9tIHJlcXVlc3RlZCBzY29wZXMsIGNsYWltcyBwcm92aWRlZCBieSBBUyBhbmQgcmVxdWVzdGVkIGNsYWltcwpkZWYgY2xhaW1zVG9SZXNvbHZlID0gY29udmVydFNjb3BlVG9DbGFpbXMoKSArIGNsYWltT2JqZWN0cyArIHJlcXVlc3RlZFR5cGVkQ2xhaW1zCgovLyBDb21wdXRlcyB0aGUgY2xhaW0gcmV0dXJuIGtleSBhbmQgdmFsdWVzIGZvciBhbGwgcmVxdWVzdGVkIGNsYWltcwpjb21wdXRlZENsYWltcyA9IGNsYWltc1RvUmVzb2x2ZS5jb2xsZWN0RW50cmllcygpIHsgY2xhaW0gLT4KICAgIGNvbXB1dGVDbGFpbShjbGFpbSkKfQoKLy8gQ29tcHV0ZXMgY29tcG9zaXRlIHNjb3BlcwpkZWYgY29tcG9zaXRlU2NvcGVzID0gc2NvcGVDbGFpbXNNYXAuZmluZEFsbCB7IHNjb3BlIC0+CiAgICBzY29wZXMuY29udGFpbnMoc2NvcGUua2V5KQp9CgpyZXR1cm4gbmV3IFVzZXJJbmZvQ2xhaW1zKChNYXApY29tcHV0ZWRDbGFpbXMsIChNYXApY29tcG9zaXRlU2NvcGVzKQ==\",\n  \"language\": \"GROOVY\",\n  \"context\": \"OIDC_CLAIMS\",\n  \"description\": \"Open Banking OIDC Claims Script\"\n}\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{iamFQDN}}/am/json/{{realm}}/scripts/?_action=create",
									"protocol": "https",
									"host": [
										"{{iamFQDN}}"
									],
									"path": [
										"am",
										"json",
										"{{realm}}",
										"scripts",
										""
									],
									"query": [
										{
											"key": "_action",
											"value": "create"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Update OAuth2 Provider",
							"request": {
								"method": "PUT",
								"header": [
									{
										"description": "Specifies certain media types which are acceptable for the resource.",
										"key": "accept",
										"type": "text",
										"value": "application/json"
									},
									{
										"description": "The media type of the resource.",
										"key": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"description": "Custom header.",
										"key": "X-Requested-With",
										"type": "text",
										"value": "ForgeRock Identity Cloud Postman Collection"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"coreOAuth2Config\": {\n    \"accessTokenModificationScript\": \"d22f9a0c-426a-4466-b95e-d0f125b0d5fa\",\n    \"usePolicyEngineForScope\": false,\n    \"macaroonTokensEnabled\": false,\n    \"statelessTokensEnabled\": true,\n    \"codeLifetime\": 120,\n    \"issueRefreshTokenOnRefreshedToken\": true,\n    \"refreshTokenLifetime\": 604800,\n    \"accessTokenLifetime\": 360000,\n    \"issueRefreshToken\": true\n  },\n  \"advancedOAuth2Config\": {\n    \"tlsClientCertificateHeaderFormat\": \"URLENCODED_PEM\",\n    \"supportedSubjectTypes\": [\n      \"public\",\n      \"pairwise\"\n    ],\n    \"defaultScopes\": [],\n    \"macaroonTokenFormat\": \"V2\",\n    \"codeVerifierEnforced\": \"false\",\n    \"grantTypes\": [\n      \"implicit\",\n      \"urn:ietf:params:oauth:grant-type:saml2-bearer\",\n      \"refresh_token\",\n      \"password\",\n      \"client_credentials\",\n      \"urn:ietf:params:oauth:grant-type:device_code\",\n      \"authorization_code\",\n      \"urn:openid:params:grant-type:ciba\",\n      \"urn:ietf:params:oauth:grant-type:uma-ticket\",\n      \"urn:ietf:params:oauth:grant-type:jwt-bearer\"\n    ],\n    \"authenticationAttributes\": [\n      \"uid\"\n    ],\n    \"tokenSigningAlgorithm\": \"PS256\",\n    \"tokenEncryptionEnabled\": false,\n    \"hashSalt\": \"gnsdjcwx1a1acia62voroervtgq0\",\n    \"moduleMessageEnabledInPasswordGrant\": false,\n    \"tlsCertificateBoundAccessTokensEnabled\": true,\n    \"displayNameAttribute\": \"cn\",\n    \"supportedScopes\": [\n      \"openid\",\n      \"payments\",\n      \"accounts\"\n    ],\n    \"responseTypeClasses\": [\n      \"code|org.forgerock.oauth2.core.AuthorizationCodeResponseTypeHandler\",\n      \"id_token|org.forgerock.openidconnect.IdTokenResponseTypeHandler\",\n      \"device_code|org.forgerock.oauth2.core.TokenResponseTypeHandler\",\n      \"token|org.forgerock.oauth2.core.TokenResponseTypeHandler\"\n    ],\n    \"tokenCompressionEnabled\": false,\n    \"allowedAudienceValues\": [],\n    \"scopeImplementationClass\": \"org.forgerock.openam.oauth2.OpenAMScopeValidator\",\n    \"tlsCertificateRevocationCheckingEnabled\": false\n  },\n  \"coreOIDCConfig\": {\n    \"oidcClaimsScript\": \"{{oidcClaimsScriptId}}\",\n    \"supportedClaims\": [\n      \"acr\",\n      \"openbanking_intent_id\"\n    ],\n    \"jwtTokenLifetime\": 3600,\n    \"supportedIDTokenEncryptionAlgorithms\": [\n      \"ECDH-ES+A256KW\",\n      \"ECDH-ES+A192KW\",\n      \"RSA-OAEP\",\n      \"ECDH-ES+A128KW\",\n      \"RSA-OAEP-256\",\n      \"A128KW\",\n      \"A256KW\",\n      \"ECDH-ES\",\n      \"dir\",\n      \"A192KW\"\n    ],\n    \"supportedIDTokenEncryptionMethods\": [\n      \"A256GCM\",\n      \"A192GCM\",\n      \"A128GCM\",\n      \"A128CBC-HS256\",\n      \"A192CBC-HS384\",\n      \"A256CBC-HS512\"\n    ],\n    \"supportedIDTokenSigningAlgorithms\": [\n      \"PS384\",\n      \"ES384\",\n      \"RS384\",\n      \"HS256\",\n      \"HS512\",\n      \"ES256\",\n      \"RS256\",\n      \"HS384\",\n      \"ES512\",\n      \"PS256\",\n      \"PS512\",\n      \"RS512\"\n    ]\n  },\n  \"advancedOIDCConfig\": {\n    \"supportedTokenIntrospectionResponseSigningAlgorithms\": [\n      \"PS384\",\n      \"RS384\",\n      \"EdDSA\",\n      \"ES384\",\n      \"HS256\",\n      \"HS512\",\n      \"ES256\",\n      \"RS256\",\n      \"HS384\",\n      \"ES512\",\n      \"PS256\",\n      \"PS512\",\n      \"RS512\"\n    ],\n    \"supportedRequestParameterSigningAlgorithms\": [\n      \"PS384\",\n      \"ES384\",\n      \"RS384\",\n      \"HS256\",\n      \"HS512\",\n      \"ES256\",\n      \"RS256\",\n      \"HS384\",\n      \"ES512\",\n      \"PS256\",\n      \"PS512\",\n      \"RS512\"\n    ],\n    \"idTokenInfoClientAuthenticationEnabled\": true,\n    \"alwaysAddClaimsToToken\": true,\n    \"loaMapping\": {\n      \"urn:openbanking:psd2:sca\": \"Login\",\n      \"urn:openbanking:psd2:ca\": \"Login\"\n    },\n    \"supportedTokenEndpointAuthenticationSigningAlgorithms\": [\n      \"PS384\",\n      \"ES384\",\n      \"RS384\",\n      \"HS256\",\n      \"HS512\",\n      \"ES256\",\n      \"RS256\",\n      \"HS384\",\n      \"ES512\",\n      \"PS256\",\n      \"PS512\",\n      \"RS512\"\n    ],\n    \"supportedRequestParameterEncryptionAlgorithms\": [\n      \"ECDH-ES+A256KW\",\n      \"ECDH-ES+A192KW\",\n      \"ECDH-ES+A128KW\",\n      \"RSA-OAEP\",\n      \"RSA-OAEP-256\",\n      \"A128KW\",\n      \"A256KW\",\n      \"ECDH-ES\",\n      \"dir\",\n      \"A192KW\"\n    ],\n    \"authorisedOpenIdConnectSSOClients\": [],\n    \"storeOpsTokens\": true,\n    \"supportedRequestParameterEncryptionEnc\": [\n      \"A256GCM\",\n      \"A192GCM\",\n      \"A128GCM\",\n      \"A128CBC-HS256\",\n      \"A192CBC-HS384\",\n      \"A256CBC-HS512\"\n    ],\n    \"defaultACR\": [],\n    \"amrMappings\": {},\n    \"claimsParameterSupported\": true,\n    \"supportedUserInfoEncryptionAlgorithms\": [\n      \"ECDH-ES+A256KW\",\n      \"ECDH-ES+A192KW\",\n      \"RSA-OAEP\",\n      \"ECDH-ES+A128KW\",\n      \"RSA-OAEP-256\",\n      \"A128KW\",\n      \"A256KW\",\n      \"ECDH-ES\",\n      \"dir\",\n      \"A192KW\"\n    ],\n    \"supportedUserInfoEncryptionEnc\": [\n      \"A256GCM\",\n      \"A192GCM\",\n      \"A128GCM\",\n      \"A128CBC-HS256\",\n      \"A192CBC-HS384\",\n      \"A256CBC-HS512\"\n    ],\n    \"supportedUserInfoSigningAlgorithms\": [\n      \"ES384\",\n      \"HS256\",\n      \"HS512\",\n      \"ES256\",\n      \"RS256\",\n      \"HS384\",\n      \"ES512\"\n    ],\n    \"supportedTokenIntrospectionResponseEncryptionEnc\": [\n      \"A256GCM\",\n      \"A192GCM\",\n      \"A128GCM\",\n      \"A128CBC-HS256\",\n      \"A192CBC-HS384\",\n      \"A256CBC-HS512\"\n    ],\n    \"supportedTokenIntrospectionResponseEncryptionAlgorithms\": [\n      \"ECDH-ES+A256KW\",\n      \"ECDH-ES+A192KW\",\n      \"RSA-OAEP\",\n      \"ECDH-ES+A128KW\",\n      \"RSA-OAEP-256\",\n      \"A128KW\",\n      \"A256KW\",\n      \"ECDH-ES\",\n      \"dir\",\n      \"A192KW\"\n    ],\n    \"authorisedIdmDelegationClients\": []\n  },\n  \"clientDynamicRegistrationConfig\": {\n    \"dynamicClientRegistrationSoftwareStatementRequired\": true,\n    \"generateRegistrationAccessTokens\": true,\n    \"requiredSoftwareStatementAttestedAttributes\": [],\n    \"dynamicClientRegistrationScope\": \"dynamic_client_registration\",\n    \"allowDynamicRegistration\": false\n  },\n  \"cibaConfig\": {\n    \"supportedCibaSigningAlgorithms\": [\n      \"ES256\",\n      \"PS256\"\n    ],\n    \"cibaAuthReqIdLifetime\": 600,\n    \"cibaMinimumPollingInterval\": 2\n  },\n  \"consent\": {\n    \"clientsCanSkipConsent\": false,\n    \"supportedRcsRequestSigningAlgorithms\": [\n      \"PS384\",\n      \"ES384\",\n      \"RS384\",\n      \"HS256\",\n      \"HS512\",\n      \"ES256\",\n      \"RS256\",\n      \"HS384\",\n      \"ES512\",\n      \"PS256\",\n      \"PS512\",\n      \"RS512\"\n    ],\n    \"supportedRcsRequestEncryptionMethods\": [\n      \"A256GCM\",\n      \"A192GCM\",\n      \"A128GCM\",\n      \"A128CBC-HS256\",\n      \"A192CBC-HS384\",\n      \"A256CBC-HS512\"\n    ],\n    \"supportedRcsRequestEncryptionAlgorithms\": [\n      \"ECDH-ES+A256KW\",\n      \"ECDH-ES+A192KW\",\n      \"RSA-OAEP\",\n      \"ECDH-ES+A128KW\",\n      \"RSA-OAEP-256\",\n      \"A128KW\",\n      \"A256KW\",\n      \"ECDH-ES\",\n      \"dir\",\n      \"A192KW\"\n    ],\n    \"supportedRcsResponseSigningAlgorithms\": [\n      \"PS384\",\n      \"ES384\",\n      \"RS384\",\n      \"HS256\",\n      \"HS512\",\n      \"ES256\",\n      \"RS256\",\n      \"HS384\",\n      \"ES512\",\n      \"PS256\",\n      \"PS512\",\n      \"RS512\"\n    ],\n    \"enableRemoteConsent\": true,\n    \"supportedRcsResponseEncryptionAlgorithms\": [\n      \"ECDH-ES+A256KW\",\n      \"ECDH-ES+A192KW\",\n      \"ECDH-ES+A128KW\",\n      \"RSA-OAEP\",\n      \"RSA-OAEP-256\",\n      \"A128KW\",\n      \"A256KW\",\n      \"ECDH-ES\",\n      \"dir\",\n      \"A192KW\"\n    ],\n    \"supportedRcsResponseEncryptionMethods\": [\n      \"A256GCM\",\n      \"A192GCM\",\n      \"A128GCM\",\n      \"A128CBC-HS256\",\n      \"A192CBC-HS384\",\n      \"A256CBC-HS512\"\n    ],\n    \"remoteConsentServiceId\": \"forgerock-rcs\"\n  },\n  \"deviceCodeConfig\": {\n    \"devicePollInterval\": 5,\n    \"deviceCodeLifetime\": 300\n  },\n  \"_id\": \"\",\n  \"_type\": {\n    \"_id\": \"oauth-oidc\",\n    \"name\": \"OAuth2 Provider\",\n    \"collection\": false\n  }\n}\n"
								},
								"url": "https://{{iamFQDN}}/am/json/{{realm}}/realm-config/services/oauth-oidc",
								"description": "Create an OAuth 2.0 client for obtaining scopes as an administrator. The access tokens granted by this client are used to perform administrative tasks throughout this collection."
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "AM - Policy Config",
					"item": [
						{
							"name": "Create Policy Service User",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "88c736d8-893f-4330-8c93-6a060ddf14cf",
										"exec": [
											"pm.globals.set(\"managedUserId\", pm.globals.replaceIn('{{$guid}}'))",
											"pm.globals.set(\"managedUsername\", pm.globals.replaceIn('{{$randomUserName}}'))"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"type": "text",
										"value": "Bearer {{adminAccessToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userName\": \"{{policyServiceAccountUsername}}\",\n  \"sn\": \"Service Account\",\n  \"givenName\": \"Policy Engine\",\n  \"mail\": \"{{policyServiceAccountEmail}}\",\n  \"password\": \"{{policyServiceAccountPassword}}\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{iamFQDN}}/openidm/managed/{{realm}}_user/?_action=create",
									"protocol": "https",
									"host": [
										"{{iamFQDN}}"
									],
									"path": [
										"openidm",
										"managed",
										"{{realm}}_user",
										""
									],
									"query": [
										{
											"key": "_action",
											"value": "create"
										}
									]
								}
							},
							"response": [
								{
									"name": "Success",
									"originalRequest": {
										"method": "GET",
										"header": [
											{
												"description": "(Required) ",
												"key": "Accept-API-Version",
												"value": "<string>"
											}
										],
										"url": "{{baseUrl}}/openidm/managed/user#1.0_query_filter?_fields=&_prettyPrint=true&_queryFilter=<string>&_pageSize=<integer>&_totalPagedResultsPolicy=<string>&_sortKeys=<string>"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "*/*"
										}
									],
									"cookie": [],
									"body": ""
								}
							]
						},
						{
							"name": "Create Policy Evaluation Script",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "597ce4c1-5023-4f8a-a8fa-92a3210db0a1",
										"exec": [
											"var data = JSON.parse(responseBody);",
											"",
											"postman.setEnvironmentVariable(\"policyScript\", data._id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept-API-Version",
										"type": "text",
										"value": "protocol=2.0,resource=1.0"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\" : \"Open Banking Dynamic Policy\",\n    \"context\" : \"POLICY_CONDITION\",\n    \"description\" : \"Open Banking Dynamic Policy\",\n    \"language\" : \"JAVASCRIPT\",\n    \"script\" : \"U1RBVFVTX0FVVEhPUklTRUQgPSAiQXV0aG9yaXNlZCIKCgoKbG9nZ2VyLm1lc3NhZ2UoIk9CX1BvbGljeSBzdGFydGluZyIpCgoKCmZ1bmN0aW9uIHBhcnNlUmVzb3VyY2VVcmkoKSB7CiAgdmFyIGVsZW1lbnRzID0gcmVzb3VyY2VVUkkuc3BsaXQoIi8iKTsKICByZXR1cm4gewogICAgImFwaSI6IGVsZW1lbnRzWzVdLAogICAgImFjY291bnQiOiAoZWxlbWVudHMubGVuZ3RoID4gNikgPyBlbGVtZW50c1s2XSA6IG51bGwsCiAgICAiZGF0YSIgOiAoZWxlbWVudHMubGVuZ3RoID4gNykgPyBlbGVtZW50c1s3XSA6IG51bGwKICB9Cn0KCgp2YXIgcD0iPSI7CnZhciB0YWI9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iOwoKZnVuY3Rpb24gYmFzZTY0ZW5jb2RlKGJhKSB7CgkJdmFyIHM9W10sIGw9YmEubGVuZ3RoOwoJCXZhciBybT1sJTM7CgkJdmFyIHg9bC1ybTsKCQlmb3IgKHZhciBpPTA7IGk8eDspewoJCQl2YXIgdD1iYVtpKytdPDwxNnxiYVtpKytdPDw4fGJhW2krK107CgkJCXMucHVzaCh0YWIuY2hhckF0KCh0Pj4+MTgpJjB4M2YpKTsKCQkJcy5wdXNoKHRhYi5jaGFyQXQoKHQ+Pj4xMikmMHgzZikpOwoJCQlzLnB1c2godGFiLmNoYXJBdCgodD4+PjYpJjB4M2YpKTsKCQkJcy5wdXNoKHRhYi5jaGFyQXQodCYweDNmKSk7CgkJfQoJCS8vCWRlYWwgd2l0aCB0cmFpbGVycywgYmFzZWQgb24gcGF0Y2ggZnJvbSBQZXRlciBXb29kLgoJCXN3aXRjaChybSl7CgkJCWNhc2UgMjp7CgkJCQl2YXIgdD1iYVtpKytdPDwxNnxiYVtpKytdPDw4OwoJCQkJcy5wdXNoKHRhYi5jaGFyQXQoKHQ+Pj4xOCkmMHgzZikpOwoJCQkJcy5wdXNoKHRhYi5jaGFyQXQoKHQ+Pj4xMikmMHgzZikpOwoJCQkJcy5wdXNoKHRhYi5jaGFyQXQoKHQ+Pj42KSYweDNmKSk7CgkJCQlzLnB1c2gocCk7CgkJCQlicmVhazsKCQkJfQoJCQljYXNlIDE6ewoJCQkJdmFyIHQ9YmFbaSsrXTw8MTY7CgkJCQlzLnB1c2godGFiLmNoYXJBdCgodD4+PjE4KSYweDNmKSk7CgkJCQlzLnB1c2godGFiLmNoYXJBdCgodD4+PjEyKSYweDNmKSk7CgkJCQlzLnB1c2gocCk7CgkJCQlzLnB1c2gocCk7CgkJCQlicmVhazsKCQkJfQoJCX0KCQlyZXR1cm4gcy5qb2luKCIiKTsJLy8Jc3RyaW5nCn0KCmZ1bmN0aW9uIGJhc2U2NGRlY29kZShzdHIpIHsKCQl2YXIgcz1zdHIuc3BsaXQoIiIpLCBvdXQ9W107CgkJdmFyIGw9cy5sZW5ndGg7CgkJd2hpbGUoc1stLWxdPT1wKXsgfQkvLwlzdHJpcCBvZmYgdHJhaWxpbmcgcGFkZGluZwoJCWZvciAodmFyIGk9MDsgaTxsOyl7CgkJCXZhciB0PXRhYi5pbmRleE9mKHNbaSsrXSk8PDE4OwoJCQlpZihpPD1sKXsgdHw9dGFiLmluZGV4T2Yoc1tpKytdKTw8MTIgfTsKCQkJaWYoaTw9bCl7IHR8PXRhYi5pbmRleE9mKHNbaSsrXSk8PDYgfTsKCQkJaWYoaTw9bCl7IHR8PXRhYi5pbmRleE9mKHNbaSsrXSkgfTsKCQkJb3V0LnB1c2goKHQ+Pj4xNikmMHhmZik7CgkJCW91dC5wdXNoKCh0Pj4+OCkmMHhmZik7CgkJCW91dC5wdXNoKHQmMHhmZik7CgkJfQoJCS8vCXN0cmlwIG9mZiBhbnkgbnVsbCBieXRlcwoJCXdoaWxlKG91dFtvdXQubGVuZ3RoLTFdPT0wKXsgb3V0LnBvcCgpOyB9CgkJcmV0dXJuIG91dDsJLy8JYnl0ZVtdCn0KCmZ1bmN0aW9uIHN0cmluZ0Zyb21BcnJheShkYXRhKSB7CiAgICB2YXIgY291bnQgPSBkYXRhLmxlbmd0aDsKICAgIHZhciBzdHIgPSAiIjsKICAgIAogICAgZm9yKHZhciBpbmRleCA9IDA7IGluZGV4IDwgY291bnQ7IGluZGV4ICs9IDEpCiAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGRhdGFbaW5kZXhdKTsKICAgIAogICAgcmV0dXJuIHN0cjsKfQoKZnVuY3Rpb24gbG9nUmVzcG9uc2UocmVzcG9uc2UpIHsKICAgIGxvZ2dlci53YXJuaW5nKCJPQl9Qb2xpY3kgVXNlciBSRVNUIENhbGwuIFN0YXR1czogIiArIHJlc3BvbnNlLmdldFN0YXR1cygpICsgIiwgQm9keTogIiArIHJlc3BvbnNlLmdldEVudGl0eSgpKTsKfQoKZnVuY3Rpb24gZ2V0SWRtQ2xpZW50RGV0YWlscygpIHsKICByZXR1cm4geyAKICAgICJpZCI6ICJwb2xpY3ktY2xpZW50IiwKICAgICJzZWNyZXQiOiAicGFzc3dvcmQiLAogICAgImVuZHBvaW50IjogImh0dHA6Ly9hbS9hbS9vYXV0aDIvcmVhbG1zL3Jvb3QvcmVhbG1zL2FscGhhL2FjY2Vzc190b2tlbiIsCiAgICAic2NvcGUiOiAiZnI6aWRtOioiLAogICAgImlkbUFkbWluVXNlcm5hbWUiOiAic2VydmljZV91c2VyLnBvbGljeSIsCiAgICAiaWRtQWRtaW5QYXNzd29yZCI6ICIwcGVuQmFua2luZyEiCiAgfQp9CgpmdW5jdGlvbiBnZXRJZG1BY2Nlc3NUb2tlbigpIHsKCiAgICB2YXIgY2xpZW50SW5mbyA9IGdldElkbUNsaWVudERldGFpbHMoKTsKICAgIHZhciByZXF1ZXN0ID0gbmV3IG9yZy5mb3JnZXJvY2suaHR0cC5wcm90b2NvbC5SZXF1ZXN0KCk7CiAgICByZXF1ZXN0LnNldFVyaShjbGllbnRJbmZvLmVuZHBvaW50KTsKICAJcmVxdWVzdC5zZXRNZXRob2QoIlBPU1QiKTsKICAgIHJlcXVlc3QuZ2V0SGVhZGVycygpLmFkZCgiQ29udGVudC1UeXBlIiwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICB2YXIgZm9ybXZhcnMgPSAiZ3JhbnRfdHlwZT1wYXNzd29yZCIgKwogICAgICAgICImY2xpZW50X2lkPSIgKyBjbGllbnRJbmZvLmlkICsKICAgICAgICAiJmNsaWVudF9zZWNyZXQ9IiArIGNsaWVudEluZm8uc2VjcmV0ICsKICAgICAgICAiJnNjb3BlPSIgKyBjbGllbnRJbmZvLnNjb3BlICsKICAgICAgICAiJnVzZXJuYW1lPSIgKyBjbGllbnRJbmZvLmlkbUFkbWluVXNlcm5hbWUgKwogICAgICAgICImcGFzc3dvcmQ9IiArIGNsaWVudEluZm8uaWRtQWRtaW5QYXNzd29yZDsKICAgIHJlcXVlc3Quc2V0RW50aXR5KGZvcm12YXJzKTsKCiAgICB2YXIgcmVzcG9uc2UgPSBodHRwQ2xpZW50LnNlbmQocmVxdWVzdCkuZ2V0KCk7CiAgICBsb2dSZXNwb25zZShyZXNwb25zZSk7CgogICAgdmFyIG9hdXRoMnJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZS5nZXRFbnRpdHkoKSk7CiAgICB2YXIgYWNjZXNzVG9rZW4gPSBvYXV0aDJyZXNwb25zZS5hY2Nlc3NfdG9rZW4KICAgIHJldHVybiBhY2Nlc3NUb2tlbgp9CgpmdW5jdGlvbiBnZXRJbnRlbnQoaW50ZW50SWQsYXBpKSB7CiAgdmFyIG9iaiA9IG51bGwKICAKICBzd2l0Y2ggKGFwaSkgewogICAgY2FzZSAiYWNjb3VudHMiOiAKICAgICAgb2JqID0gIk9iQWNjb3VudEFjY2VzcyIKICAgICAgYnJlYWs7CiAgICBjYXNlICJkb21lc3RpYy1wYXltZW50cyI6CiAgICAgIG9iaiA9ICJPYkRvbWVzdGljUGF5bWVudCIKICAgICAgYnJlYWs7CiAgfQogICAKICB2YXIgYWNjZXNzVG9rZW4gPSBnZXRJZG1BY2Nlc3NUb2tlbigpOwogIHZhciByZXF1ZXN0ID0gbmV3IG9yZy5mb3JnZXJvY2suaHR0cC5wcm90b2NvbC5SZXF1ZXN0KCk7CiAgcmVxdWVzdC5zZXRNZXRob2QoJ0dFVCcpOwogIHJlcXVlc3Quc2V0VXJpKCJodHRwOi8vaWRtL29wZW5pZG0vbWFuYWdlZC8iICsgb2JqICsgIi8iICsgaW50ZW50SWQpCiAgcmVxdWVzdC5nZXRIZWFkZXJzKCkuYWRkKCJBdXRob3JpemF0aW9uIiwiQmVhcmVyICIgKyBhY2Nlc3NUb2tlbik7CgogIHZhciByZXNwb25zZSA9IGh0dHBDbGllbnQuc2VuZChyZXF1ZXN0KS5nZXQoKTsKICBsb2dSZXNwb25zZShyZXNwb25zZSk7CgogIHZhciBpbnRlbnQgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmdldEVudGl0eSgpKTsKICByZXR1cm4gaW50ZW50Cn0KCmZ1bmN0aW9uIGRhdGFBdXRob3Jpc2VkKHBlcm1pc3Npb25zLGRhdGFSZXF1ZXN0KSB7CiAgc3dpdGNoIChkYXRhUmVxdWVzdCkgewogICAgY2FzZSAiYmFsYW5jZXMiOgogICAgICBhdXRob3Jpc2VkID0gKHBlcm1pc3Npb25zLmluZGV4T2YoIlJlYWRCYWxhbmNlcyIpID4gLTEpOwogICAgICBicmVhazsKICAgIGNhc2UgInRyYW5zYWN0aW9ucyI6CiAgICAgIGF1dGhvcmlzZWQgPSAocGVybWlzc2lvbnMuaW5kZXhPZigiUmVhZFRyYW5zYWN0aW9uc0RldGFpbCIpID4gLTEpOwogICAgICBicmVhawogICAgZGVmYXVsdDoKICAgICAgYXV0aG9yaXNlZCA9IGZhbHNlCiAgICAgIAogIH0KICAKICByZXR1cm4gYXV0aG9yaXNlZAp9CgpmdW5jdGlvbiBpbml0aWF0aW9uTWF0Y2goaW5pdGlhdGlvblJlcXVlc3QsaW5pdGlhdGlvbikgewogIAogIC8vIFRPRE86IHByb2JhYmx5IGhhdmUgdG8gbWFrZSB0aGlzIG1vcmUgcm9idXN0IC0gaS5lLiBub3Qgb3JkZXIgZGVwZW5kZW50IGV0YwogIAogIHZhciByID0gSlNPTi5zdHJpbmdpZnkoaW5pdGlhdGlvbikKICB2YXIgbyA9IHN0cmluZ0Zyb21BcnJheShiYXNlNjRkZWNvZGUoaW5pdGlhdGlvblJlcXVlc3QpKSAKICAKICBsb2dnZXIubWVzc2FnZSgiT0JfUG9saWN5IHJlcXVlc3QgIFsiICsgIHIgKyAiXSIpOwogIGxvZ2dlci5tZXNzYWdlKCJPQl9Qb2xpY3kgb3JpZ2luYWwgWyIgKyAgbyArICJdIik7CiAgCiAgCiAgcmV0dXJuIChyID09IG8pOyAgICAgICAgICAgICAKfQoKdmFyIGludGVudElkID0gZW52aXJvbm1lbnQuZ2V0KCJpbnRlbnRfaWQiKS5pdGVyYXRvcigpLm5leHQoKTsKCnZhciBhcGlSZXF1ZXN0ID0gcGFyc2VSZXNvdXJjZVVyaSgpCgpsb2dnZXIud2FybmluZygiT0JfUG9saWN5IHJlcSAiICsgYXBpUmVxdWVzdC5hcGkgKyAiOiIgKyBhcGlSZXF1ZXN0LmFjY291bnQgKyAiOiIgKyBhcGlSZXF1ZXN0LmRhdGEpOwogICAgICAgICAgICAgICAKdmFyIGludGVudCA9IGdldEludGVudChpbnRlbnRJZCxhcGlSZXF1ZXN0LmFwaSk7CgppZiAoYXBpUmVxdWVzdC5hcGkgPT0gImFjY291bnRzIikgewoKICB2YXIgc3RhdHVzID0gaW50ZW50LkRhdGEuU3RhdHVzCiAgdmFyIHBlcm1pc3Npb25zID0gaW50ZW50LkRhdGEuUGVybWlzc2lvbnMKICB2YXIgYWNjb3VudHMgPSBpbnRlbnQuQWNjb3VudHMKCiAgaWYgKHN0YXR1cyAhPSBTVEFUVVNfQVVUSE9SSVNFRCkgewogICAgbG9nZ2VyLndhcm5pbmcoIlJlamVjdGluZyByZXF1ZXN0IC0gc3RhdHVzIFsiICsgc3RhdHVzICsgIl0iKQogICAgYXV0aG9yaXplZCA9IGZhbHNlCiAgICAKICB9CiAgZWxzZSBpZiAoYXBpUmVxdWVzdC5hY2NvdW50ID09IG51bGwpIHsKICAgIGxvZ2dlci5tZXNzYWdlKCJPQl9QT0xJQ1kgYWNjb3VudHMgIiArIGFjY291bnRzKTsKICAgIHJlc3BvbnNlQXR0cmlidXRlcy5wdXQoImdyYW50ZWRBY2NvdW50cyIsYWNjb3VudHMpCiAgICBhdXRob3JpemVkID0gdHJ1ZQogIH0KICBlbHNlIGlmIChhcGlSZXF1ZXN0LmRhdGEgPT0gbnVsbCkgewogICAgbG9nZ2VyLm1lc3NhZ2UoIk9CX1BPTElDWSBhY2NvdW50IGluZm8gZm9yICIgKyBhcGlSZXF1ZXN0LmFjY291bnQpOwogICAgYXV0aG9yaXplZCA9IChhY2NvdW50cy5pbmRleE9mKGFwaVJlcXVlc3QuYWNjb3VudCkgPiAtMSkgJiYKICAgICAgICAgICAgICAgICAocGVybWlzc2lvbnMuaW5kZXhPZigiUmVhZEFjY291bnRzRGV0YWlsIikgPiAtMSkKICB9CiAgZWxzZSB7CiAgICBsb2dnZXIubWVzc2FnZSgiT0JfUE9MSUNZIGFjY291bnQgcmVxdWVzdCBmb3IgIiArIGFwaVJlcXVlc3QuYWNjb3VudCArICI6IiArIGFwaVJlcXVlc3QuZGF0YSk7CiAgICBhdXRob3JpemVkID0gKGFjY291bnRzLmluZGV4T2YoYXBpUmVxdWVzdC5hY2NvdW50KSA+IC0xKSAmJiAKICAgICAgICAgICAgICAgICBkYXRhQXV0aG9yaXNlZChwZXJtaXNzaW9ucyxhcGlSZXF1ZXN0LmRhdGEpCiAgfQogIAp9CmVsc2UgaWYgKGFwaVJlcXVlc3QuYXBpID09ICJkb21lc3RpYy1wYXltZW50cyIpIHsKICAKICB2YXIgc3RhdHVzID0gaW50ZW50LkRhdGEuU3RhdHVzCiAgdmFyIHBlcm1pc3Npb25zID0gaW50ZW50LkRhdGEuUGVybWlzc2lvbnMKICB2YXIgYWNjb3VudHMgPSBpbnRlbnQuQWNjb3VudHMKCiAgaWYgKHN0YXR1cyAhPSBTVEFUVVNfQVVUSE9SSVNFRCkgewogICAgbG9nZ2VyLndhcm5pbmcoIlJlamVjdGluZyByZXF1ZXN0IC0gc3RhdHVzIFsiICsgc3RhdHVzICsgIl0iKQogICAgYXV0aG9yaXplZCA9IGZhbHNlCiAgICAKICB9CiAgZWxzZSB7CiAgICBhdXRob3JpemVkID0gaW5pdGlhdGlvbk1hdGNoKGVudmlyb25tZW50LmdldCgiaW5pdGlhdGlvbiIpLml0ZXJhdG9yKCkubmV4dCgpLGludGVudC5EYXRhLkluaXRpYXRpb24pCiAgfQogIAp9CmVsc2UgewogIGF1dGhvcml6ZWQgPSBmYWxzZQp9Cg==\"\n}\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{iamFQDN}}/am/json/{{realm}}/scripts/?_action=create",
									"protocol": "https",
									"host": [
										"{{iamFQDN}}"
									],
									"path": [
										"am",
										"json",
										"{{realm}}",
										"scripts",
										""
									],
									"query": [
										{
											"key": "_action",
											"value": "create"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Open Banking Policy Set",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "061725f8-7a77-4f18-ab0a-a7fb96560b3a",
										"exec": [
											"var data = JSON.parse(responseBody);",
											"",
											"postman.setEnvironmentVariable(\"oidcClaimsScriptId\", data._id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept-API-Version",
										"type": "text",
										"value": "protocol=1.0,resource=2.0"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"Open Banking\",\n  \"displayName\": \"Open Banking\",\n  \"description\": \"\",\n  \"resourceTypeUuids\": [\n    \"76656a38-5f8e-401b-83aa-4ccb74ce88d2\"\n  ],\n  \"realm\": \"/{{realm}}\",\n  \"applicationType\": \"iPlanetAMWebAgentService\",\n  \"conditions\": [\n    \"AMIdentityMembership\",\n    \"AND\",\n    \"AuthLevel\",\n    \"AuthScheme\",\n    \"AuthenticateToRealm\",\n    \"AuthenticateToService\",\n    \"IPv4\",\n    \"IPv6\",\n    \"LDAPFilter\",\n    \"LEAuthLevel\",\n    \"NOT\",\n    \"OAuth2Scope\",\n    \"OR\",\n    \"Policy\",\n    \"ResourceEnvIP\",\n    \"Script\",\n    \"Session\",\n    \"SessionProperty\",\n    \"SimpleTime\",\n    \"Transaction\"\n  ],\n  \"subjects\": [\n    \"AND\",\n    \"AuthenticatedUsers\",\n    \"Identity\",\n    \"JwtClaim\",\n    \"NONE\",\n    \"NOT\",\n    \"OR\",\n    \"Policy\"\n  ]\n}\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{iamFQDN}}/am/json/{{realm}}/applications/?_action=create",
									"protocol": "https",
									"host": [
										"{{iamFQDN}}"
									],
									"path": [
										"am",
										"json",
										"{{realm}}",
										"applications",
										""
									],
									"query": [
										{
											"key": "_action",
											"value": "create"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Create AISP policy",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9790f90e-5f0c-4d6c-80ca-ade6af7ff222",
										"exec": [
											"var data = JSON.parse(responseBody);",
											"",
											"postman.setEnvironmentVariable(\"oidcClaimsScriptId\", data._id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept-API-Version",
										"type": "text",
										"value": "protocol=1.0,resource=2.0"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"AISP Policy\",\n  \"active\": true,\n  \"description\": \"\",\n  \"resources\": [\n    \"http://obdemo-rs:8089/openbanking/v3.1/accounts/*\",\n    \"http://obdemo-rs:8089/openbanking/v3.1/accounts\"\n  ],\n  \"applicationName\": \"Open Banking\",\n  \"actionValues\": {\n    \"GET\": true\n  },\n  \"subject\": {\n    \"type\": \"JwtClaim\",\n    \"claimName\": \"intent_type\",\n    \"claimValue\": \"aisp\"\n  },\n  \"condition\": {\n    \"type\": \"Script\",\n    \"scriptId\": \"2f1cdd1a-4a4e-4d3d-b570-90be003545b3\"\n  },\n  \"resourceTypeUuid\": \"76656a38-5f8e-401b-83aa-4ccb74ce88d2\"\n}\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{iamFQDN}}/am/json/{{realm}}/policies/?_action=create",
									"protocol": "https",
									"host": [
										"{{iamFQDN}}"
									],
									"path": [
										"am",
										"json",
										"{{realm}}",
										"policies",
										""
									],
									"query": [
										{
											"key": "_action",
											"value": "create"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Create PISP policy",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "fce964d8-b616-4380-983d-10b5b3967795",
										"exec": [
											"var data = JSON.parse(responseBody);",
											"",
											"postman.setEnvironmentVariable(\"oidcClaimsScriptId\", data._id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept-API-Version",
										"type": "text",
										"value": "protocol=1.0,resource=2.0"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"PISP Policy\",\n  \"active\": true,\n  \"description\": \"\",\n  \"resources\": [\n    \"http://obdemo-rs:8089/openbanking/v3.1/domestic-payments\"\n  ],\n  \"applicationName\": \"Open Banking\",\n  \"actionValues\": {\n    \"POST\": true\n  },\n  \"subject\": {\n    \"type\": \"JwtClaim\",\n    \"claimName\": \"intent_type\",\n    \"claimValue\": \"pisp\"\n  },\n  \"condition\": {\n    \"type\": \"Script\",\n    \"scriptId\": \"{{policyScript}}\"\n  },\n  \"resourceTypeUuid\": \"76656a38-5f8e-401b-83aa-4ccb74ce88d2\"\n}\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{iamFQDN}}/am/json/{{realm}}/policies/?_action=create",
									"protocol": "https",
									"host": [
										"{{iamFQDN}}"
									],
									"path": [
										"am",
										"json",
										"{{realm}}",
										"policies",
										""
									],
									"query": [
										{
											"key": "_action",
											"value": "create"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Policy Engine Oauth2 Client",
							"request": {
								"method": "PUT",
								"header": [
									{
										"description": "Specifies certain media types which are acceptable for the resource.",
										"key": "accept",
										"type": "text",
										"value": "application/json"
									},
									{
										"description": "The media type of the resource.",
										"key": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"description": "Custom header.",
										"key": "X-Requested-With",
										"type": "text",
										"value": "ForgeRock Identity Cloud Postman Collection"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"coreOAuth2ClientConfig\": {\n    \"userpassword\": \"{{policyClientSecret}}\",\n    \"loopbackInterfaceRedirection\": {\n      \"inherited\": false,\n      \"value\": false\n    },\n    \"defaultScopes\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"refreshTokenLifetime\": {\n      \"inherited\": false,\n      \"value\": 0\n    },\n    \"scopes\": {\n      \"inherited\": false,\n      \"value\": [\n        \"fr:idm:*\"\n      ]\n    },\n    \"status\": {\n      \"inherited\": false,\n      \"value\": \"Active\"\n    },\n    \"accessTokenLifetime\": {\n      \"inherited\": false,\n      \"value\": 0\n    },\n    \"redirectionUris\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"clientName\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"clientType\": {\n      \"inherited\": false,\n      \"value\": \"Confidential\"\n    },\n    \"authorizationCodeLifetime\": {\n      \"inherited\": false,\n      \"value\": 0\n    }\n  },\n  \"advancedOAuth2ClientConfig\": {\n    \"descriptions\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"requestUris\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"logoUri\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"subjectType\": {\n      \"inherited\": false,\n      \"value\": \"public\"\n    },\n    \"clientUri\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"name\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"contacts\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"responseTypes\": {\n      \"inherited\": false,\n      \"value\": [\n        \"token\"\n      ]\n    },\n    \"updateAccessToken\": {\n      \"inherited\": false\n    },\n    \"mixUpMitigation\": {\n      \"inherited\": false,\n      \"value\": false\n    },\n    \"javascriptOrigins\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"policyUri\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"sectorIdentifierUri\": {\n      \"inherited\": false\n    },\n    \"tokenEndpointAuthMethod\": {\n      \"inherited\": false,\n      \"value\": \"client_secret_post\"\n    },\n    \"isConsentImplied\": {\n      \"inherited\": false,\n      \"value\": false\n    },\n    \"grantTypes\": {\n      \"inherited\": false,\n      \"value\": [\n        \"client_credentials\"\n      ]\n    }\n  },\n  \"signEncOAuth2ClientConfig\": {\n    \"tokenEndpointAuthSigningAlgorithm\": {\n      \"inherited\": false,\n      \"value\": \"RS256\"\n    },\n    \"idTokenEncryptionEnabled\": {\n      \"inherited\": false,\n      \"value\": false\n    },\n    \"tokenIntrospectionEncryptedResponseEncryptionAlgorithm\": {\n      \"inherited\": false,\n      \"value\": \"A128CBC-HS256\"\n    },\n    \"requestParameterSignedAlg\": {\n      \"inherited\": false\n    },\n    \"clientJwtPublicKey\": {\n      \"inherited\": false\n    },\n    \"idTokenPublicEncryptionKey\": {\n      \"inherited\": false\n    },\n    \"mTLSSubjectDN\": {\n      \"inherited\": false\n    },\n    \"userinfoResponseFormat\": {\n      \"inherited\": false,\n      \"value\": \"JSON\"\n    },\n    \"mTLSCertificateBoundAccessTokens\": {\n      \"inherited\": false,\n      \"value\": false\n    },\n    \"publicKeyLocation\": {\n      \"inherited\": false,\n      \"value\": \"jwks_uri\"\n    },\n    \"tokenIntrospectionResponseFormat\": {\n      \"inherited\": false,\n      \"value\": \"JSON\"\n    },\n    \"jwkStoreCacheMissCacheTime\": {\n      \"inherited\": false,\n      \"value\": 60000\n    },\n    \"requestParameterEncryptedEncryptionAlgorithm\": {\n      \"inherited\": false,\n      \"value\": \"A128CBC-HS256\"\n    },\n    \"userinfoSignedResponseAlg\": {\n      \"inherited\": false\n    },\n    \"idTokenEncryptionAlgorithm\": {\n      \"inherited\": false,\n      \"value\": \"RSA-OAEP-256\"\n    },\n    \"requestParameterEncryptedAlg\": {\n      \"inherited\": false\n    },\n    \"mTLSTrustedCert\": {\n      \"inherited\": false\n    },\n    \"jwkSet\": {\n      \"inherited\": false\n    },\n    \"idTokenEncryptionMethod\": {\n      \"inherited\": false,\n      \"value\": \"A128CBC-HS256\"\n    },\n    \"jwksCacheTimeout\": {\n      \"inherited\": false,\n      \"value\": 3600000\n    },\n    \"userinfoEncryptedResponseAlg\": {\n      \"inherited\": false\n    },\n    \"idTokenSignedResponseAlg\": {\n      \"inherited\": false,\n      \"value\": \"RS256\"\n    },\n    \"jwksUri\": {\n      \"inherited\": false\n    },\n    \"tokenIntrospectionSignedResponseAlg\": {\n      \"inherited\": false,\n      \"value\": \"RS256\"\n    },\n    \"userinfoEncryptedResponseEncryptionAlgorithm\": {\n      \"inherited\": false,\n      \"value\": \"A128CBC-HS256\"\n    },\n    \"tokenIntrospectionEncryptedResponseAlg\": {\n      \"inherited\": false,\n      \"value\": \"RSA-OAEP-256\"\n    }\n  },\n  \"coreOpenIDClientConfig\": {\n    \"claims\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"clientSessionUri\": {\n      \"inherited\": false\n    },\n    \"defaultAcrValues\": {\n      \"inherited\": false,\n      \"value\": []\n    },\n    \"jwtTokenLifetime\": {\n      \"inherited\": false,\n      \"value\": 0\n    },\n    \"defaultMaxAgeEnabled\": {\n      \"inherited\": false,\n      \"value\": false\n    },\n    \"defaultMaxAge\": {\n      \"inherited\": false,\n      \"value\": 600\n    },\n    \"postLogoutRedirectUri\": {\n      \"inherited\": false,\n      \"value\": []\n    }\n  },\n  \"coreUmaClientConfig\": {\n    \"claimsRedirectionUris\": {\n      \"inherited\": false,\n      \"value\": []\n    }\n  }\n}\n"
								},
								"url": "https://{{iamFQDN}}/am/json/{{realm}}/realm-config/agents/OAuth2Client/{{policyClientId}}",
								"description": "Create an OAuth 2.0 client for obtaining scopes as an administrator. The access tokens granted by this client are used to perform administrative tasks throughout this collection."
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "AM - IG service accounts",
					"item": [
						{
							"name": "Create IG Service User",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "bebcf58c-af74-4196-9219-59a7a9a083bd",
										"exec": [
											"pm.globals.set(\"managedUserId\", pm.globals.replaceIn('{{$guid}}'))",
											"pm.globals.set(\"managedUsername\", pm.globals.replaceIn('{{$randomUserName}}'))"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminAccessToken}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userName\": \"{{igServiceAccountUsername}}\",\n  \"sn\": \"Service Account\",\n  \"givenName\": \"IG\",\n  \"mail\": \"{{igServiceAccountEmail}}\",\n  \"password\": \"{{igServiceAccountPassword}}\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{iamFQDN}}/openidm/managed/{{realm}}_user/?_action=create",
									"protocol": "https",
									"host": [
										"{{iamFQDN}}"
									],
									"path": [
										"openidm",
										"managed",
										"{{realm}}_user",
										""
									],
									"query": [
										{
											"key": "_action",
											"value": "create"
										}
									]
								}
							},
							"response": [
								{
									"name": "Success",
									"originalRequest": {
										"method": "GET",
										"header": [
											{
												"description": "(Required) ",
												"key": "Accept-API-Version",
												"value": "<string>"
											}
										],
										"url": "{{baseUrl}}/openidm/managed/user#1.0_query_filter?_fields=&_prettyPrint=true&_queryFilter=<string>&_pageSize=<integer>&_totalPagedResultsPolicy=<string>&_sortKeys=<string>"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "*/*"
										}
									],
									"cookie": [],
									"body": ""
								}
							]
						},
						{
							"name": "Create IG Oauth2 Client",
							"request": {
								"method": "PUT",
								"header": [
									{
										"description": "Specifies certain media types which are acceptable for the resource.",
										"key": "accept",
										"type": "text",
										"value": "application/json"
									},
									{
										"description": "The media type of the resource.",
										"key": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"description": "Custom header.",
										"key": "X-Requested-With",
										"type": "text",
										"value": "ForgeRock Identity Cloud Postman Collection"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"coreOAuth2ClientConfig\": {\n    \"agentgroup\": \"\",\n    \"status\": {\n      \"inherited\": false,\n      \"value\": \"Active\"\n    },\n    \n    \"userpassword\": \"{{igClientSecret}}\",\n    \"clientType\": {\n      \"inherited\": false,\n      \"value\": \"Confidential\"\n    },\n    \"loopbackInterfaceRedirection\": {\n      \"inherited\": true,\n      \"value\": true\n    },\n    \"redirectionUris\": {\n      \"inherited\": false,\n      \"value\": [\n        \"https://httpbin.org/anything\"\n      ]\n    },\n    \"scopes\": {\n      \"inherited\": false,\n      \"value\": [\n        \"fr:idm:*\",\n        \"dynamic_client_registration\"\n      ]\n    },\n    \"defaultScopes\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"clientName\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"authorizationCodeLifetime\": {\n      \"inherited\": true,\n      \"value\": 0\n    },\n    \"refreshTokenLifetime\": {\n      \"inherited\": true,\n      \"value\": 0\n    },\n    \"accessTokenLifetime\": {\n      \"inherited\": true,\n      \"value\": 0\n    }\n  },\n  \"advancedOAuth2ClientConfig\": {\n    \"name\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"descriptions\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"requestUris\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"responseTypes\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"grantTypes\": {\n      \"inherited\": false,\n      \"value\": [\n        \"client_credentials\"\n      ]\n    },\n    \"contacts\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"tokenEndpointAuthMethod\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"sectorIdentifierUri\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"subjectType\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"updateAccessToken\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"clientUri\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"logoUri\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"policyUri\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"isConsentImplied\": {\n      \"inherited\": true,\n      \"value\": true\n    },\n    \"mixUpMitigation\": {\n      \"inherited\": true,\n      \"value\": true\n    }\n  },\n  \"coreOpenIDClientConfig\": {\n    \"claims\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"postLogoutRedirectUri\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"clientSessionUri\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"defaultMaxAge\": {\n      \"inherited\": true,\n      \"value\": 0\n    },\n    \"defaultMaxAgeEnabled\": {\n      \"inherited\": true,\n      \"value\": true\n    },\n    \"defaultAcrValues\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"jwtTokenLifetime\": {\n      \"inherited\": true,\n      \"value\": 0\n    }\n  },\n  \"signEncOAuth2ClientConfig\": {\n    \"jwksUri\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"jwksCacheTimeout\": {\n      \"inherited\": true,\n      \"value\": 0\n    },\n    \"jwkStoreCacheMissCacheTime\": {\n      \"inherited\": true,\n      \"value\": 0\n    },\n    \"tokenEndpointAuthSigningAlgorithm\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"jwkSet\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"idTokenSignedResponseAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"idTokenEncryptionEnabled\": {\n      \"inherited\": true,\n      \"value\": true\n    },\n    \"idTokenEncryptionAlgorithm\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"idTokenEncryptionMethod\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"idTokenPublicEncryptionKey\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"clientJwtPublicKey\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"mTLSTrustedCert\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"mTLSSubjectDN\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"mTLSCertificateBoundAccessTokens\": {\n      \"inherited\": true,\n      \"value\": true\n    },\n    \"publicKeyLocation\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"userinfoResponseFormat\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"userinfoSignedResponseAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"userinfoEncryptedResponseAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"userinfoEncryptedResponseEncryptionAlgorithm\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"requestParameterSignedAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"requestParameterEncryptedAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"requestParameterEncryptedEncryptionAlgorithm\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"tokenIntrospectionResponseFormat\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"tokenIntrospectionSignedResponseAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"tokenIntrospectionEncryptedResponseAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"tokenIntrospectionEncryptedResponseEncryptionAlgorithm\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    }\n  },\n  \"coreUmaClientConfig\": {\n    \"claimsRedirectionUris\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    }\n  }\n}"
								},
								"url": "https://{{iamFQDN}}/am/json/{{realm}}/realm-config/agents/OAuth2Client/{{igClientId}}",
								"description": "Create an OAuth 2.0 client for obtaining scopes as an administrator. The access tokens granted by this client are used to perform administrative tasks throughout this collection."
							},
							"response": []
						},
						{
							"name": "Create IG Policy Agent",
							"request": {
								"method": "PUT",
								"header": [
									{
										"description": "Specifies certain media types which are acceptable for the resource.",
										"key": "accept",
										"type": "text",
										"value": "application/json"
									},
									{
										"description": "The media type of the resource.",
										"key": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"description": "Custom header.",
										"key": "X-Requested-With",
										"type": "text",
										"value": "ForgeRock Identity Cloud Postman Collection"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"coreOAuth2ClientConfig\": {\n    \"agentgroup\": \"\",\n    \"status\": {\n      \"inherited\": false,\n      \"value\": \"Active\"\n    },\n    \n    \"userpassword\": \"{{igClientSecret}}\",\n    \"clientType\": {\n      \"inherited\": false,\n      \"value\": \"Confidential\"\n    },\n    \"loopbackInterfaceRedirection\": {\n      \"inherited\": true,\n      \"value\": true\n    },\n    \"redirectionUris\": {\n      \"inherited\": false,\n      \"value\": [\n        \"https://httpbin.org/anything\"\n      ]\n    },\n    \"scopes\": {\n      \"inherited\": false,\n      \"value\": [\n        \"fr:idm:*\",\n        \"dynamic_client_registration\"\n      ]\n    },\n    \"defaultScopes\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"clientName\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"authorizationCodeLifetime\": {\n      \"inherited\": true,\n      \"value\": 0\n    },\n    \"refreshTokenLifetime\": {\n      \"inherited\": true,\n      \"value\": 0\n    },\n    \"accessTokenLifetime\": {\n      \"inherited\": true,\n      \"value\": 0\n    }\n  },\n  \"advancedOAuth2ClientConfig\": {\n    \"name\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"descriptions\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"requestUris\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"responseTypes\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"grantTypes\": {\n      \"inherited\": false,\n      \"value\": [\n        \"client_credentials\"\n      ]\n    },\n    \"contacts\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"tokenEndpointAuthMethod\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"sectorIdentifierUri\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"subjectType\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"updateAccessToken\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"clientUri\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"logoUri\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"policyUri\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"isConsentImplied\": {\n      \"inherited\": true,\n      \"value\": true\n    },\n    \"mixUpMitigation\": {\n      \"inherited\": true,\n      \"value\": true\n    }\n  },\n  \"coreOpenIDClientConfig\": {\n    \"claims\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"postLogoutRedirectUri\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"clientSessionUri\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"defaultMaxAge\": {\n      \"inherited\": true,\n      \"value\": 0\n    },\n    \"defaultMaxAgeEnabled\": {\n      \"inherited\": true,\n      \"value\": true\n    },\n    \"defaultAcrValues\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    },\n    \"jwtTokenLifetime\": {\n      \"inherited\": true,\n      \"value\": 0\n    }\n  },\n  \"signEncOAuth2ClientConfig\": {\n    \"jwksUri\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"jwksCacheTimeout\": {\n      \"inherited\": true,\n      \"value\": 0\n    },\n    \"jwkStoreCacheMissCacheTime\": {\n      \"inherited\": true,\n      \"value\": 0\n    },\n    \"tokenEndpointAuthSigningAlgorithm\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"jwkSet\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"idTokenSignedResponseAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"idTokenEncryptionEnabled\": {\n      \"inherited\": true,\n      \"value\": true\n    },\n    \"idTokenEncryptionAlgorithm\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"idTokenEncryptionMethod\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"idTokenPublicEncryptionKey\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"clientJwtPublicKey\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"mTLSTrustedCert\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"mTLSSubjectDN\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"mTLSCertificateBoundAccessTokens\": {\n      \"inherited\": true,\n      \"value\": true\n    },\n    \"publicKeyLocation\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"userinfoResponseFormat\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"userinfoSignedResponseAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"userinfoEncryptedResponseAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"userinfoEncryptedResponseEncryptionAlgorithm\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"requestParameterSignedAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"requestParameterEncryptedAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"requestParameterEncryptedEncryptionAlgorithm\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"tokenIntrospectionResponseFormat\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"tokenIntrospectionSignedResponseAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"tokenIntrospectionEncryptedResponseAlg\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    },\n    \"tokenIntrospectionEncryptedResponseEncryptionAlgorithm\": {\n      \"inherited\": true,\n      \"value\": \"string\"\n    }\n  },\n  \"coreUmaClientConfig\": {\n    \"claimsRedirectionUris\": {\n      \"inherited\": true,\n      \"value\": [\n        \"Unknown Type: any\"\n      ]\n    }\n  }\n}"
								},
								"url": "https://{{iamFQDN}}/am/json/{{realm}}/realm-config/agents/OAuth2Client/{{igClientId}}",
								"description": "Create an OAuth 2.0 client for obtaining scopes as an administrator. The access tokens granted by this client are used to perform administrative tasks throughout this collection."
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "IDM",
					"item": [
						{
							"name": "Get IDM admin auth code",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "990fe58c-aae7-4b22-887b-b77729ddd9af",
										"exec": [
											"loc = pm.response.headers.get(\"Location\");",
											"console.log(\"got loc \" + loc);",
											"authCode = loc.split(\"code=\")[1].split(\"&\")[0];",
											"console.log(\"got authcode \" + authCode);",
											"pm.globals.set(\"adminAC\",authCode);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://{{iamFQDN}}/am/oauth2/authorize?redirect_uri=https://{{iamFQDN}}/platform/appAuthHelperRedirect.html&client_id=idmAdminClient&response_type=code&scope=fr:idm:*&code_challenge=gX2yL78GGlz3QHsQZKPf96twOmUBKxn1-IXPd5_EHdA&code_challenge_method=S256",
									"protocol": "https",
									"host": [
										"{{iamFQDN}}"
									],
									"path": [
										"am",
										"oauth2",
										"authorize"
									],
									"query": [
										{
											"key": "redirect_uri",
											"value": "https://{{iamFQDN}}/platform/appAuthHelperRedirect.html"
										},
										{
											"key": "client_id",
											"value": "idmAdminClient"
										},
										{
											"key": "response_type",
											"value": "code"
										},
										{
											"key": "scope",
											"value": "fr:idm:*"
										},
										{
											"key": "code_challenge",
											"value": "gX2yL78GGlz3QHsQZKPf96twOmUBKxn1-IXPd5_EHdA"
										},
										{
											"key": "code_challenge_method",
											"value": "S256"
										}
									]
								},
								"description": "Obtain an access token as the Postman Administrative User. Create this user in the `/alpha` realm, and ensure it has the `openidm-admin` authorization role."
							},
							"response": [
								{
									"name": "Example",
									"originalRequest": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "urlencoded",
											"urlencoded": [
												{
													"key": "grant_type",
													"value": "password",
													"description": "The grant type required for the Resource Owner Password Credentials Grant.",
													"type": "text"
												},
												{
													"key": "username",
													"value": "{{postmanDemoUsername}}",
													"description": "Username for a ForgeRock demo user.",
													"type": "text"
												},
												{
													"key": "password",
													"value": "{{postmanDemoPassword}}",
													"description": "Password for a ForgeRock demo user.",
													"type": "text"
												},
												{
													"key": "scope",
													"value": "write",
													"description": "Strings that are presented to the user for approval and included in tokens so that the protected resource may make decisions about what to give access to.",
													"type": "text"
												},
												{
													"key": "client_id",
													"value": "{{postmanConfidentialClientId}}",
													"description": "The ID of the Confidential OAuth Client.",
													"type": "text"
												},
												{
													"key": "client_secret",
													"value": "{{postmanClientSecret}}",
													"description": "The secret of the Confidential OAuth Client. See the ForgeRock documentation for stronger methods of client authentication.",
													"type": "text"
												}
											]
										},
										"url": "{{amUrl}}/oauth2{{realm}}/access_token"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "X-Frame-Options",
											"value": "SAMEORIGIN"
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff"
										},
										{
											"key": "Cache-Control",
											"value": "no-store"
										},
										{
											"key": "Pragma",
											"value": "no-cache"
										},
										{
											"key": "Content-Type",
											"value": "application/json;charset=UTF-8"
										},
										{
											"key": "Content-Length",
											"value": "1570"
										},
										{
											"key": "Date",
											"value": "Thu, 13 Aug 2020 12:16:52 GMT"
										}
									],
									"cookie": [],
									"body": "{\n    \"access_token\": \"eyJ0eXAiJ9.eyJzdWIiOiJkZPXXcM\",\n    \"refresh_token\": \"eyJ0eXAiOiJKV1QiLC.eyl0VHJXpdhFiWDw\",\n    \"scope\": \"write\",\n    \"token_type\": \"Bearer\",\n    \"expires_in\": 3599\n}"
								}
							]
						},
						{
							"name": "Get IDM admin token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "cfad2d19-f586-45ab-9553-e7ff75658afc",
										"exec": [
											"var jsonData = JSON.parse(responseBody);",
											"",
											"if(jsonData.access_token && jsonData.access_token != \"\")",
											"{",
											"    pm.globals.set(\"adminAccessToken\", jsonData.access_token);",
											"}",
											"",
											"if(jsonData.refresh_token && jsonData.refresh_token != \"\")",
											"{",
											"    pm.globals.set(\"adminRefreshToken\", jsonData.refresh_token);",
											"}",
											"",
											"// Tests",
											"",
											"pm.test(\"Status code is 200\", () => {",
											"  pm.expect(pm.response.code).to.eql(200);",
											"});",
											"",
											"pm.test(\"Response contains access_token\", function () {",
											"    pm.expect(jsonData.access_token).to.be.a(\"string\");",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "edirect_uri=https%3A%2F%2Fopenam-solutionarchitecture-hlobpoc.forgeblocks.com%2Fplatform%2FappAuthHelperRedirect.html&code=G42u08LZhiWvJ7mypkbKTVeU8Jo.WAWHeR7XP8zx7riZEQ2mNjgPJ-I&code_verifier=TGAoJ3EKzCSwEuVfzZsnDCypGJAGVfeCqk9VEBrp7Mptvw5oGV71eWSgPn1IvdGBeZbUY6CHRAeAC8ICa07tNcsCHbMEpLJfMN8JaKEZb2O1RTHRpj8LbwwwNTBeKupO",
											"value": "",
											"type": "text"
										},
										{
											"key": "grant-type",
											"value": "authorization_code",
											"type": "text"
										},
										{
											"key": "client_id",
											"value": "idmAdminClient",
											"type": "text"
										},
										{
											"key": "redirect_uri",
											"value": "https://{{iamFQDN}}/platform/appAuthHelperRedirect.html",
											"type": "text"
										},
										{
											"key": "code",
											"value": "{{authCode}}",
											"type": "text"
										},
										{
											"key": "code_verifier",
											"value": "TGAoJ3EKzCSwEuVfzZsnDCypGJAGVfeCqk9VEBrp7Mptvw5oGV71eWSgPn1IvdGBeZbUY6CHRAeAC8ICa07tNcsCHbMEpLJfMN8JaKEZb2O1RTHRpj8LbwwwNTBeKupO",
											"type": "text"
										}
									]
								},
								"url": "https://{{iamFQDN}}/am/oauth2/access_token",
								"description": "Obtain an access token as the Postman Administrative User. Create this user in the `/alpha` realm, and ensure it has the `openidm-admin` authorization role."
							},
							"response": [
								{
									"name": "Example",
									"originalRequest": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "urlencoded",
											"urlencoded": [
												{
													"key": "grant_type",
													"value": "password",
													"description": "The grant type required for the Resource Owner Password Credentials Grant.",
													"type": "text"
												},
												{
													"key": "username",
													"value": "{{postmanDemoUsername}}",
													"description": "Username for a ForgeRock demo user.",
													"type": "text"
												},
												{
													"key": "password",
													"value": "{{postmanDemoPassword}}",
													"description": "Password for a ForgeRock demo user.",
													"type": "text"
												},
												{
													"key": "scope",
													"value": "write",
													"description": "Strings that are presented to the user for approval and included in tokens so that the protected resource may make decisions about what to give access to.",
													"type": "text"
												},
												{
													"key": "client_id",
													"value": "{{postmanConfidentialClientId}}",
													"description": "The ID of the Confidential OAuth Client.",
													"type": "text"
												},
												{
													"key": "client_secret",
													"value": "{{postmanClientSecret}}",
													"description": "The secret of the Confidential OAuth Client. See the ForgeRock documentation for stronger methods of client authentication.",
													"type": "text"
												}
											]
										},
										"url": "{{amUrl}}/oauth2{{realm}}/access_token"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "X-Frame-Options",
											"value": "SAMEORIGIN"
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff"
										},
										{
											"key": "Cache-Control",
											"value": "no-store"
										},
										{
											"key": "Pragma",
											"value": "no-cache"
										},
										{
											"key": "Content-Type",
											"value": "application/json;charset=UTF-8"
										},
										{
											"key": "Content-Length",
											"value": "1570"
										},
										{
											"key": "Date",
											"value": "Thu, 13 Aug 2020 12:16:52 GMT"
										}
									],
									"cookie": [],
									"body": "{\n    \"access_token\": \"eyJ0eXAiJ9.eyJzdWIiOiJkZPXXcM\",\n    \"refresh_token\": \"eyJ0eXAiOiJKV1QiLC.eyl0VHJXpdhFiWDw\",\n    \"scope\": \"write\",\n    \"token_type\": \"Bearer\",\n    \"expires_in\": 3599\n}"
								}
							]
						},
						{
							"name": "Add OB managed objects",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer On4cRdUKKpTDOMG-EswqrWpYNsQ",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\n  {\n    \"operation\": \"add\",\n    \"field\": \"objects/-\",\n    \"value\": {\n            \"name\" : \"ObAccountAccess\",\n            \"schema\" : {\n                \"$schema\" : \"http://forgerock.org/json-schema#\",\n                \"type\" : \"object\",\n                \"title\" : \"OB Account Access\",\n                \"description\" : \"OB Account Access Intent\",\n                \"icon\" : \"fa-institution\",\n                \"properties\" : {\n                    \"Data\" : {\n                        \"title\" : \"Data\",\n                        \"type\" : \"object\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : true,\n                        \"properties\" : {\n                            \"ConsentId\" : {\n                                \"title\" : \"Account Access Consent Id\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : true,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"CreationDateTime\" : {\n                                \"title\" : \"Creation Date Time\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : true,\n                                \"userEditable\" : true\n                            },\n                            \"Status\" : {\n                                \"title\" : \"Account Access Status\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : true,\n                                \"userEditable\" : true\n                            },\n                            \"StatusUpdateDateTime\" : {\n                                \"title\" : \"Status Update Date Time\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : true,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"Permissions\" : {\n                                \"title\" : \"Permission\",\n                                \"type\" : \"array\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"items\" : {\n                                    \"type\" : \"string\"\n                                }\n                            },\n                            \"ExpirationDateTime\" : {\n                                \"title\" : \"Expiration Date Time\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"TransactionFromDateTime\" : {\n                                \"title\" : \"Transaction From Date Time\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"TransactionToDateTime\" : {\n                                \"title\" : \"Transaction To Date Time\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            }\n                        },\n                        \"order\" : [\n                            \"ConsentId\",\n                            \"CreationDateTime\",\n                            \"Status\",\n                            \"StatusUpdateDateTime\",\n                            \"Permissions\",\n                            \"ExpirationDateTime\",\n                            \"TransactionFromDateTime\",\n                            \"TransactionToDateTime\"\n                        ],\n                        \"description\" : null,\n                        \"isVirtual\" : false,\n                        \"nullable\" : false\n                    },\n                    \"Risk\" : {\n                        \"title\" : \"Risk\",\n                        \"type\" : \"object\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : true,\n                        \"properties\" : { },\n                        \"order\" : [ ]\n                    },\n                    \"Tpp\" : {\n                        \"title\" : \"Tpp\",\n                        \"type\" : \"relationship\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : false,\n                        \"returnByDefault\" : false,\n                        \"reverseRelationship\" : true,\n                        \"reversePropertyName\" : \"AccountAccessIntents\",\n                        \"validate\" : false,\n                        \"properties\" : {\n                            \"_ref\" : {\n                                \"type\" : \"string\"\n                            },\n                            \"_refProperties\" : {\n                                \"type\" : \"object\",\n                                \"properties\" : {\n                                    \"_id\" : {\n                                        \"type\" : \"string\",\n                                        \"required\" : false,\n                                        \"propName\" : \"_id\"\n                                    }\n                                }\n                            }\n                        },\n                        \"resourceCollection\" : [\n                            {\n                                \"path\" : \"managed/obTpp\",\n                                \"label\" : \"ObTpp\",\n                                \"query\" : {\n                                    \"queryFilter\" : \"true\",\n                                    \"fields\" : [\n                                        \"name\",\n                                        \"identifier\"\n                                    ],\n                                    \"sortKeys\" : [ ]\n                                }\n                            }\n                        ],\n                        \"description\" : null\n                    },\n                    \"User\" : {\n                        \"title\" : \"User\",\n                        \"type\" : \"relationship\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : false,\n                        \"returnByDefault\" : false,\n                        \"reverseRelationship\" : true,\n                        \"reversePropertyName\" : \"AccountAccess\",\n                        \"validate\" : false,\n                        \"properties\" : {\n                            \"_ref\" : {\n                                \"type\" : \"string\"\n                            },\n                            \"_refProperties\" : {\n                                \"type\" : \"object\",\n                                \"properties\" : {\n                                    \"_id\" : {\n                                        \"type\" : \"string\",\n                                        \"required\" : false,\n                                        \"propName\" : \"_id\"\n                                    }\n                                }\n                            }\n                        },\n                        \"resourceCollection\" : [\n                            {\n                                \"path\" : \"managed/user\",\n                                \"label\" : \"User\",\n                                \"query\" : {\n                                    \"queryFilter\" : \"true\",\n                                    \"fields\" : [\n                                        \"userName\",\n                                        \"mail\"\n                                    ],\n                                    \"sortKeys\" : [ ]\n                                }\n                            }\n                        ],\n                        \"description\" : null\n                    }\n                },\n                \"order\" : [\n                    \"Data\",\n                    \"Risk\",\n                    \"Tpp\",\n                    \"User\"\n                ],\n                \"required\" : [\n                    \"Data\",\n                    \"Risk\"\n                ],\n                \"mat-icon\" : \"\"\n            },\n            \"iconClass\" : \"fa fa-database\",\n            \"type\" : \"Managed Object\",\n            \"postCreate\" : {\n                \"type\" : \"text/javascript\",\n                \"globals\" : { },\n                \"source\" : \"object.Data.ConsentId = object._id\\nopenidm.update(resourceName.toString(),null, object)\"\n            }\n        }\n  },\n  {\n    \"operation\": \"add\",\n    \"field\": \"objects/-\",\n    \"value\":         {\n            \"name\" : \"ObDomesticPayment\",\n            \"schema\" : {\n                \"$schema\" : \"http://forgerock.org/json-schema#\",\n                \"type\" : \"object\",\n                \"title\" : \"OB Domestic Payment\",\n                \"description\" : \"OB Domestic Payment\",\n                \"icon\" : \"fa-money\",\n                \"properties\" : {\n                    \"Data\" : {\n                        \"title\" : \"Data\",\n                        \"type\" : \"object\",\n                        \"viewable\" : true,\n                        \"searchable\" : true,\n                        \"userEditable\" : true,\n                        \"properties\" : {\n                            \"ConsentId\" : {\n                                \"title\" : \"Payment Intent Id\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : true,\n                                \"userEditable\" : true\n                            },\n                            \"CreationDateTime\" : {\n                                \"title\" : \"Creation Date Time\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : true,\n                                \"userEditable\" : true\n                            },\n                            \"Status\" : {\n                                \"title\" : \"Payment Intent Status\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : true,\n                                \"userEditable\" : true,\n                                \"description\" : \"Payment Intent Status\",\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"StatusUpdateDateTime\" : {\n                                \"title\" : \"Status Update Date Time\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : true,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"ExpectedExecutionDateTime\" : {\n                                \"title\" : \"Expected Execution Date Time\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"ExpectedSettlementDateTime\" : {\n                                \"title\" : \"Expected Settlement Date Time\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"CutOffDateTime\" : {\n                                \"title\" : \"Cut Off Date Time\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"Charges\" : {\n                                \"title\" : \"Charges\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"Initiation\" : {\n                                \"title\" : \"Initiation\",\n                                \"type\" : \"object\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"properties\" : {\n                                    \"InstructionIdentification\" : {\n                                        \"title\" : \"Instruction Identification\",\n                                        \"type\" : \"string\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"description\" : null,\n                                        \"minLength\" : null,\n                                        \"isVirtual\" : false\n                                    },\n                                    \"EndToEndIdentification\" : {\n                                        \"title\" : \"End To End Identification\",\n                                        \"type\" : \"string\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"description\" : null,\n                                        \"minLength\" : null,\n                                        \"isVirtual\" : false\n                                    },\n                                    \"LocalInstrument\" : {\n                                        \"title\" : \"Local Instrument\",\n                                        \"type\" : \"string\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"description\" : null,\n                                        \"minLength\" : null,\n                                        \"isVirtual\" : false\n                                    },\n                                    \"InstructedAmount\" : {\n                                        \"title\" : \"Instructed Amount\",\n                                        \"type\" : \"object\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"properties\" : {\n                                            \"Amount\" : {\n                                                \"title\" : \"Amount\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"Currency\" : {\n                                                \"title\" : \"Currency\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            }\n                                        },\n                                        \"order\" : [\n                                            \"Amount\",\n                                            \"Currency\"\n                                        ],\n                                        \"description\" : null,\n                                        \"isVirtual\" : false,\n                                        \"required\" : [\n                                            \"Amount\",\n                                            \"Currency\"\n                                        ],\n                                        \"nullable\" : false\n                                    },\n                                    \"DebtorAccount\" : {\n                                        \"title\" : \"Debtor Account\",\n                                        \"type\" : \"object\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"properties\" : {\n                                            \"SchemeName\" : {\n                                                \"title\" : \"Scheme Name\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"Identification\" : {\n                                                \"title\" : \"Debtor Identification\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : \"Debtor Identification\",\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"Name\" : {\n                                                \"title\" : \"Name\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"SecondaryIdentification\" : {\n                                                \"title\" : \"Secondary Identification\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            }\n                                        },\n                                        \"order\" : [\n                                            \"SchemeName\",\n                                            \"Identification\",\n                                            \"Name\",\n                                            \"SecondaryIdentification\"\n                                        ],\n                                        \"description\" : null,\n                                        \"isVirtual\" : false,\n                                        \"nullable\" : false\n                                    },\n                                    \"CreditorAccount\" : {\n                                        \"title\" : \"Creditor Account\",\n                                        \"type\" : \"object\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"properties\" : {\n                                            \"SchemeName\" : {\n                                                \"title\" : \"Scheme Name\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"Identification\" : {\n                                                \"title\" : \"Creditor Identification\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : \"Creditor Identification\",\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"Name\" : {\n                                                \"title\" : \"Name\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"SecondaryIdentification\" : {\n                                                \"title\" : \"Secondary Identification\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            }\n                                        },\n                                        \"order\" : [\n                                            \"SchemeName\",\n                                            \"Identification\",\n                                            \"Name\",\n                                            \"SecondaryIdentification\"\n                                        ],\n                                        \"description\" : null,\n                                        \"isVirtual\" : false,\n                                        \"required\" : [\n                                            \"SchemeName\",\n                                            \"Identification\",\n                                            \"Name\"\n                                        ],\n                                        \"nullable\" : false\n                                    },\n                                    \"CreditorPostalAddress\" : {\n                                        \"title\" : \"Creditor Postal Address\",\n                                        \"type\" : \"object\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"properties\" : {\n                                            \"AddressType\" : {\n                                                \"title\" : \"Address Type\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"Department\" : {\n                                                \"title\" : \"Department\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"SubDepartment\" : {\n                                                \"title\" : \"SubDepartment\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"StreetName\" : {\n                                                \"title\" : \"Street Name\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"BuildingNumber\" : {\n                                                \"title\" : \"Building Number\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"PostCode\" : {\n                                                \"title\" : \"Post Code\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"TownName\" : {\n                                                \"title\" : \"Town Name\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"CountrySubDivision\" : {\n                                                \"title\" : \"Country Sub Division\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"Country\" : {\n                                                \"title\" : \"Country\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"AddressLine\" : {\n                                                \"title\" : \"Address Line\",\n                                                \"type\" : \"array\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"items\" : {\n                                                    \"type\" : \"string\"\n                                                }\n                                            }\n                                        },\n                                        \"order\" : [\n                                            \"AddressType\",\n                                            \"Department\",\n                                            \"SubDepartment\",\n                                            \"StreetName\",\n                                            \"BuildingNumber\",\n                                            \"PostCode\",\n                                            \"TownName\",\n                                            \"CountrySubDivision\",\n                                            \"Country\",\n                                            \"AddressLine\"\n                                        ],\n                                        \"description\" : null,\n                                        \"isVirtual\" : false,\n                                        \"nullable\" : false\n                                    },\n                                    \"RemittanceInformation\" : {\n                                        \"title\" : \"Remittance Information\",\n                                        \"type\" : \"object\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"properties\" : {\n                                            \"Unstructured\" : {\n                                                \"title\" : \"Unstructured\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            },\n                                            \"Reference\" : {\n                                                \"title\" : \"Reference\",\n                                                \"type\" : \"string\",\n                                                \"viewable\" : true,\n                                                \"searchable\" : false,\n                                                \"userEditable\" : true,\n                                                \"description\" : null,\n                                                \"minLength\" : null,\n                                                \"isVirtual\" : false\n                                            }\n                                        },\n                                        \"order\" : [\n                                            \"Unstructured\",\n                                            \"Reference\"\n                                        ],\n                                        \"description\" : null,\n                                        \"isVirtual\" : false,\n                                        \"nullable\" : false\n                                    },\n                                    \"SupplementaryData\" : {\n                                        \"title\" : \"Supplementary Data\",\n                                        \"type\" : \"object\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"properties\" : { },\n                                        \"order\" : [ ]\n                                    }\n                                },\n                                \"order\" : [\n                                    \"InstructionIdentification\",\n                                    \"EndToEndIdentification\",\n                                    \"LocalInstrument\",\n                                    \"InstructedAmount\",\n                                    \"DebtorAccount\",\n                                    \"CreditorAccount\",\n                                    \"CreditorPostalAddress\",\n                                    \"RemittanceInformation\",\n                                    \"SupplementaryData\"\n                                ],\n                                \"description\" : null,\n                                \"isVirtual\" : false,\n                                \"nullable\" : false\n                            },\n                            \"Authorisation\" : {\n                                \"title\" : \"Authorisation\",\n                                \"type\" : \"object\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"properties\" : {\n                                    \"AuthorisationType\" : {\n                                        \"title\" : \"Authorisation Type\",\n                                        \"type\" : \"string\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"description\" : null,\n                                        \"minLength\" : null,\n                                        \"isVirtual\" : false\n                                    },\n                                    \"CompletionDateTime\" : {\n                                        \"title\" : \"Completion Date Time\",\n                                        \"type\" : \"string\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"description\" : null,\n                                        \"minLength\" : null,\n                                        \"isVirtual\" : false\n                                    }\n                                },\n                                \"order\" : [\n                                    \"AuthorisationType\",\n                                    \"CompletionDateTime\"\n                                ],\n                                \"description\" : null,\n                                \"isVirtual\" : false,\n                                \"nullable\" : false\n                            }\n                        },\n                        \"order\" : [\n                            \"ConsentId\",\n                            \"CreationDateTime\",\n                            \"Status\",\n                            \"StatusUpdateDateTime\",\n                            \"ExpectedExecutionDateTime\",\n                            \"ExpectedSettlementDateTime\",\n                            \"CutOffDateTime\",\n                            \"Charges\",\n                            \"Initiation\",\n                            \"Authorisation\"\n                        ],\n                        \"description\" : \"Data\",\n                        \"isVirtual\" : false,\n                        \"required\" : [ ],\n                        \"nullable\" : false\n                    },\n                    \"Risk\" : {\n                        \"title\" : \"Risk\",\n                        \"type\" : \"object\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : true,\n                        \"properties\" : {\n                            \"PaymentContextCode\" : {\n                                \"title\" : \"Payment Context Code\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"MerchantCategoryCode\" : {\n                                \"title\" : \"Merchant Category Code\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"MerchantCustomerIdentification\" : {\n                                \"title\" : \"Merchant Customer Identification\",\n                                \"type\" : \"string\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"description\" : null,\n                                \"minLength\" : null,\n                                \"isVirtual\" : false\n                            },\n                            \"DeliveryAddress\" : {\n                                \"title\" : \"Delivery Address\",\n                                \"type\" : \"object\",\n                                \"viewable\" : true,\n                                \"searchable\" : false,\n                                \"userEditable\" : true,\n                                \"properties\" : {\n                                    \"AddressLine\" : {\n                                        \"title\" : \"Address Line\",\n                                        \"type\" : \"array\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"items\" : {\n                                            \"type\" : \"string\"\n                                        }\n                                    },\n                                    \"StreetName\" : {\n                                        \"title\" : \"Street Name\",\n                                        \"type\" : \"string\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"description\" : null,\n                                        \"minLength\" : null,\n                                        \"isVirtual\" : false\n                                    },\n                                    \"BuildingNumber\" : {\n                                        \"title\" : \"Building Number\",\n                                        \"type\" : \"string\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"description\" : null,\n                                        \"minLength\" : null,\n                                        \"isVirtual\" : false\n                                    },\n                                    \"PostCode\" : {\n                                        \"title\" : \"Post Code\",\n                                        \"type\" : \"string\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"description\" : null,\n                                        \"minLength\" : null,\n                                        \"isVirtual\" : false\n                                    },\n                                    \"TownName\" : {\n                                        \"title\" : \"Town Name\",\n                                        \"type\" : \"string\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"description\" : null,\n                                        \"minLength\" : null,\n                                        \"isVirtual\" : false\n                                    },\n                                    \"CountrySubDivision\" : {\n                                        \"title\" : \"Country Sub Division\",\n                                        \"type\" : \"array\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"items\" : {\n                                            \"type\" : \"string\"\n                                        }\n                                    },\n                                    \"Country\" : {\n                                        \"title\" : \"Country\",\n                                        \"type\" : \"string\",\n                                        \"viewable\" : true,\n                                        \"searchable\" : false,\n                                        \"userEditable\" : true,\n                                        \"description\" : null,\n                                        \"minLength\" : null,\n                                        \"isVirtual\" : false\n                                    }\n                                },\n                                \"order\" : [\n                                    \"AddressLine\",\n                                    \"StreetName\",\n                                    \"BuildingNumber\",\n                                    \"PostCode\",\n                                    \"TownName\",\n                                    \"CountrySubDivision\",\n                                    \"Country\"\n                                ],\n                                \"description\" : null,\n                                \"isVirtual\" : false,\n                                \"required\" : [\n                                    \"TownName\",\n                                    \"Country\"\n                                ],\n                                \"nullable\" : false\n                            }\n                        },\n                        \"order\" : [\n                            \"PaymentContextCode\",\n                            \"MerchantCategoryCode\",\n                            \"MerchantCustomerIdentification\",\n                            \"DeliveryAddress\"\n                        ],\n                        \"description\" : null,\n                        \"isVirtual\" : false,\n                        \"nullable\" : false\n                    },\n                    \"Tpp\" : {\n                        \"title\" : \"Tpp\",\n                        \"type\" : \"relationship\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : false,\n                        \"returnByDefault\" : false,\n                        \"reverseRelationship\" : true,\n                        \"reversePropertyName\" : \"domesticPayments\",\n                        \"validate\" : false,\n                        \"properties\" : {\n                            \"_ref\" : {\n                                \"type\" : \"string\"\n                            },\n                            \"_refProperties\" : {\n                                \"type\" : \"object\",\n                                \"properties\" : {\n                                    \"_id\" : {\n                                        \"type\" : \"string\",\n                                        \"required\" : false,\n                                        \"propName\" : \"_id\"\n                                    }\n                                }\n                            }\n                        },\n                        \"resourceCollection\" : [\n                            {\n                                \"path\" : \"managed/obTpp\",\n                                \"label\" : \"ObTpp\",\n                                \"query\" : {\n                                    \"queryFilter\" : \"true\",\n                                    \"fields\" : [\n                                        \"name\"\n                                    ],\n                                    \"sortKeys\" : [ ]\n                                }\n                            }\n                        ],\n                        \"description\" : null\n                    },\n                    \"User\" : {\n                        \"title\" : \"User\",\n                        \"type\" : \"relationship\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : false,\n                        \"returnByDefault\" : false,\n                        \"reverseRelationship\" : true,\n                        \"reversePropertyName\" : \"DomesticPayments\",\n                        \"validate\" : false,\n                        \"properties\" : {\n                            \"_ref\" : {\n                                \"type\" : \"string\"\n                            },\n                            \"_refProperties\" : {\n                                \"type\" : \"object\",\n                                \"properties\" : {\n                                    \"_id\" : {\n                                        \"type\" : \"string\",\n                                        \"required\" : false,\n                                        \"propName\" : \"_id\"\n                                    }\n                                }\n                            }\n                        },\n                        \"resourceCollection\" : [\n                            {\n                                \"path\" : \"managed/user\",\n                                \"label\" : \"User\",\n                                \"query\" : {\n                                    \"queryFilter\" : \"true\",\n                                    \"fields\" : [\n                                        \"userName\",\n                                        \"mail\"\n                                    ],\n                                    \"sortKeys\" : [ ]\n                                }\n                            }\n                        ],\n                        \"description\" : null\n                    }\n                },\n                \"order\" : [\n                    \"Data\",\n                    \"Risk\",\n                    \"Tpp\",\n                    \"User\"\n                ],\n                \"required\" : [\n                    \"Data\",\n                    \"Risk\"\n                ],\n                \"mat-icon\" : \"\"\n            },\n            \"iconClass\" : \"fa fa-database\",\n            \"type\" : \"Managed Object\",\n            \"postCreate\" : {\n                \"type\" : \"text/javascript\",\n                \"globals\" : { },\n                \"source\" : \"object.Data.ConsentId = object._id\\nopenidm.update(resourceName.toString(),null, object)\"\n            }\n        }\n  },\n  {\n    \"operation\": \"add\",\n    \"field\": \"objects/-\",\n    \"value\": {\n            \"name\" : \"obTpp\",\n            \"schema\" : {\n                \"$schema\" : \"http://forgerock.org/json-schema#\",\n                \"type\" : \"object\",\n                \"title\" : \"OBTpp\",\n                \"description\" : \"OB TPP Details\",\n                \"icon\" : \"fa-users\",\n                \"properties\" : {\n                    \"name\" : {\n                        \"title\" : \"TPP Name\",\n                        \"type\" : \"string\",\n                        \"viewable\" : true,\n                        \"searchable\" : true,\n                        \"userEditable\" : true,\n                        \"description\" : null,\n                        \"minLength\" : null,\n                        \"isVirtual\" : false\n                    },\n                    \"identifier\" : {\n                        \"title\" : \"AM Client ID\",\n                        \"type\" : \"string\",\n                        \"viewable\" : true,\n                        \"searchable\" : true,\n                        \"userEditable\" : true,\n                        \"description\" : null,\n                        \"minLength\" : null,\n                        \"isVirtual\" : false,\n                        \"policies\" : [\n                            {\n                                \"policyId\" : \"unique\",\n                                \"params\" : { }\n                            }\n                        ]\n                    },\n                    \"certId\" : {\n                        \"title\" : \"Certificate Identifier\",\n                        \"type\" : \"string\",\n                        \"viewable\" : true,\n                        \"searchable\" : true,\n                        \"userEditable\" : true\n                    },\n                    \"created\" : {\n                        \"title\" : \"Timestamp\",\n                        \"type\" : \"string\",\n                        \"viewable\" : true,\n                        \"searchable\" : true,\n                        \"userEditable\" : true\n                    },\n                    \"_id\" : {\n                        \"title\" : \"Internal IDM Identifier\",\n                        \"type\" : \"string\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : false,\n                        \"description\" : null,\n                        \"minLength\" : null,\n                        \"isVirtual\" : false\n                    },\n                    \"ssas\" : {\n                        \"title\" : \"TPP Ssas\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : false,\n                        \"returnByDefault\" : true,\n                        \"type\" : \"array\",\n                        \"items\" : {\n                            \"type\" : \"relationship\",\n                            \"reverseRelationship\" : true,\n                            \"reversePropertyName\" : \"obTpp\",\n                            \"validate\" : false,\n                            \"properties\" : {\n                                \"_ref\" : {\n                                    \"type\" : \"string\"\n                                },\n                                \"_refProperties\" : {\n                                    \"type\" : \"object\",\n                                    \"properties\" : {\n                                        \"_id\" : {\n                                            \"type\" : \"string\",\n                                            \"required\" : false,\n                                            \"propName\" : \"_id\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"resourceCollection\" : [\n                                {\n                                    \"path\" : \"managed/obTppSsa\",\n                                    \"label\" : \"ObTppSsa\",\n                                    \"query\" : {\n                                        \"queryFilter\" : \"true\",\n                                        \"fields\" : [\n                                            \"ssa\"\n                                        ],\n                                        \"sortKeys\" : [ ]\n                                    }\n                                }\n                            ]\n                        },\n                        \"description\" : \"TPP Software Statement Assertions\"\n                    },\n                    \"domesticPayments\" : {\n                        \"description\" : null,\n                        \"title\" : \"DomesticPayments\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : false,\n                        \"policies\" : [ ],\n                        \"returnByDefault\" : false,\n                        \"minLength\" : null,\n                        \"pattern\" : null,\n                        \"type\" : \"array\",\n                        \"items\" : {\n                            \"type\" : \"relationship\",\n                            \"reverseRelationship\" : true,\n                            \"reversePropertyName\" : \"Tpp\",\n                            \"validate\" : false,\n                            \"properties\" : {\n                                \"_ref\" : {\n                                    \"type\" : \"string\"\n                                },\n                                \"_refProperties\" : {\n                                    \"type\" : \"object\",\n                                    \"properties\" : {\n                                        \"_id\" : {\n                                            \"type\" : \"string\",\n                                            \"required\" : false,\n                                            \"propName\" : \"_id\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"resourceCollection\" : [\n                                {\n                                    \"path\" : \"managed/ObDomesticPayment\",\n                                    \"label\" : \"ObDomesticPayment\",\n                                    \"query\" : {\n                                        \"queryFilter\" : \"true\",\n                                        \"fields\" : [ ],\n                                        \"sortKeys\" : [ ]\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    \"AccountAccessIntents\" : {\n                        \"description\" : null,\n                        \"title\" : \"AccountAccessIntents\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : false,\n                        \"policies\" : [ ],\n                        \"returnByDefault\" : false,\n                        \"minLength\" : null,\n                        \"pattern\" : null,\n                        \"type\" : \"array\",\n                        \"items\" : {\n                            \"type\" : \"relationship\",\n                            \"reverseRelationship\" : true,\n                            \"reversePropertyName\" : \"Tpp\",\n                            \"validate\" : false,\n                            \"properties\" : {\n                                \"_ref\" : {\n                                    \"type\" : \"string\"\n                                },\n                                \"_refProperties\" : {\n                                    \"type\" : \"object\",\n                                    \"properties\" : {\n                                        \"_id\" : {\n                                            \"type\" : \"string\",\n                                            \"required\" : false,\n                                            \"propName\" : \"_id\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"resourceCollection\" : [\n                                {\n                                    \"path\" : \"managed/ObAccountAccess\",\n                                    \"label\" : \"ObAccountAccess\",\n                                    \"query\" : {\n                                        \"queryFilter\" : \"true\",\n                                        \"fields\" : [ ],\n                                        \"sortKeys\" : [ ]\n                                    }\n                                }\n                            ]\n                        }\n                    }\n                },\n                \"order\" : [\n                    \"name\",\n                    \"identifier\",\n                    \"certId\",\n                    \"created\",\n                    \"_id\",\n                    \"ssas\",\n                    \"domesticPayments\",\n                    \"AccountAccessIntents\"\n                ],\n                \"required\" : [\n                    \"identifier\"\n                ]\n            },\n            \"iconClass\" : \"fa fa-database\",\n            \"type\" : \"Managed Object\"\n        }\n  },\n  {\n    \"operation\": \"add\",\n    \"field\": \"objects/-\",\n    \"value\": {\n            \"name\" : \"obTppSsa\",\n            \"schema\" : {\n                \"$schema\" : \"http://forgerock.org/json-schema#\",\n                \"type\" : \"object\",\n                \"title\" : \"OBTppSsa\",\n                \"description\" : \"OB TPP Software Statement Assertion\",\n                \"icon\" : \"fa-suitcase\",\n                \"properties\" : {\n                    \"ssa\" : {\n                        \"title\" : \"Software Statement Assertion\",\n                        \"type\" : \"string\",\n                        \"viewable\" : true,\n                        \"searchable\" : true,\n                        \"userEditable\" : true,\n                        \"description\" : null,\n                        \"minLength\" : null,\n                        \"isVirtual\" : false,\n                        \"policies\" : [\n                            {\n                                \"policyId\" : \"unique\",\n                                \"params\" : { }\n                            }\n                        ]\n                    },\n                    \"obTpp\" : {\n                        \"description\" : \"OB TPP Name\",\n                        \"title\" : \"OB TPP Name\",\n                        \"viewable\" : true,\n                        \"searchable\" : false,\n                        \"userEditable\" : false,\n                        \"policies\" : [ ],\n                        \"returnByDefault\" : false,\n                        \"minLength\" : null,\n                        \"type\" : \"relationship\",\n                        \"reverseRelationship\" : true,\n                        \"reversePropertyName\" : \"ssas\",\n                        \"validate\" : false,\n                        \"properties\" : {\n                            \"_ref\" : {\n                                \"type\" : \"string\"\n                            },\n                            \"_refProperties\" : {\n                                \"type\" : \"object\",\n                                \"properties\" : {\n                                    \"_id\" : {\n                                        \"type\" : \"string\",\n                                        \"required\" : false,\n                                        \"propName\" : \"_id\"\n                                    }\n                                }\n                            }\n                        },\n                        \"resourceCollection\" : [\n                            {\n                                \"path\" : \"managed/obTpp\",\n                                \"label\" : \"ObTpp\",\n                                \"query\" : {\n                                    \"queryFilter\" : \"true\",\n                                    \"fields\" : [\n                                        \"name\"\n                                    ],\n                                    \"sortKeys\" : [ ]\n                                }\n                            }\n                        ]\n                    },\n                    \"_id\" : {\n                        \"title\" : null,\n                        \"type\" : \"string\",\n                        \"viewable\" : true,\n                        \"searchable\" : true,\n                        \"userEditable\" : true\n                    }\n                },\n                \"order\" : [\n                    \"ssa\",\n                    \"obTpp\",\n                    \"_id\"\n                ],\n                \"required\" : [ ]\n            },\n            \"iconClass\" : \"fa fa-database\",\n            \"type\" : \"Managed Object\"\n        }\n  }\n]\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://{{iamFQDN}}/openidm/config/managed"
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "f2a742a4-5fae-4a94-9e03-71d494e8e417",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "ce5a34f7-5984-4576-ad40-1475443ad80f",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Troubleshooting",
			"item": [
				{
					"name": "Get Audit Log Sources",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "72f20817-1594-4dda-ab6a-9c241b6faa0e",
								"exec": [
									"const JSONResponse = JSON.parse(responseBody);",
									"",
									"// Did request contain results?",
									"if(JSONResponse.resultCount && JSONResponse.resultCount > 0)",
									"{",
									"  // Set `managedUserId` variable",
									"  pm.globals.set(\"auditSource\", JSONResponse.result[0]);",
									"}",
									"else",
									"{",
									"  pm.globals.set(\"auditSource\", \"none_found\");  ",
									"}",
									"",
									"",
									"// Tests",
									"",
									"pm.test(\"Status code is 200.\", () => {",
									"  pm.expect(pm.response.code).to.eql(200);",
									"});",
									"",
									"pm.test(\"Response contains tokenId or authId\", function () {",
									"    pm.expect(JSONResponse).to.have.any.keys('resultCount', 'result');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "x-api-key",
								"value": "{{logApiKey}}"
							},
							{
								"key": "x-api-secret",
								"type": "text",
								"value": "{{logApiSecret}}"
							}
						],
						"url": {
							"raw": "https://{{iamFQDN}}/monitoring/logs/sources?_prettyPrint=true",
							"protocol": "https",
							"host": [
								"{{iamFQDN}}"
							],
							"path": [
								"monitoring",
								"logs",
								"sources"
							],
							"query": [
								{
									"key": "_prettyPrint",
									"value": "true"
								}
							]
						},
						"description": "Get log sources"
					},
					"response": [
						{
							"name": "List of log sources",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/logs/sources?_pageSize=<integer>&_pagedResouresOffset=<integer>&_prettyPrint=false",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"logs",
										"sources"
									],
									"query": [
										{
											"key": "_pageSize",
											"value": "<integer>"
										},
										{
											"key": "_pagedResouresOffset",
											"value": "<integer>"
										},
										{
											"key": "_prettyPrint",
											"value": "false"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n\t\"result\": [\n\t\t\"<string>\",\n\t\t\"<string>\"\n\t],\n\t\"resultCount\": \"<integer>\",\n\t\"pagedResultsCookie\": \"<string>\",\n\t\"totalPagedResultsPolicy\": \"<string>\",\n\t\"totalPagedResults\": \"<integer>\",\n\t\"remainingPagedResults\": \"<integer>\"\n}"
						}
					]
				},
				{
					"name": "Tail audit log",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9d0eecf3-7979-4597-81d9-ce270d8a1f19",
								"exec": [
									"const jsonData = JSON.parse(responseBody);",
									"if(jsonData.pagedResultsCookie && jsonData.pagedResultsCookie != \"\"){",
									"    pm.globals.set(\"pagedResultsCookie\", jsonData.pagedResultsCookie);",
									"}",
									"",
									"// Tests",
									"",
									"pm.test(\"Status code is 200.\", () => {",
									"  pm.expect(pm.response.code).to.eql(200);",
									"});",
									"",
									"pm.test(\"Response contains results\", function () {",
									"    pm.expect(jsonData).to.have.any.keys('resultCount', 'result');",
									"});",
									"",
									"pm.test(\"Response contains pagedResultsCookie\", function () {",
									"    pm.expect(jsonData).to.have.any.keys('pagedResultsCookie');",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "x-api-key",
								"type": "text",
								"value": "{{logApiKey}}"
							},
							{
								"key": "x-api-secret",
								"type": "text",
								"value": "{{logApiSecret}}"
							}
						],
						"url": {
							"raw": "https://{{iamFQDN}}/monitoring/logs/tail?source=am-everything&_pagedResultsCookie={{pagedResultsCookie}}&_prettyPrint=false",
							"protocol": "https",
							"host": [
								"{{iamFQDN}}"
							],
							"path": [
								"monitoring",
								"logs",
								"tail"
							],
							"query": [
								{
									"key": "source",
									"value": "am-everything"
								},
								{
									"key": "_pagedResultsCookie",
									"value": "{{pagedResultsCookie}}"
								},
								{
									"key": "_prettyPrint",
									"value": "false"
								}
							]
						},
						"description": "Tail log events"
					},
					"response": [
						{
							"name": "List of log events",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/logs/tail?source=<string>&_pagedResultsCookie=<string>&_prettyPrint=false",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"logs",
										"tail"
									],
									"query": [
										{
											"key": "source",
											"value": "<string>"
										},
										{
											"key": "_pagedResultsCookie",
											"value": "<string>"
										},
										{
											"key": "_prettyPrint",
											"value": "false"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n\t\"result\": [\n\t\t{\n\t\t\t\"payload\": \"<object>\",\n\t\t\t\"timestamp\": \"<dateTime>\",\n\t\t\t\"type\": \"<string>\"\n\t\t},\n\t\t{\n\t\t\t\"payload\": \"<object>\",\n\t\t\t\"timestamp\": \"<dateTime>\",\n\t\t\t\"type\": \"<string>\"\n\t\t}\n\t],\n\t\"resultCount\": \"<integer>\",\n\t\"pagedResultsCookie\": \"<string>\",\n\t\"totalPagedResultsPolicy\": \"<string>\",\n\t\"totalPagedResults\": \"<integer>\",\n\t\"remainingPagedResults\": \"<integer>\"\n}"
						}
					]
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "2d844c99-2491-4665-8448-4b0c36a5c0e4",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "fa349fba-6bfb-4146-95d9-300ce16ae4ff",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}